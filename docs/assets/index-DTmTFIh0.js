var gy=Object.defineProperty;var yy=(e,t,i)=>t in e?gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Dt=(e,t,i)=>yy(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vl(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const vt={},ln=[],yi=()=>{},my=()=>!1,Qo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ul=e=>e.startsWith("onUpdate:"),Qt=Object.assign,Gl=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},wy=Object.prototype.hasOwnProperty,pt=(e,t)=>wy.call(e,t),X=Array.isArray,cn=e=>ta(e)==="[object Map]",Sp=e=>ta(e)==="[object Set]",q=e=>typeof e=="function",Nt=e=>typeof e=="string",ss=e=>typeof e=="symbol",At=e=>e!==null&&typeof e=="object",Tp=e=>(At(e)||q(e))&&q(e.then)&&q(e.catch),Cp=Object.prototype.toString,ta=e=>Cp.call(e),xy=e=>ta(e).slice(8,-1),Bp=e=>ta(e)==="[object Object]",Yl=e=>Nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,nr=Vl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ea=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},by=/-(\w)/g,is=ea(e=>e.replace(by,(t,i)=>i?i.toUpperCase():"")),vy=/\B([A-Z])/g,Ls=ea(e=>e.replace(vy,"-$1").toLowerCase()),Rp=ea(e=>e.charAt(0).toUpperCase()+e.slice(1)),Sa=ea(e=>e?`on${Rp(e)}`:""),ts=(e,t)=>!Object.is(e,t),Ta=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},kp=(e,t,i,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:i})},Ey=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Qc;const ia=()=>Qc||(Qc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xl(e){if(X(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],n=Nt(s)?By(s):Xl(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(Nt(e)||At(e))return e}const Sy=/;(?![^(]*\))/g,Ty=/:([^]+)/,Cy=/\/\*[^]*?\*\//g;function By(e){const t={};return e.replace(Cy,"").split(Sy).forEach(i=>{if(i){const s=i.split(Ty);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Kl(e){let t="";if(Nt(e))t=e;else if(X(e))for(let i=0;i<e.length;i++){const s=Kl(e[i]);s&&(t+=s+" ")}else if(At(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Ry="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ky=Vl(Ry);function Lp(e){return!!e||e===""}const Op=e=>!!(e&&e.__v_isRef===!0),ll=e=>Nt(e)?e:e==null?"":X(e)||At(e)&&(e.toString===Cp||!q(e.toString))?Op(e)?ll(e.value):JSON.stringify(e,Pp,2):String(e),Pp=(e,t)=>Op(t)?Pp(e,t.value):cn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,n],r)=>(i[Ca(s,r)+" =>"]=n,i),{})}:Sp(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>Ca(i))}:ss(t)?Ca(t):At(t)&&!X(t)&&!Bp(t)?String(t):t,Ca=(e,t="")=>{var i;return ss(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Re;class Ly{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Re,!t&&Re&&(this.index=(Re.scopes||(Re.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=Re;try{return Re=this,t()}finally{Re=i}}}on(){Re=this}off(){Re=this.parent}stop(t){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Oy(){return Re}let bt;const Ba=new WeakSet;class Mp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Re&&Re.active&&Re.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ba.has(this)&&(Ba.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$p(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tu(this),Dp(this);const t=bt,i=Je;bt=this,Je=!0;try{return this.fn()}finally{Ip(this),bt=t,Je=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Jl(t);this.deps=this.depsTail=void 0,tu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ba.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){cl(this)&&this.run()}get dirty(){return cl(this)}}let Ap=0,rr,or;function $p(e,t=!1){if(e.flags|=8,t){e.next=or,or=e;return}e.next=rr,rr=e}function ql(){Ap++}function Zl(){if(--Ap>0)return;if(or){let t=or;for(or=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;rr;){let t=rr;for(rr=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=i}}if(e)throw e}function Dp(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ip(e){let t,i=e.depsTail,s=i;for(;s;){const n=s.prevDep;s.version===-1?(s===i&&(i=n),Jl(s),Py(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}e.deps=t,e.depsTail=i}function cl(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wp(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wp(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===yr))return;e.globalVersion=yr;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!cl(e)){e.flags&=-3;return}const i=bt,s=Je;bt=e,Je=!0;try{Dp(e);const n=e.fn(e._value);(t.version===0||ts(n,e._value))&&(e._value=n,t.version++)}catch(n){throw t.version++,n}finally{bt=i,Je=s,Ip(e),e.flags&=-3}}function Jl(e,t=!1){const{dep:i,prevSub:s,nextSub:n}=e;if(s&&(s.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=s,e.nextSub=void 0),i.subs===e&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Jl(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function Py(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Je=!0;const Fp=[];function ns(){Fp.push(Je),Je=!1}function rs(){const e=Fp.pop();Je=e===void 0?!0:e}function tu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=bt;bt=void 0;try{t()}finally{bt=i}}}let yr=0;class My{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ql{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!bt||!Je||bt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==bt)i=this.activeLink=new My(bt,this),bt.deps?(i.prevDep=bt.depsTail,bt.depsTail.nextDep=i,bt.depsTail=i):bt.deps=bt.depsTail=i,zp(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=bt.depsTail,i.nextDep=void 0,bt.depsTail.nextDep=i,bt.depsTail=i,bt.deps===i&&(bt.deps=s)}return i}trigger(t){this.version++,yr++,this.notify(t)}notify(t){ql();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Zl()}}}function zp(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)zp(s)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const ul=new WeakMap,Es=Symbol(""),dl=Symbol(""),mr=Symbol("");function Zt(e,t,i){if(Je&&bt){let s=ul.get(e);s||ul.set(e,s=new Map);let n=s.get(i);n||(s.set(i,n=new Ql),n.map=s,n.key=i),n.track()}}function Ai(e,t,i,s,n,r){const o=ul.get(e);if(!o){yr++;return}const a=h=>{h&&h.trigger()};if(ql(),t==="clear")o.forEach(a);else{const h=X(e),l=h&&Yl(i);if(h&&i==="length"){const c=Number(s);o.forEach((d,f)=>{(f==="length"||f===mr||!ss(f)&&f>=c)&&a(d)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),l&&a(o.get(mr)),t){case"add":h?l&&a(o.get("length")):(a(o.get(Es)),cn(e)&&a(o.get(dl)));break;case"delete":h||(a(o.get(Es)),cn(e)&&a(o.get(dl)));break;case"set":cn(e)&&a(o.get(Es));break}}Zl()}function Ds(e){const t=ft(e);return t===e?t:(Zt(t,"iterate",mr),Qe(e)?t:t.map(ne))}function tc(e){return Zt(e=ft(e),"iterate",mr),e}const Ay={__proto__:null,[Symbol.iterator](){return Ra(this,Symbol.iterator,ne)},concat(...e){return Ds(this).concat(...e.map(t=>X(t)?Ds(t):t))},entries(){return Ra(this,"entries",e=>(e[1]=ne(e[1]),e))},every(e,t){return Ei(this,"every",e,t,void 0,arguments)},filter(e,t){return Ei(this,"filter",e,t,i=>i.map(ne),arguments)},find(e,t){return Ei(this,"find",e,t,ne,arguments)},findIndex(e,t){return Ei(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ei(this,"findLast",e,t,ne,arguments)},findLastIndex(e,t){return Ei(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ei(this,"forEach",e,t,void 0,arguments)},includes(...e){return ka(this,"includes",e)},indexOf(...e){return ka(this,"indexOf",e)},join(e){return Ds(this).join(e)},lastIndexOf(...e){return ka(this,"lastIndexOf",e)},map(e,t){return Ei(this,"map",e,t,void 0,arguments)},pop(){return Ln(this,"pop")},push(...e){return Ln(this,"push",e)},reduce(e,...t){return eu(this,"reduce",e,t)},reduceRight(e,...t){return eu(this,"reduceRight",e,t)},shift(){return Ln(this,"shift")},some(e,t){return Ei(this,"some",e,t,void 0,arguments)},splice(...e){return Ln(this,"splice",e)},toReversed(){return Ds(this).toReversed()},toSorted(e){return Ds(this).toSorted(e)},toSpliced(...e){return Ds(this).toSpliced(...e)},unshift(...e){return Ln(this,"unshift",e)},values(){return Ra(this,"values",ne)}};function Ra(e,t,i){const s=tc(e),n=s[t]();return s!==e&&!Qe(e)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=i(r.value)),r}),n}const $y=Array.prototype;function Ei(e,t,i,s,n,r){const o=tc(e),a=o!==e&&!Qe(e),h=o[t];if(h!==$y[t]){const d=h.apply(e,r);return a?ne(d):d}let l=i;o!==e&&(a?l=function(d,f){return i.call(this,ne(d),f,e)}:i.length>2&&(l=function(d,f){return i.call(this,d,f,e)}));const c=h.call(o,l,s);return a&&n?n(c):c}function eu(e,t,i,s){const n=tc(e);let r=i;return n!==e&&(Qe(e)?i.length>3&&(r=function(o,a,h){return i.call(this,o,a,h,e)}):r=function(o,a,h){return i.call(this,o,ne(a),h,e)}),n[t](r,...s)}function ka(e,t,i){const s=ft(e);Zt(s,"iterate",mr);const n=s[t](...i);return(n===-1||n===!1)&&nc(i[0])?(i[0]=ft(i[0]),s[t](...i)):n}function Ln(e,t,i=[]){ns(),ql();const s=ft(e)[t].apply(e,i);return Zl(),rs(),s}const Dy=Vl("__proto__,__v_isRef,__isVue"),Hp=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ss));function Iy(e){ss(e)||(e=String(e));const t=ft(this);return Zt(t,"has",e),t.hasOwnProperty(e)}class jp{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,s){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return r;if(i==="__v_raw")return s===(n?r?Yy:Gp:r?Up:Vp).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=X(t);if(!n){let h;if(o&&(h=Ay[i]))return h;if(i==="hasOwnProperty")return Iy}const a=Reflect.get(t,i,Jt(t)?t:s);return(ss(i)?Hp.has(i):Dy(i))||(n||Zt(t,"get",i),r)?a:Jt(a)?o&&Yl(i)?a:a.value:At(a)?n?Yp(a):ic(a):a}}class Np extends jp{constructor(t=!1){super(!1,t)}set(t,i,s,n){let r=t[i];if(!this._isShallow){const h=Cs(r);if(!Qe(s)&&!Cs(s)&&(r=ft(r),s=ft(s)),!X(t)&&Jt(r)&&!Jt(s))return h?!1:(r.value=s,!0)}const o=X(t)&&Yl(i)?Number(i)<t.length:pt(t,i),a=Reflect.set(t,i,s,Jt(t)?t:n);return t===ft(n)&&(o?ts(s,r)&&Ai(t,"set",i,s):Ai(t,"add",i,s)),a}deleteProperty(t,i){const s=pt(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&s&&Ai(t,"delete",i,void 0),n}has(t,i){const s=Reflect.has(t,i);return(!ss(i)||!Hp.has(i))&&Zt(t,"has",i),s}ownKeys(t){return Zt(t,"iterate",X(t)?"length":Es),Reflect.ownKeys(t)}}class Wy extends jp{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Fy=new Np,zy=new Wy,Hy=new Np(!0);const fl=e=>e,Xr=e=>Reflect.getPrototypeOf(e);function jy(e,t,i){return function(...s){const n=this.__v_raw,r=ft(n),o=cn(r),a=e==="entries"||e===Symbol.iterator&&o,h=e==="keys"&&o,l=n[e](...s),c=i?fl:t?pl:ne;return!t&&Zt(r,"iterate",h?dl:Es),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Kr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ny(e,t){const i={get(n){const r=this.__v_raw,o=ft(r),a=ft(n);e||(ts(n,a)&&Zt(o,"get",n),Zt(o,"get",a));const{has:h}=Xr(o),l=t?fl:e?pl:ne;if(h.call(o,n))return l(r.get(n));if(h.call(o,a))return l(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!e&&Zt(ft(n),"iterate",Es),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=ft(r),a=ft(n);return e||(ts(n,a)&&Zt(o,"has",n),Zt(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,h=ft(a),l=t?fl:e?pl:ne;return!e&&Zt(h,"iterate",Es),a.forEach((c,d)=>n.call(r,l(c),l(d),o))}};return Qt(i,e?{add:Kr("add"),set:Kr("set"),delete:Kr("delete"),clear:Kr("clear")}:{add(n){!t&&!Qe(n)&&!Cs(n)&&(n=ft(n));const r=ft(this);return Xr(r).has.call(r,n)||(r.add(n),Ai(r,"add",n,n)),this},set(n,r){!t&&!Qe(r)&&!Cs(r)&&(r=ft(r));const o=ft(this),{has:a,get:h}=Xr(o);let l=a.call(o,n);l||(n=ft(n),l=a.call(o,n));const c=h.call(o,n);return o.set(n,r),l?ts(r,c)&&Ai(o,"set",n,r):Ai(o,"add",n,r),this},delete(n){const r=ft(this),{has:o,get:a}=Xr(r);let h=o.call(r,n);h||(n=ft(n),h=o.call(r,n)),a&&a.call(r,n);const l=r.delete(n);return h&&Ai(r,"delete",n,void 0),l},clear(){const n=ft(this),r=n.size!==0,o=n.clear();return r&&Ai(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=jy(n,e,t)}),i}function ec(e,t){const i=Ny(e,t);return(s,n,r)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(pt(i,n)&&n in s?i:s,n,r)}const Vy={get:ec(!1,!1)},Uy={get:ec(!1,!0)},Gy={get:ec(!0,!1)};const Vp=new WeakMap,Up=new WeakMap,Gp=new WeakMap,Yy=new WeakMap;function Xy(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ky(e){return e.__v_skip||!Object.isExtensible(e)?0:Xy(xy(e))}function ic(e){return Cs(e)?e:sc(e,!1,Fy,Vy,Vp)}function qy(e){return sc(e,!1,Hy,Uy,Up)}function Yp(e){return sc(e,!0,zy,Gy,Gp)}function sc(e,t,i,s,n){if(!At(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=n.get(e);if(r)return r;const o=Ky(e);if(o===0)return e;const a=new Proxy(e,o===2?s:i);return n.set(e,a),a}function ar(e){return Cs(e)?ar(e.__v_raw):!!(e&&e.__v_isReactive)}function Cs(e){return!!(e&&e.__v_isReadonly)}function Qe(e){return!!(e&&e.__v_isShallow)}function nc(e){return e?!!e.__v_raw:!1}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function Zy(e){return!pt(e,"__v_skip")&&Object.isExtensible(e)&&kp(e,"__v_skip",!0),e}const ne=e=>At(e)?ic(e):e,pl=e=>At(e)?Yp(e):e;function Jt(e){return e?e.__v_isRef===!0:!1}function iu(e){return Jy(e,!1)}function Jy(e,t){return Jt(e)?e:new Qy(e,t)}class Qy{constructor(t,i){this.dep=new Ql,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:ft(t),this._value=i?t:ne(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,s=this.__v_isShallow||Qe(t)||Cs(t);t=s?t:ft(t),ts(t,i)&&(this._rawValue=t,this._value=s?t:ne(t),this.dep.trigger())}}function tm(e){return Jt(e)?e.value:e}const em={get:(e,t,i)=>t==="__v_raw"?e:tm(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const n=e[t];return Jt(n)&&!Jt(i)?(n.value=i,!0):Reflect.set(e,t,i,s)}};function Xp(e){return ar(e)?e:new Proxy(e,em)}class im{constructor(t,i,s){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Ql(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return $p(this,!0),!0}get value(){const t=this.dep.track();return Wp(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sm(e,t,i=!1){let s,n;return q(e)?s=e:(s=e.get,n=e.set),new im(s,n,i)}const qr={},Do=new WeakMap;let ms;function nm(e,t=!1,i=ms){if(i){let s=Do.get(i);s||Do.set(i,s=[]),s.push(e)}}function rm(e,t,i=vt){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:h}=i,l=w=>n?w:Qe(w)||n===!1||n===0?Qi(w,1):Qi(w);let c,d,f,u,p=!1,y=!1;if(Jt(e)?(d=()=>e.value,p=Qe(e)):ar(e)?(d=()=>l(e),p=!0):X(e)?(y=!0,p=e.some(w=>ar(w)||Qe(w)),d=()=>e.map(w=>{if(Jt(w))return w.value;if(ar(w))return l(w);if(q(w))return h?h(w,2):w()})):q(e)?t?d=h?()=>h(e,2):e:d=()=>{if(f){ns();try{f()}finally{rs()}}const w=ms;ms=c;try{return h?h(e,3,[u]):e(u)}finally{ms=w}}:d=yi,t&&n){const w=d,M=n===!0?1/0:n;d=()=>Qi(w(),M)}const v=Oy(),S=()=>{c.stop(),v&&v.active&&Gl(v.effects,c)};if(r&&t){const w=t;t=(...M)=>{w(...M),S()}}let x=y?new Array(e.length).fill(qr):qr;const C=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const M=c.run();if(n||p||(y?M.some((z,V)=>ts(z,x[V])):ts(M,x))){f&&f();const z=ms;ms=c;try{const V=[M,x===qr?void 0:y&&x[0]===qr?[]:x,u];h?h(t,3,V):t(...V),x=M}finally{ms=z}}}else c.run()};return a&&a(C),c=new Mp(d),c.scheduler=o?()=>o(C,!1):C,u=w=>nm(w,!1,c),f=c.onStop=()=>{const w=Do.get(c);if(w){if(h)h(w,4);else for(const M of w)M();Do.delete(c)}},t?s?C(!0):x=c.run():o?o(C.bind(null,!0),!0):c.run(),S.pause=c.pause.bind(c),S.resume=c.resume.bind(c),S.stop=S,S}function Qi(e,t=1/0,i){if(t<=0||!At(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Jt(e))Qi(e.value,t,i);else if(X(e))for(let s=0;s<e.length;s++)Qi(e[s],t,i);else if(Sp(e)||cn(e))e.forEach(s=>{Qi(s,t,i)});else if(Bp(e)){for(const s in e)Qi(e[s],t,i);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Qi(e[s],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mr(e,t,i,s){try{return s?e(...s):e()}catch(n){sa(n,t,i)}}function xi(e,t,i,s){if(q(e)){const n=Mr(e,t,i,s);return n&&Tp(n)&&n.catch(r=>{sa(r,t,i)}),n}if(X(e)){const n=[];for(let r=0;r<e.length;r++)n.push(xi(e[r],t,i,s));return n}}function sa(e,t,i,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||vt;if(t){let a=t.parent;const h=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,h,l)===!1)return}a=a.parent}if(r){ns(),Mr(r,null,10,[e,h,l]),rs();return}}om(e,i,n,s,o)}function om(e,t,i,s=!0,n=!1){if(n)throw e;console.error(e)}const re=[];let ci=-1;const un=[];let qi=null,tn=0;const Kp=Promise.resolve();let Io=null;function am(e){const t=Io||Kp;return e?t.then(this?e.bind(this):e):t}function hm(e){let t=ci+1,i=re.length;for(;t<i;){const s=t+i>>>1,n=re[s],r=wr(n);r<e||r===e&&n.flags&2?t=s+1:i=s}return t}function rc(e){if(!(e.flags&1)){const t=wr(e),i=re[re.length-1];!i||!(e.flags&2)&&t>=wr(i)?re.push(e):re.splice(hm(t),0,e),e.flags|=1,qp()}}function qp(){Io||(Io=Kp.then(Jp))}function lm(e){X(e)?un.push(...e):qi&&e.id===-1?qi.splice(tn+1,0,e):e.flags&1||(un.push(e),e.flags|=1),qp()}function su(e,t,i=ci+1){for(;i<re.length;i++){const s=re[i];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;re.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Zp(e){if(un.length){const t=[...new Set(un)].sort((i,s)=>wr(i)-wr(s));if(un.length=0,qi){qi.push(...t);return}for(qi=t,tn=0;tn<qi.length;tn++){const i=qi[tn];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}qi=null,tn=0}}const wr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Jp(e){try{for(ci=0;ci<re.length;ci++){const t=re[ci];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Mr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ci<re.length;ci++){const t=re[ci];t&&(t.flags&=-2)}ci=-1,re.length=0,Zp(),Io=null,(re.length||un.length)&&Jp()}}let gi=null,Qp=null;function Wo(e){const t=gi;return gi=e,Qp=e&&e.type.__scopeId||null,t}function cm(e,t=gi,i){if(!t||e._n)return e;const s=(...n)=>{s._d&&du(-1);const r=Wo(t);let o;try{o=e(...n)}finally{Wo(r),s._d&&du(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function hs(e,t,i,s){const n=e.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let h=a.dir[s];h&&(ns(),xi(h,i,8,[e.el,a,e,t]),rs())}}const um=Symbol("_vte"),dm=e=>e.__isTeleport;function oc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,oc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function t_(e,t){return q(e)?Qt({name:e.name},t,{setup:e}):e}function e_(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Fo(e,t,i,s,n=!1){if(X(e)){e.forEach((p,y)=>Fo(p,t&&(X(t)?t[y]:t),i,s,n));return}if(hr(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Fo(e,t,i,s.component.subTree);return}const r=s.shapeFlag&4?lc(s.component):s.el,o=n?null:r,{i:a,r:h}=e,l=t&&t.r,c=a.refs===vt?a.refs={}:a.refs,d=a.setupState,f=ft(d),u=d===vt?()=>!1:p=>pt(f,p);if(l!=null&&l!==h&&(Nt(l)?(c[l]=null,u(l)&&(d[l]=null)):Jt(l)&&(l.value=null)),q(h))Mr(h,a,12,[o,c]);else{const p=Nt(h),y=Jt(h);if(p||y){const v=()=>{if(e.f){const S=p?u(h)?d[h]:c[h]:h.value;n?X(S)&&Gl(S,r):X(S)?S.includes(r)||S.push(r):p?(c[h]=[r],u(h)&&(d[h]=c[h])):(h.value=[r],e.k&&(c[e.k]=h.value))}else p?(c[h]=o,u(h)&&(d[h]=o)):y&&(h.value=o,e.k&&(c[e.k]=o))};o?(v.id=-1,Be(v,i)):v()}}}ia().requestIdleCallback;ia().cancelIdleCallback;const hr=e=>!!e.type.__asyncLoader,i_=e=>e.type.__isKeepAlive;function fm(e,t){s_(e,"a",t)}function pm(e,t){s_(e,"da",t)}function s_(e,t,i=oe){const s=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(na(t,s,i),i){let n=i.parent;for(;n&&n.parent;)i_(n.parent.vnode)&&_m(s,t,i,n),n=n.parent}}function _m(e,t,i,s){const n=na(t,e,s,!0);r_(()=>{Gl(s[t],n)},i)}function na(e,t,i=oe,s=!1){if(i){const n=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{ns();const a=Ar(i),h=xi(t,i,e,o);return a(),rs(),h});return s?n.unshift(r):n.push(r),r}}const Hi=e=>(t,i=oe)=>{(!br||e==="sp")&&na(e,(...s)=>t(...s),i)},gm=Hi("bm"),n_=Hi("m"),ym=Hi("bu"),mm=Hi("u"),wm=Hi("bum"),r_=Hi("um"),xm=Hi("sp"),bm=Hi("rtg"),vm=Hi("rtc");function Em(e,t=oe){na("ec",e,t)}const Sm=Symbol.for("v-ndc"),_l=e=>e?B_(e)?lc(e):_l(e.parent):null,lr=Qt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_l(e.parent),$root:e=>_l(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>a_(e),$forceUpdate:e=>e.f||(e.f=()=>{rc(e.update)}),$nextTick:e=>e.n||(e.n=am.bind(e.proxy)),$watch:e=>Gm.bind(e)}),La=(e,t)=>e!==vt&&!e.__isScriptSetup&&pt(e,t),Tm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:h}=e;let l;if(t[0]!=="$"){const u=o[t];if(u!==void 0)switch(u){case 1:return s[t];case 2:return n[t];case 4:return i[t];case 3:return r[t]}else{if(La(s,t))return o[t]=1,s[t];if(n!==vt&&pt(n,t))return o[t]=2,n[t];if((l=e.propsOptions[0])&&pt(l,t))return o[t]=3,r[t];if(i!==vt&&pt(i,t))return o[t]=4,i[t];gl&&(o[t]=0)}}const c=lr[t];let d,f;if(c)return t==="$attrs"&&Zt(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(i!==vt&&pt(i,t))return o[t]=4,i[t];if(f=h.config.globalProperties,pt(f,t))return f[t]},set({_:e},t,i){const{data:s,setupState:n,ctx:r}=e;return La(n,t)?(n[t]=i,!0):s!==vt&&pt(s,t)?(s[t]=i,!0):pt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!i[o]||e!==vt&&pt(e,o)||La(t,o)||(a=r[0])&&pt(a,o)||pt(s,o)||pt(lr,o)||pt(n.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:pt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function nu(e){return X(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let gl=!0;function Cm(e){const t=a_(e),i=e.proxy,s=e.ctx;gl=!1,t.beforeCreate&&ru(t.beforeCreate,e,"bc");const{data:n,computed:r,methods:o,watch:a,provide:h,inject:l,created:c,beforeMount:d,mounted:f,beforeUpdate:u,updated:p,activated:y,deactivated:v,beforeDestroy:S,beforeUnmount:x,destroyed:C,unmounted:w,render:M,renderTracked:z,renderTriggered:V,errorCaptured:ut,serverPrefetch:Lt,expose:dt,inheritAttrs:Q,components:wt,directives:ue,filters:Ee}=t;if(l&&Bm(l,s,null),o)for(const at in o){const U=o[at];q(U)&&(s[at]=U.bind(i))}if(n){const at=n.call(i,i);At(at)&&(e.data=ic(at))}if(gl=!0,r)for(const at in r){const U=r[at],Kt=q(U)?U.bind(i,i):q(U.get)?U.get.bind(i,i):yi,vi=!q(U)&&q(U.set)?U.set.bind(i):yi,Yt=fw({get:Kt,set:vi});Object.defineProperty(s,at,{enumerable:!0,configurable:!0,get:()=>Yt.value,set:te=>Yt.value=te})}if(a)for(const at in a)o_(a[at],s,i,at);if(h){const at=q(h)?h.call(i):h;Reflect.ownKeys(at).forEach(U=>{Mm(U,at[U])})}c&&ru(c,e,"c");function Ct(at,U){X(U)?U.forEach(Kt=>at(Kt.bind(i))):U&&at(U.bind(i))}if(Ct(gm,d),Ct(n_,f),Ct(ym,u),Ct(mm,p),Ct(fm,y),Ct(pm,v),Ct(Em,ut),Ct(vm,z),Ct(bm,V),Ct(wm,x),Ct(r_,w),Ct(xm,Lt),X(dt))if(dt.length){const at=e.exposed||(e.exposed={});dt.forEach(U=>{Object.defineProperty(at,U,{get:()=>i[U],set:Kt=>i[U]=Kt})})}else e.exposed||(e.exposed={});M&&e.render===yi&&(e.render=M),Q!=null&&(e.inheritAttrs=Q),wt&&(e.components=wt),ue&&(e.directives=ue),Lt&&e_(e)}function Bm(e,t,i=yi){X(e)&&(e=yl(e));for(const s in e){const n=e[s];let r;At(n)?"default"in n?r=To(n.from||s,n.default,!0):r=To(n.from||s):r=To(n),Jt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function ru(e,t,i){xi(X(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function o_(e,t,i,s){let n=s.includes(".")?b_(i,s):()=>i[s];if(Nt(e)){const r=t[e];q(r)&&Pa(n,r)}else if(q(e))Pa(n,e.bind(i));else if(At(e))if(X(e))e.forEach(r=>o_(r,t,i,s));else{const r=q(e.handler)?e.handler.bind(i):t[e.handler];q(r)&&Pa(n,r,e)}}function a_(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let h;return a?h=a:!n.length&&!i&&!s?h=t:(h={},n.length&&n.forEach(l=>zo(h,l,o,!0)),zo(h,t,o)),At(t)&&r.set(t,h),h}function zo(e,t,i,s=!1){const{mixins:n,extends:r}=t;r&&zo(e,r,i,!0),n&&n.forEach(o=>zo(e,o,i,!0));for(const o in t)if(!(s&&o==="expose")){const a=Rm[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Rm={data:ou,props:au,emits:au,methods:sr,computed:sr,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:sr,directives:sr,watch:Lm,provide:ou,inject:km};function ou(e,t){return t?e?function(){return Qt(q(e)?e.call(this,this):e,q(t)?t.call(this,this):t)}:t:e}function km(e,t){return sr(yl(e),yl(t))}function yl(e){if(X(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ee(e,t){return e?[...new Set([].concat(e,t))]:t}function sr(e,t){return e?Qt(Object.create(null),e,t):t}function au(e,t){return e?X(e)&&X(t)?[...new Set([...e,...t])]:Qt(Object.create(null),nu(e),nu(t??{})):t}function Lm(e,t){if(!e)return t;if(!t)return e;const i=Qt(Object.create(null),e);for(const s in t)i[s]=ee(e[s],t[s]);return i}function h_(){return{app:null,config:{isNativeTag:my,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Om=0;function Pm(e,t){return function(s,n=null){q(s)||(s=Qt({},s)),n!=null&&!At(n)&&(n=null);const r=h_(),o=new WeakSet,a=[];let h=!1;const l=r.app={_uid:Om++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:pw,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&q(c.install)?(o.add(c),c.install(l,...d)):q(c)&&(o.add(c),c(l,...d))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,d){return d?(r.components[c]=d,l):r.components[c]},directive(c,d){return d?(r.directives[c]=d,l):r.directives[c]},mount(c,d,f){if(!h){const u=l._ceVNode||mi(s,n);return u.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(u,c,f),h=!0,l._container=c,c.__vue_app__=l,lc(u.component)}},onUnmount(c){a.push(c)},unmount(){h&&(xi(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(c,d){return r.provides[c]=d,l},runWithContext(c){const d=dn;dn=l;try{return c()}finally{dn=d}}};return l}}let dn=null;function Mm(e,t){if(oe){let i=oe.provides;const s=oe.parent&&oe.parent.provides;s===i&&(i=oe.provides=Object.create(s)),i[e]=t}}function To(e,t,i=!1){const s=oe||gi;if(s||dn){const n=dn?dn._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&q(t)?t.call(s&&s.proxy):t}}const l_={},c_=()=>Object.create(l_),u_=e=>Object.getPrototypeOf(e)===l_;function Am(e,t,i,s=!1){const n={},r=c_();e.propsDefaults=Object.create(null),d_(e,t,n,r);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);i?e.props=s?n:qy(n):e.type.props?e.props=n:e.props=r,e.attrs=r}function $m(e,t,i,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=e,a=ft(n),[h]=e.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(ra(e.emitsOptions,f))continue;const u=t[f];if(h)if(pt(r,f))u!==r[f]&&(r[f]=u,l=!0);else{const p=is(f);n[p]=ml(h,a,p,u,e,!1)}else u!==r[f]&&(r[f]=u,l=!0)}}}else{d_(e,t,n,r)&&(l=!0);let c;for(const d in a)(!t||!pt(t,d)&&((c=Ls(d))===d||!pt(t,c)))&&(h?i&&(i[d]!==void 0||i[c]!==void 0)&&(n[d]=ml(h,a,d,void 0,e,!0)):delete n[d]);if(r!==a)for(const d in r)(!t||!pt(t,d))&&(delete r[d],l=!0)}l&&Ai(e.attrs,"set","")}function d_(e,t,i,s){const[n,r]=e.propsOptions;let o=!1,a;if(t)for(let h in t){if(nr(h))continue;const l=t[h];let c;n&&pt(n,c=is(h))?!r||!r.includes(c)?i[c]=l:(a||(a={}))[c]=l:ra(e.emitsOptions,h)||(!(h in s)||l!==s[h])&&(s[h]=l,o=!0)}if(r){const h=ft(i),l=a||vt;for(let c=0;c<r.length;c++){const d=r[c];i[d]=ml(n,h,d,l[d],e,!pt(l,d))}}return o}function ml(e,t,i,s,n,r){const o=e[i];if(o!=null){const a=pt(o,"default");if(a&&s===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&q(h)){const{propsDefaults:l}=n;if(i in l)s=l[i];else{const c=Ar(n);s=l[i]=h.call(null,t),c()}}else s=h;n.ce&&n.ce._setProp(i,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ls(i))&&(s=!0))}return s}const Dm=new WeakMap;function f_(e,t,i=!1){const s=i?Dm:t.propsCache,n=s.get(e);if(n)return n;const r=e.props,o={},a=[];let h=!1;if(!q(e)){const c=d=>{h=!0;const[f,u]=f_(d,t,!0);Qt(o,f),u&&a.push(...u)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!h)return At(e)&&s.set(e,ln),ln;if(X(r))for(let c=0;c<r.length;c++){const d=is(r[c]);hu(d)&&(o[d]=vt)}else if(r)for(const c in r){const d=is(c);if(hu(d)){const f=r[c],u=o[d]=X(f)||q(f)?{type:f}:Qt({},f),p=u.type;let y=!1,v=!0;if(X(p))for(let S=0;S<p.length;++S){const x=p[S],C=q(x)&&x.name;if(C==="Boolean"){y=!0;break}else C==="String"&&(v=!1)}else y=q(p)&&p.name==="Boolean";u[0]=y,u[1]=v,(y||pt(u,"default"))&&a.push(d)}}const l=[o,a];return At(e)&&s.set(e,l),l}function hu(e){return e[0]!=="$"&&!nr(e)}const p_=e=>e[0]==="_"||e==="$stable",ac=e=>X(e)?e.map(pi):[pi(e)],Im=(e,t,i)=>{if(t._n)return t;const s=cm((...n)=>ac(t(...n)),i);return s._c=!1,s},__=(e,t,i)=>{const s=e._ctx;for(const n in e){if(p_(n))continue;const r=e[n];if(q(r))t[n]=Im(n,r,s);else if(r!=null){const o=ac(r);t[n]=()=>o}}},g_=(e,t)=>{const i=ac(t);e.slots.default=()=>i},y_=(e,t,i)=>{for(const s in t)(i||s!=="_")&&(e[s]=t[s])},Wm=(e,t,i)=>{const s=e.slots=c_();if(e.vnode.shapeFlag&32){const n=t._;n?(y_(s,t,i),i&&kp(s,"_",n,!0)):__(t,s)}else t&&g_(e,t)},Fm=(e,t,i)=>{const{vnode:s,slots:n}=e;let r=!0,o=vt;if(s.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:y_(n,t,i):(r=!t.$stable,__(t,n)),o=t}else t&&(g_(e,t),o={default:1});if(r)for(const a in n)!p_(a)&&o[a]==null&&delete n[a]},Be=Qm;function zm(e){return Hm(e)}function Hm(e,t){const i=ia();i.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:h,setText:l,setElementText:c,parentNode:d,nextSibling:f,setScopeId:u=yi,insertStaticContent:p}=e,y=(_,g,b,R=null,T=null,B=null,A=void 0,P=null,O=!!g.dynamicChildren)=>{if(_===g)return;_&&!On(_,g)&&(R=Yr(_),te(_,T,B,!0),_=null),g.patchFlag===-2&&(O=!1,g.dynamicChildren=null);const{type:k,ref:N,shapeFlag:$}=g;switch(k){case oa:v(_,g,b,R);break;case Bs:S(_,g,b,R);break;case Ma:_==null&&x(g,b,R,A);break;case fi:wt(_,g,b,R,T,B,A,P,O);break;default:$&1?M(_,g,b,R,T,B,A,P,O):$&6?ue(_,g,b,R,T,B,A,P,O):($&64||$&128)&&k.process(_,g,b,R,T,B,A,P,O,Rn)}N!=null&&T&&Fo(N,_&&_.ref,B,g||_,!g)},v=(_,g,b,R)=>{if(_==null)s(g.el=a(g.children),b,R);else{const T=g.el=_.el;g.children!==_.children&&l(T,g.children)}},S=(_,g,b,R)=>{_==null?s(g.el=h(g.children||""),b,R):g.el=_.el},x=(_,g,b,R)=>{[_.el,_.anchor]=p(_.children,g,b,R,_.el,_.anchor)},C=({el:_,anchor:g},b,R)=>{let T;for(;_&&_!==g;)T=f(_),s(_,b,R),_=T;s(g,b,R)},w=({el:_,anchor:g})=>{let b;for(;_&&_!==g;)b=f(_),n(_),_=b;n(g)},M=(_,g,b,R,T,B,A,P,O)=>{g.type==="svg"?A="svg":g.type==="math"&&(A="mathml"),_==null?z(g,b,R,T,B,A,P,O):Lt(_,g,T,B,A,P,O)},z=(_,g,b,R,T,B,A,P)=>{let O,k;const{props:N,shapeFlag:$,transition:j,dirs:Y}=_;if(O=_.el=o(_.type,B,N&&N.is,N),$&8?c(O,_.children):$&16&&ut(_.children,O,null,R,T,Oa(_,B),A,P),Y&&hs(_,null,R,"created"),V(O,_,_.scopeId,A,R),N){for(const xt in N)xt!=="value"&&!nr(xt)&&r(O,xt,null,N[xt],B,R);"value"in N&&r(O,"value",null,N.value,B),(k=N.onVnodeBeforeMount)&&ai(k,R,_)}Y&&hs(_,null,R,"beforeMount");const st=jm(T,j);st&&j.beforeEnter(O),s(O,g,b),((k=N&&N.onVnodeMounted)||st||Y)&&Be(()=>{k&&ai(k,R,_),st&&j.enter(O),Y&&hs(_,null,R,"mounted")},T)},V=(_,g,b,R,T)=>{if(b&&u(_,b),R)for(let B=0;B<R.length;B++)u(_,R[B]);if(T){let B=T.subTree;if(g===B||E_(B.type)&&(B.ssContent===g||B.ssFallback===g)){const A=T.vnode;V(_,A,A.scopeId,A.slotScopeIds,T.parent)}}},ut=(_,g,b,R,T,B,A,P,O=0)=>{for(let k=O;k<_.length;k++){const N=_[k]=P?Ji(_[k]):pi(_[k]);y(null,N,g,b,R,T,B,A,P)}},Lt=(_,g,b,R,T,B,A)=>{const P=g.el=_.el;let{patchFlag:O,dynamicChildren:k,dirs:N}=g;O|=_.patchFlag&16;const $=_.props||vt,j=g.props||vt;let Y;if(b&&ls(b,!1),(Y=j.onVnodeBeforeUpdate)&&ai(Y,b,g,_),N&&hs(g,_,b,"beforeUpdate"),b&&ls(b,!0),($.innerHTML&&j.innerHTML==null||$.textContent&&j.textContent==null)&&c(P,""),k?dt(_.dynamicChildren,k,P,b,R,Oa(g,T),B):A||U(_,g,P,null,b,R,Oa(g,T),B,!1),O>0){if(O&16)Q(P,$,j,b,T);else if(O&2&&$.class!==j.class&&r(P,"class",null,j.class,T),O&4&&r(P,"style",$.style,j.style,T),O&8){const st=g.dynamicProps;for(let xt=0;xt<st.length;xt++){const yt=st[xt],Se=$[yt],de=j[yt];(de!==Se||yt==="value")&&r(P,yt,Se,de,T,b)}}O&1&&_.children!==g.children&&c(P,g.children)}else!A&&k==null&&Q(P,$,j,b,T);((Y=j.onVnodeUpdated)||N)&&Be(()=>{Y&&ai(Y,b,g,_),N&&hs(g,_,b,"updated")},R)},dt=(_,g,b,R,T,B,A)=>{for(let P=0;P<g.length;P++){const O=_[P],k=g[P],N=O.el&&(O.type===fi||!On(O,k)||O.shapeFlag&70)?d(O.el):b;y(O,k,N,null,R,T,B,A,!0)}},Q=(_,g,b,R,T)=>{if(g!==b){if(g!==vt)for(const B in g)!nr(B)&&!(B in b)&&r(_,B,g[B],null,T,R);for(const B in b){if(nr(B))continue;const A=b[B],P=g[B];A!==P&&B!=="value"&&r(_,B,P,A,T,R)}"value"in b&&r(_,"value",g.value,b.value,T)}},wt=(_,g,b,R,T,B,A,P,O)=>{const k=g.el=_?_.el:a(""),N=g.anchor=_?_.anchor:a("");let{patchFlag:$,dynamicChildren:j,slotScopeIds:Y}=g;Y&&(P=P?P.concat(Y):Y),_==null?(s(k,b,R),s(N,b,R),ut(g.children||[],b,N,T,B,A,P,O)):$>0&&$&64&&j&&_.dynamicChildren?(dt(_.dynamicChildren,j,b,T,B,A,P),(g.key!=null||T&&g===T.subTree)&&m_(_,g,!0)):U(_,g,b,N,T,B,A,P,O)},ue=(_,g,b,R,T,B,A,P,O)=>{g.slotScopeIds=P,_==null?g.shapeFlag&512?T.ctx.activate(g,b,R,A,O):Ee(g,b,R,T,B,A,O):Pe(_,g,O)},Ee=(_,g,b,R,T,B,A)=>{const P=_.component=aw(_,R,T);if(i_(_)&&(P.ctx.renderer=Rn),hw(P,!1,A),P.asyncDep){if(T&&T.registerDep(P,Ct,A),!_.el){const O=P.subTree=mi(Bs);S(null,O,g,b)}}else Ct(P,_,g,b,T,B,A)},Pe=(_,g,b)=>{const R=g.component=_.component;if(Zm(_,g,b))if(R.asyncDep&&!R.asyncResolved){at(R,g,b);return}else R.next=g,R.update();else g.el=_.el,R.vnode=g},Ct=(_,g,b,R,T,B,A)=>{const P=()=>{if(_.isMounted){let{next:$,bu:j,u:Y,parent:st,vnode:xt}=_;{const ri=w_(_);if(ri){$&&($.el=xt.el,at(_,$,A)),ri.asyncDep.then(()=>{_.isUnmounted||P()});return}}let yt=$,Se;ls(_,!1),$?($.el=xt.el,at(_,$,A)):$=xt,j&&Ta(j),(Se=$.props&&$.props.onVnodeBeforeUpdate)&&ai(Se,st,$,xt),ls(_,!0);const de=cu(_),ni=_.subTree;_.subTree=de,y(ni,de,d(ni.el),Yr(ni),_,T,B),$.el=de.el,yt===null&&Jm(_,de.el),Y&&Be(Y,T),(Se=$.props&&$.props.onVnodeUpdated)&&Be(()=>ai(Se,st,$,xt),T)}else{let $;const{el:j,props:Y}=g,{bm:st,m:xt,parent:yt,root:Se,type:de}=_,ni=hr(g);ls(_,!1),st&&Ta(st),!ni&&($=Y&&Y.onVnodeBeforeMount)&&ai($,yt,g),ls(_,!0);{Se.ce&&Se.ce._injectChildStyle(de);const ri=_.subTree=cu(_);y(null,ri,b,R,_,T,B),g.el=ri.el}if(xt&&Be(xt,T),!ni&&($=Y&&Y.onVnodeMounted)){const ri=g;Be(()=>ai($,yt,ri),T)}(g.shapeFlag&256||yt&&hr(yt.vnode)&&yt.vnode.shapeFlag&256)&&_.a&&Be(_.a,T),_.isMounted=!0,g=b=R=null}};_.scope.on();const O=_.effect=new Mp(P);_.scope.off();const k=_.update=O.run.bind(O),N=_.job=O.runIfDirty.bind(O);N.i=_,N.id=_.uid,O.scheduler=()=>rc(N),ls(_,!0),k()},at=(_,g,b)=>{g.component=_;const R=_.vnode.props;_.vnode=g,_.next=null,$m(_,g.props,R,b),Fm(_,g.children,b),ns(),su(_),rs()},U=(_,g,b,R,T,B,A,P,O=!1)=>{const k=_&&_.children,N=_?_.shapeFlag:0,$=g.children,{patchFlag:j,shapeFlag:Y}=g;if(j>0){if(j&128){vi(k,$,b,R,T,B,A,P,O);return}else if(j&256){Kt(k,$,b,R,T,B,A,P,O);return}}Y&8?(N&16&&Bn(k,T,B),$!==k&&c(b,$)):N&16?Y&16?vi(k,$,b,R,T,B,A,P,O):Bn(k,T,B,!0):(N&8&&c(b,""),Y&16&&ut($,b,R,T,B,A,P,O))},Kt=(_,g,b,R,T,B,A,P,O)=>{_=_||ln,g=g||ln;const k=_.length,N=g.length,$=Math.min(k,N);let j;for(j=0;j<$;j++){const Y=g[j]=O?Ji(g[j]):pi(g[j]);y(_[j],Y,b,null,T,B,A,P,O)}k>N?Bn(_,T,B,!0,!1,$):ut(g,b,R,T,B,A,P,O,$)},vi=(_,g,b,R,T,B,A,P,O)=>{let k=0;const N=g.length;let $=_.length-1,j=N-1;for(;k<=$&&k<=j;){const Y=_[k],st=g[k]=O?Ji(g[k]):pi(g[k]);if(On(Y,st))y(Y,st,b,null,T,B,A,P,O);else break;k++}for(;k<=$&&k<=j;){const Y=_[$],st=g[j]=O?Ji(g[j]):pi(g[j]);if(On(Y,st))y(Y,st,b,null,T,B,A,P,O);else break;$--,j--}if(k>$){if(k<=j){const Y=j+1,st=Y<N?g[Y].el:R;for(;k<=j;)y(null,g[k]=O?Ji(g[k]):pi(g[k]),b,st,T,B,A,P,O),k++}}else if(k>j)for(;k<=$;)te(_[k],T,B,!0),k++;else{const Y=k,st=k,xt=new Map;for(k=st;k<=j;k++){const Te=g[k]=O?Ji(g[k]):pi(g[k]);Te.key!=null&&xt.set(Te.key,k)}let yt,Se=0;const de=j-st+1;let ni=!1,ri=0;const kn=new Array(de);for(k=0;k<de;k++)kn[k]=0;for(k=Y;k<=$;k++){const Te=_[k];if(Se>=de){te(Te,T,B,!0);continue}let oi;if(Te.key!=null)oi=xt.get(Te.key);else for(yt=st;yt<=j;yt++)if(kn[yt-st]===0&&On(Te,g[yt])){oi=yt;break}oi===void 0?te(Te,T,B,!0):(kn[oi-st]=k+1,oi>=ri?ri=oi:ni=!0,y(Te,g[oi],b,null,T,B,A,P,O),Se++)}const Zc=ni?Nm(kn):ln;for(yt=Zc.length-1,k=de-1;k>=0;k--){const Te=st+k,oi=g[Te],Jc=Te+1<N?g[Te+1].el:R;kn[k]===0?y(null,oi,b,Jc,T,B,A,P,O):ni&&(yt<0||k!==Zc[yt]?Yt(oi,b,Jc,2):yt--)}}},Yt=(_,g,b,R,T=null)=>{const{el:B,type:A,transition:P,children:O,shapeFlag:k}=_;if(k&6){Yt(_.component.subTree,g,b,R);return}if(k&128){_.suspense.move(g,b,R);return}if(k&64){A.move(_,g,b,Rn);return}if(A===fi){s(B,g,b);for(let $=0;$<O.length;$++)Yt(O[$],g,b,R);s(_.anchor,g,b);return}if(A===Ma){C(_,g,b);return}if(R!==2&&k&1&&P)if(R===0)P.beforeEnter(B),s(B,g,b),Be(()=>P.enter(B),T);else{const{leave:$,delayLeave:j,afterLeave:Y}=P,st=()=>s(B,g,b),xt=()=>{$(B,()=>{st(),Y&&Y()})};j?j(B,st,xt):xt()}else s(B,g,b)},te=(_,g,b,R=!1,T=!1)=>{const{type:B,props:A,ref:P,children:O,dynamicChildren:k,shapeFlag:N,patchFlag:$,dirs:j,cacheIndex:Y}=_;if($===-2&&(T=!1),P!=null&&Fo(P,null,b,_,!0),Y!=null&&(g.renderCache[Y]=void 0),N&256){g.ctx.deactivate(_);return}const st=N&1&&j,xt=!hr(_);let yt;if(xt&&(yt=A&&A.onVnodeBeforeUnmount)&&ai(yt,g,_),N&6)_y(_.component,b,R);else{if(N&128){_.suspense.unmount(b,R);return}st&&hs(_,null,g,"beforeUnmount"),N&64?_.type.remove(_,g,b,Rn,R):k&&!k.hasOnce&&(B!==fi||$>0&&$&64)?Bn(k,g,b,!1,!0):(B===fi&&$&384||!T&&N&16)&&Bn(O,g,b),R&&Ur(_)}(xt&&(yt=A&&A.onVnodeUnmounted)||st)&&Be(()=>{yt&&ai(yt,g,_),st&&hs(_,null,g,"unmounted")},b)},Ur=_=>{const{type:g,el:b,anchor:R,transition:T}=_;if(g===fi){Gr(b,R);return}if(g===Ma){w(_);return}const B=()=>{n(b),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(_.shapeFlag&1&&T&&!T.persisted){const{leave:A,delayLeave:P}=T,O=()=>A(b,B);P?P(_.el,B,O):O()}else B()},Gr=(_,g)=>{let b;for(;_!==g;)b=f(_),n(_),_=b;n(g)},_y=(_,g,b)=>{const{bum:R,scope:T,job:B,subTree:A,um:P,m:O,a:k}=_;lu(O),lu(k),R&&Ta(R),T.stop(),B&&(B.flags|=8,te(A,_,g,b)),P&&Be(P,g),Be(()=>{_.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Bn=(_,g,b,R=!1,T=!1,B=0)=>{for(let A=B;A<_.length;A++)te(_[A],g,b,R,T)},Yr=_=>{if(_.shapeFlag&6)return Yr(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const g=f(_.anchor||_.el),b=g&&g[um];return b?f(b):g};let Ea=!1;const qc=(_,g,b)=>{_==null?g._vnode&&te(g._vnode,null,null,!0):y(g._vnode||null,_,g,null,null,null,b),g._vnode=_,Ea||(Ea=!0,su(),Zp(),Ea=!1)},Rn={p:y,um:te,m:Yt,r:Ur,mt:Ee,mc:ut,pc:U,pbc:dt,n:Yr,o:e};return{render:qc,hydrate:void 0,createApp:Pm(qc)}}function Oa({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function ls({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function jm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function m_(e,t,i=!1){const s=e.children,n=t.children;if(X(s)&&X(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Ji(n[r]),a.el=o.el),!i&&a.patchFlag!==-2&&m_(o,a)),a.type===oa&&(a.el=o.el)}}function Nm(e){const t=e.slice(),i=[0];let s,n,r,o,a;const h=e.length;for(s=0;s<h;s++){const l=e[s];if(l!==0){if(n=i[i.length-1],e[n]<l){t[s]=n,i.push(s);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<l?r=a+1:o=a;l<e[i[r]]&&(r>0&&(t[s]=i[r-1]),i[r]=s)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function w_(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:w_(t)}function lu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Vm=Symbol.for("v-scx"),Um=()=>To(Vm);function Pa(e,t,i){return x_(e,t,i)}function x_(e,t,i=vt){const{immediate:s,deep:n,flush:r,once:o}=i,a=Qt({},i),h=t&&s||!t&&r!=="post";let l;if(br){if(r==="sync"){const u=Um();l=u.__watcherHandles||(u.__watcherHandles=[])}else if(!h){const u=()=>{};return u.stop=yi,u.resume=yi,u.pause=yi,u}}const c=oe;a.call=(u,p,y)=>xi(u,c,p,y);let d=!1;r==="post"?a.scheduler=u=>{Be(u,c&&c.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(u,p)=>{p?u():rc(u)}),a.augmentJob=u=>{t&&(u.flags|=4),d&&(u.flags|=2,c&&(u.id=c.uid,u.i=c))};const f=rm(e,t,a);return br&&(l?l.push(f):h&&f()),f}function Gm(e,t,i){const s=this.proxy,n=Nt(e)?e.includes(".")?b_(s,e):()=>s[e]:e.bind(s,s);let r;q(t)?r=t:(r=t.handler,i=t);const o=Ar(this),a=x_(n,r.bind(s),i);return o(),a}function b_(e,t){const i=t.split(".");return()=>{let s=e;for(let n=0;n<i.length&&s;n++)s=s[i[n]];return s}}const Ym=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${is(t)}Modifiers`]||e[`${Ls(t)}Modifiers`];function Xm(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||vt;let n=i;const r=t.startsWith("update:"),o=r&&Ym(s,t.slice(7));o&&(o.trim&&(n=i.map(c=>Nt(c)?c.trim():c)),o.number&&(n=i.map(Ey)));let a,h=s[a=Sa(t)]||s[a=Sa(is(t))];!h&&r&&(h=s[a=Sa(Ls(t))]),h&&xi(h,e,6,n);const l=s[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,xi(l,e,6,n)}}function v_(e,t,i=!1){const s=t.emitsCache,n=s.get(e);if(n!==void 0)return n;const r=e.emits;let o={},a=!1;if(!q(e)){const h=l=>{const c=v_(l,t,!0);c&&(a=!0,Qt(o,c))};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!r&&!a?(At(e)&&s.set(e,null),null):(X(r)?r.forEach(h=>o[h]=null):Qt(o,r),At(e)&&s.set(e,o),o)}function ra(e,t){return!e||!Qo(t)?!1:(t=t.slice(2).replace(/Once$/,""),pt(e,t[0].toLowerCase()+t.slice(1))||pt(e,Ls(t))||pt(e,t))}function cu(e){const{type:t,vnode:i,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:h,render:l,renderCache:c,props:d,data:f,setupState:u,ctx:p,inheritAttrs:y}=e,v=Wo(e);let S,x;try{if(i.shapeFlag&4){const w=n||s,M=w;S=pi(l.call(M,w,c,d,u,f,p)),x=a}else{const w=t;S=pi(w.length>1?w(d,{attrs:a,slots:o,emit:h}):w(d,null)),x=t.props?a:Km(a)}}catch(w){cr.length=0,sa(w,e,1),S=mi(Bs)}let C=S;if(x&&y!==!1){const w=Object.keys(x),{shapeFlag:M}=C;w.length&&M&7&&(r&&w.some(Ul)&&(x=qm(x,r)),C=yn(C,x,!1,!0))}return i.dirs&&(C=yn(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(i.dirs):i.dirs),i.transition&&oc(C,i.transition),S=C,Wo(v),S}const Km=e=>{let t;for(const i in e)(i==="class"||i==="style"||Qo(i))&&((t||(t={}))[i]=e[i]);return t},qm=(e,t)=>{const i={};for(const s in e)(!Ul(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Zm(e,t,i){const{props:s,children:n,component:r}=e,{props:o,children:a,patchFlag:h}=t,l=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&h>=0){if(h&1024)return!0;if(h&16)return s?uu(s,o,l):!!o;if(h&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==s[f]&&!ra(l,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?uu(s,o,l):!0:!!o;return!1}function uu(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==e[r]&&!ra(i,r))return!0}return!1}function Jm({vnode:e,parent:t},i){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=i,t=t.parent;else break}}const E_=e=>e.__isSuspense;function Qm(e,t){t&&t.pendingBranch?X(e)?t.effects.push(...e):t.effects.push(e):lm(e)}const fi=Symbol.for("v-fgt"),oa=Symbol.for("v-txt"),Bs=Symbol.for("v-cmt"),Ma=Symbol.for("v-stc"),cr=[];let ke=null;function Zi(e=!1){cr.push(ke=e?null:[])}function tw(){cr.pop(),ke=cr[cr.length-1]||null}let xr=1;function du(e,t=!1){xr+=e,e<0&&ke&&t&&(ke.hasOnce=!0)}function S_(e){return e.dynamicChildren=xr>0?ke||ln:null,tw(),xr>0&&ke&&ke.push(e),e}function ws(e,t,i,s,n,r){return S_(It(e,t,i,s,n,r,!0))}function ew(e,t,i,s,n){return S_(mi(e,t,i,s,n,!0))}function T_(e){return e?e.__v_isVNode===!0:!1}function On(e,t){return e.type===t.type&&e.key===t.key}const C_=({key:e})=>e??null,Co=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Nt(e)||Jt(e)||q(e)?{i:gi,r:e,k:t,f:!!i}:e:null);function It(e,t=null,i=null,s=0,n=null,r=e===fi?0:1,o=!1,a=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&C_(t),ref:t&&Co(t),scopeId:Qp,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:gi};return a?(hc(h,i),r&128&&e.normalize(h)):i&&(h.shapeFlag|=Nt(i)?8:16),xr>0&&!o&&ke&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&ke.push(h),h}const mi=iw;function iw(e,t=null,i=null,s=0,n=null,r=!1){if((!e||e===Sm)&&(e=Bs),T_(e)){const a=yn(e,t,!0);return i&&hc(a,i),xr>0&&!r&&ke&&(a.shapeFlag&6?ke[ke.indexOf(e)]=a:ke.push(a)),a.patchFlag=-2,a}if(dw(e)&&(e=e.__vccOpts),t){t=sw(t);let{class:a,style:h}=t;a&&!Nt(a)&&(t.class=Kl(a)),At(h)&&(nc(h)&&!X(h)&&(h=Qt({},h)),t.style=Xl(h))}const o=Nt(e)?1:E_(e)?128:dm(e)?64:At(e)?4:q(e)?2:0;return It(e,t,i,s,n,o,r,!0)}function sw(e){return e?nc(e)||u_(e)?Qt({},e):e:null}function yn(e,t,i=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:h}=e,l=t?nw(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&C_(l),ref:t&&t.ref?i&&r?X(r)?r.concat(Co(t)):[r,Co(t)]:Co(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fi?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&yn(e.ssContent),ssFallback:e.ssFallback&&yn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&s&&oc(c,h.clone(c)),c}function wl(e=" ",t=0){return mi(oa,null,e,t)}function fu(e="",t=!1){return t?(Zi(),ew(Bs,null,e)):mi(Bs,null,e)}function pi(e){return e==null||typeof e=="boolean"?mi(Bs):X(e)?mi(fi,null,e.slice()):T_(e)?Ji(e):mi(oa,null,String(e))}function Ji(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:yn(e)}function hc(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(X(t))i=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),hc(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!u_(t)?t._ctx=gi:n===3&&gi&&(gi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else q(t)?(t={default:t,_ctx:gi},i=32):(t=String(t),s&64?(i=16,t=[wl(t)]):i=8);e.children=t,e.shapeFlag|=i}function nw(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Kl([t.class,s.class]));else if(n==="style")t.style=Xl([t.style,s.style]);else if(Qo(n)){const r=t[n],o=s[n];o&&r!==o&&!(X(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function ai(e,t,i,s=null){xi(e,t,7,[i,s])}const rw=h_();let ow=0;function aw(e,t,i){const s=e.type,n=(t?t.appContext:e.appContext)||rw,r={uid:ow++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ly(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:f_(s,n),emitsOptions:v_(s,n),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:s.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Xm.bind(null,r),e.ce&&e.ce(r),r}let oe=null,Ho,xl;{const e=ia(),t=(i,s)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Ho=t("__VUE_INSTANCE_SETTERS__",i=>oe=i),xl=t("__VUE_SSR_SETTERS__",i=>br=i)}const Ar=e=>{const t=oe;return Ho(e),e.scope.on(),()=>{e.scope.off(),Ho(t)}},pu=()=>{oe&&oe.scope.off(),Ho(null)};function B_(e){return e.vnode.shapeFlag&4}let br=!1;function hw(e,t=!1,i=!1){t&&xl(t);const{props:s,children:n}=e.vnode,r=B_(e);Am(e,s,r,t),Wm(e,n,i);const o=r?lw(e,t):void 0;return t&&xl(!1),o}function lw(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Tm);const{setup:s}=i;if(s){ns();const n=e.setupContext=s.length>1?uw(e):null,r=Ar(e),o=Mr(s,e,0,[e.props,n]),a=Tp(o);if(rs(),r(),(a||e.sp)&&!hr(e)&&e_(e),a){if(o.then(pu,pu),t)return o.then(h=>{_u(e,h)}).catch(h=>{sa(h,e,0)});e.asyncDep=o}else _u(e,o)}else R_(e)}function _u(e,t,i){q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:At(t)&&(e.setupState=Xp(t)),R_(e)}function R_(e,t,i){const s=e.type;e.render||(e.render=s.render||yi);{const n=Ar(e);ns();try{Cm(e)}finally{rs(),n()}}}const cw={get(e,t){return Zt(e,"get",""),e[t]}};function uw(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,cw),slots:e.slots,emit:e.emit,expose:t}}function lc(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xp(Zy(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in lr)return lr[i](e)},has(t,i){return i in t||i in lr}})):e.proxy}function dw(e){return q(e)&&"__vccOpts"in e}const fw=(e,t)=>sm(e,t,br),pw="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bl;const gu=typeof window<"u"&&window.trustedTypes;if(gu)try{bl=gu.createPolicy("vue",{createHTML:e=>e})}catch{}const k_=bl?e=>bl.createHTML(e):e=>e,_w="http://www.w3.org/2000/svg",gw="http://www.w3.org/1998/Math/MathML",Mi=typeof document<"u"?document:null,yu=Mi&&Mi.createElement("template"),yw={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const n=t==="svg"?Mi.createElementNS(_w,e):t==="mathml"?Mi.createElementNS(gw,e):i?Mi.createElement(e,{is:i}):Mi.createElement(e);return e==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:e=>Mi.createTextNode(e),createComment:e=>Mi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Mi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,s,n,r){const o=i?i.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===r||!(n=n.nextSibling)););else{yu.innerHTML=k_(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=yu.content;if(s==="svg"||s==="mathml"){const h=a.firstChild;for(;h.firstChild;)a.appendChild(h.firstChild);a.removeChild(h)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},mw=Symbol("_vtc");function ww(e,t,i){const s=e[mw];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const mu=Symbol("_vod"),xw=Symbol("_vsh"),bw=Symbol(""),vw=/(^|;)\s*display\s*:/;function Ew(e,t,i){const s=e.style,n=Nt(i);let r=!1;if(i&&!n){if(t)if(Nt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Bo(s,a,"")}else for(const o in t)i[o]==null&&Bo(s,o,"");for(const o in i)o==="display"&&(r=!0),Bo(s,o,i[o])}else if(n){if(t!==i){const o=s[bw];o&&(i+=";"+o),s.cssText=i,r=vw.test(i)}}else t&&e.removeAttribute("style");mu in e&&(e[mu]=r?s.display:"",e[xw]&&(s.display="none"))}const wu=/\s*!important$/;function Bo(e,t,i){if(X(i))i.forEach(s=>Bo(e,t,s));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=Sw(e,t);wu.test(i)?e.setProperty(Ls(s),i.replace(wu,""),"important"):e[s]=i}}const xu=["Webkit","Moz","ms"],Aa={};function Sw(e,t){const i=Aa[t];if(i)return i;let s=is(t);if(s!=="filter"&&s in e)return Aa[t]=s;s=Rp(s);for(let n=0;n<xu.length;n++){const r=xu[n]+s;if(r in e)return Aa[t]=r}return t}const bu="http://www.w3.org/1999/xlink";function vu(e,t,i,s,n,r=ky(t)){s&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(bu,t.slice(6,t.length)):e.setAttributeNS(bu,t,i):i==null||r&&!Lp(i)?e.removeAttribute(t):e.setAttribute(t,r?"":ss(i)?String(i):i)}function Eu(e,t,i,s,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?k_(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,h=i==null?e.type==="checkbox"?"on":"":String(i);(a!==h||!("_value"in e))&&(e.value=h),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=Lp(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(n||t)}function Tw(e,t,i,s){e.addEventListener(t,i,s)}function Cw(e,t,i,s){e.removeEventListener(t,i,s)}const Su=Symbol("_vei");function Bw(e,t,i,s,n=null){const r=e[Su]||(e[Su]={}),o=r[t];if(s&&o)o.value=s;else{const[a,h]=Rw(t);if(s){const l=r[t]=Ow(s,n);Tw(e,a,l,h)}else o&&(Cw(e,a,o,h),r[t]=void 0)}}const Tu=/(?:Once|Passive|Capture)$/;function Rw(e){let t;if(Tu.test(e)){t={};let s;for(;s=e.match(Tu);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ls(e.slice(2)),t]}let $a=0;const kw=Promise.resolve(),Lw=()=>$a||(kw.then(()=>$a=0),$a=Date.now());function Ow(e,t){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;xi(Pw(s,i.value),t,5,[s])};return i.value=e,i.attached=Lw(),i}function Pw(e,t){if(X(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Cu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Mw=(e,t,i,s,n,r)=>{const o=n==="svg";t==="class"?ww(e,s,o):t==="style"?Ew(e,i,s):Qo(t)?Ul(t)||Bw(e,t,i,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Aw(e,t,s,o))?(Eu(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&vu(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Nt(s))?Eu(e,is(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),vu(e,t,s,o))};function Aw(e,t,i,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Cu(t)&&q(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Cu(t)&&Nt(i)?!1:t in e}const $w=Qt({patchProp:Mw},yw);let Bu;function Dw(){return Bu||(Bu=zm($w))}const Iw=(...e)=>{const t=Dw().createApp(...e),{mount:i}=t;return t.mount=s=>{const n=Fw(s);if(!n)return;const r=t._component;!q(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,Ww(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function Ww(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Fw(e){return Nt(e)?document.querySelector(e):e}const E={toURL(e,t){let i=encodeURIComponent(e);return t==="text"?i="data:text/plain;charset=utf-8,"+i:t==="svg"&&(i="data:image/svg+xml,"+i),i},image:{hitCanvasSize:100,maxCacheSize:2560*1600,maxPatternSize:4096*2160,crossOrigin:"anonymous",getRealURL(e){const{prefix:t,suffix:i}=E.image;return i&&!e.startsWith("data:")&&!e.startsWith("blob:")&&(e+=(e.includes("?")?"&":"?")+i),t&&e[0]==="/"&&(e=t+e),e}}},rt={},Ii={RUNTIME:"runtime",LEAF:"leaf",TASK:"task",CNAVAS:"canvas",IMAGE:"image",types:{},create(e){const{types:t}=zw;return t[e]?t[e]++:(t[e]=1,0)}},zw=Ii,{round:Hw,pow:jw,PI:cc}=Math,$t={within(e,t,i){return typeof t=="object"&&(i=t.max,t=t.min),t!==void 0&&e<t&&(e=t),i!==void 0&&e>i&&(e=i),e},fourNumber(e,t){let i;if(e instanceof Array)switch(e.length){case 4:i=t===void 0?e:[...e];break;case 2:i=[e[0],e[1],e[0],e[1]];break;case 3:i=[e[0],e[1],e[2],e[1]];break;case 1:e=e[0];break;default:e=0}if(i||(i=[e,e,e,e]),t)for(let s=0;s<4;s++)i[s]>t&&(i[s]=t);return i},formatRotation(e,t){return e%=360,t?e<0&&(e+=360):(e>180&&(e-=360),e<-180&&(e+=360)),$t.float(e)},getGapRotation(e,t,i=0){let s=e+i;if(t>1){const n=Math.abs(s%t);(n<1||n>t-1)&&(s=Math.round(s/t)*t)}return s-i},float(e,t){const i=t!==void 0?jw(10,t):1e12;return e=Hw(e*i)/i,e===-0?0:e},getScaleData(e,t,i,s){return s||(s={}),t?(s.scaleX=(typeof t=="number"?t:t.width)/i.width,s.scaleY=(typeof t=="number"?t:t.height)/i.height):e&&$t.assignScale(s,e),s},assignScale(e,t){typeof t=="number"?e.scaleX=e.scaleY=t:(e.scaleX=t.x,e.scaleY=t.y)}},mt=cc/180,We=cc*2,en=cc/2;function uc(){return{x:0,y:0}}function dc(){return{x:0,y:0,width:0,height:0}}function vr(){return{a:1,b:0,c:0,d:1,e:0,f:0}}const{sin:Da,cos:Ia,acos:Zr,sqrt:Wa}=Math,{float:Is}=$t,Ws={};function Ru(){return Object.assign(Object.assign(Object.assign({},vr()),dc()),{scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0})}const G={defaultMatrix:vr(),defaultWorld:Ru(),tempMatrix:{},set(e,t=1,i=0,s=0,n=1,r=0,o=0){e.a=t,e.b=i,e.c=s,e.d=n,e.e=r,e.f=o},get:vr,getWorld:Ru,copy(e,t){e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.e=t.e,e.f=t.f},translate(e,t,i){e.e+=t,e.f+=i},translateInner(e,t,i,s){e.e+=e.a*t+e.c*i,e.f+=e.b*t+e.d*i,s&&(e.e-=t,e.f-=i)},scale(e,t,i=t){e.a*=t,e.b*=t,e.c*=i,e.d*=i},scaleOfOuter(e,t,i,s){Bt.toInnerPoint(e,t,Ws),Bt.scaleOfInner(e,Ws,i,s)},scaleOfInner(e,t,i,s=i){Bt.translateInner(e,t.x,t.y),Bt.scale(e,i,s),Bt.translateInner(e,-t.x,-t.y)},rotate(e,t){const{a:i,b:s,c:n,d:r}=e;t*=mt;const o=Ia(t),a=Da(t);e.a=i*o-s*a,e.b=i*a+s*o,e.c=n*o-r*a,e.d=n*a+r*o},rotateOfOuter(e,t,i){Bt.toInnerPoint(e,t,Ws),Bt.rotateOfInner(e,Ws,i)},rotateOfInner(e,t,i){Bt.translateInner(e,t.x,t.y),Bt.rotate(e,i),Bt.translateInner(e,-t.x,-t.y)},skew(e,t,i){const{a:s,b:n,c:r,d:o}=e;i&&(i*=mt,e.a=s+r*i,e.b=n+o*i),t&&(t*=mt,e.c=r+s*t,e.d=o+n*t)},skewOfOuter(e,t,i,s){Bt.toInnerPoint(e,t,Ws),Bt.skewOfInner(e,Ws,i,s)},skewOfInner(e,t,i,s=0){Bt.translateInner(e,t.x,t.y),Bt.skew(e,i,s),Bt.translateInner(e,-t.x,-t.y)},multiply(e,t){const{a:i,b:s,c:n,d:r,e:o,f:a}=e;e.a=t.a*i+t.b*n,e.b=t.a*s+t.b*r,e.c=t.c*i+t.d*n,e.d=t.c*s+t.d*r,e.e=t.e*i+t.f*n+o,e.f=t.e*s+t.f*r+a},multiplyParent(e,t,i,s,n,r){let{e:o,f:a}=e;if(r&&(o+=r.scrollX,a+=r.scrollY),i||(i=e),s===void 0&&(s=e.a!==1||e.b||e.c||e.d!==1),s){const{a:h,b:l,c,d}=e;i.a=h*t.a+l*t.c,i.b=h*t.b+l*t.d,i.c=c*t.a+d*t.c,i.d=c*t.b+d*t.d,n&&(i.scaleX=t.scaleX*n.scaleX,i.scaleY=t.scaleY*n.scaleY)}else i.a=t.a,i.b=t.b,i.c=t.c,i.d=t.d,n&&(i.scaleX=t.scaleX,i.scaleY=t.scaleY);i.e=o*t.a+a*t.c+t.e,i.f=o*t.b+a*t.d+t.f},divide(e,t){Bt.multiply(e,Bt.tempInvert(t))},divideParent(e,t){Bt.multiplyParent(e,Bt.tempInvert(t))},tempInvert(e){const{tempMatrix:t}=Bt;return Bt.copy(t,e),Bt.invert(t),t},invert(e){const{a:t,b:i,c:s,d:n,e:r,f:o}=e;if(!i&&!s)if(t===1&&n===1)e.e=-r,e.f=-o;else{const a=1/(t*n);e.a=n*a,e.d=t*a,e.e=-r*n*a,e.f=-o*t*a}else{const a=1/(t*n-i*s);e.a=n*a,e.b=-i*a,e.c=-s*a,e.d=t*a,e.e=-(r*n-o*s)*a,e.f=-(o*t-r*i)*a}},toOuterPoint(e,t,i,s){const{x:n,y:r}=t;i||(i=t),i.x=n*e.a+r*e.c,i.y=n*e.b+r*e.d,s||(i.x+=e.e,i.y+=e.f)},toInnerPoint(e,t,i,s){const{a:n,b:r,c:o,d:a}=e,h=1/(n*a-r*o),{x:l,y:c}=t;if(i||(i=t),i.x=(l*a-c*o)*h,i.y=(c*n-l*r)*h,!s){const{e:d,f}=e;i.x-=(d*a-f*o)*h,i.y-=(f*n-d*r)*h}},setLayout(e,t,i,s,n){const{x:r,y:o,scaleX:a,scaleY:h}=t;if(n===void 0&&(n=t.rotation||t.skewX||t.skewY),n){const{rotation:l,skewX:c,skewY:d}=t,f=l*mt,u=Ia(f),p=Da(f);if(c||d){const y=c*mt,v=d*mt;e.a=(u+v*-p)*a,e.b=(p+v*u)*a,e.c=(-p+y*u)*h,e.d=(u+y*p)*h}else e.a=u*a,e.b=p*a,e.c=-p*h,e.d=u*h}else e.a=a,e.b=0,e.c=0,e.d=h;e.e=r,e.f=o,(i=i||s)&&Bt.translateInner(e,-i.x,-i.y,!s)},getLayout(e,t,i,s){const{a:n,b:r,c:o,d:a,e:h,f:l}=e;let c=h,d=l,f,u,p,y,v;if(r||o){const S=n*a-r*o;if(o&&!s){f=Wa(n*n+r*r),u=S/f;const w=n/f;p=r>0?Zr(w):-Zr(w)}else{u=Wa(o*o+a*a),f=S/u;const w=o/u;p=en-(a>0?Zr(-w):-Zr(w))}const x=Is(Ia(p)),C=Da(p);f=Is(f),u=Is(u),y=x?Is((o/u+C)/x/mt,9):0,v=x?Is((r/f-C)/x/mt,9):0,p=Is(p/mt)}else f=n,u=a,p=y=v=0;return(t=i||t)&&(c+=t.x*n+t.y*o,d+=t.x*r+t.y*a,i||(c-=t.x,d-=t.y)),{x:c,y:d,scaleX:f,scaleY:u,rotation:p,skewX:y,skewY:v}},withScale(e,t,i=t){const s=e;if(!t||!i){const{a:n,b:r,c:o,d:a}=e;r||o?(t=Wa(n*n+r*r),i=(n*a-r*o)/t):(t=n,i=a)}return s.scaleX=t,s.scaleY=i,s},reset(e){Bt.set(e)}},Bt=G,{toInnerPoint:Fa,toOuterPoint:ku}=G,{sin:Lu,cos:Ou,abs:Pu,sqrt:Nw,atan2:za,min:Vw,PI:Uw}=Math,H={defaultPoint:uc(),tempPoint:{},tempRadiusPoint:{},set(e,t=0,i=0){e.x=t,e.y=i},setRadius(e,t,i){e.radiusX=t,e.radiusY=i===void 0?t:i},copy(e,t){e.x=t.x,e.y=t.y},copyFrom(e,t,i){e.x=t,e.y=i},move(e,t,i){e.x+=t,e.y+=i},scale(e,t,i=t){e.x&&(e.x*=t),e.y&&(e.y*=i)},scaleOf(e,t,i,s=i){e.x+=(e.x-t.x)*(i-1),e.y+=(e.y-t.y)*(s-1)},rotate(e,t,i){i||(i=xs.defaultPoint),t*=mt;const s=Ou(t),n=Lu(t),r=e.x-i.x,o=e.y-i.y;e.x=i.x+r*s-o*n,e.y=i.y+r*n+o*s},tempToInnerOf(e,t){const{tempPoint:i}=xs;return ja(i,e),Fa(t,i,i),i},tempToOuterOf(e,t){const{tempPoint:i}=xs;return ja(i,e),ku(t,i,i),i},tempToInnerRadiusPointOf(e,t){const{tempRadiusPoint:i}=xs;return ja(i,e),xs.toInnerRadiusPointOf(e,t,i),i},toInnerRadiusPointOf(e,t,i){i||(i=e),Fa(t,e,i),i.radiusX=Math.abs(e.radiusX/t.scaleX),i.radiusY=Math.abs(e.radiusY/t.scaleY)},toInnerOf(e,t,i){Fa(t,e,i)},toOuterOf(e,t,i){ku(t,e,i)},getCenter(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}},getCenterX(e,t){return e+(t-e)/2},getCenterY(e,t){return e+(t-e)/2},getDistance(e,t){return Ha(e.x,e.y,t.x,t.y)},getDistanceFrom(e,t,i,s){const n=Pu(i-e),r=Pu(s-t);return Nw(n*n+r*r)},getMinDistanceFrom(e,t,i,s,n,r){return Vw(Ha(e,t,i,s),Ha(i,s,n,r))},getAngle(e,t){return Mu(e,t)/mt},getRotation(e,t,i,s){return s||(s=t),xs.getRadianFrom(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)/mt},getRadianFrom(e,t,i,s,n,r,o,a){o===void 0&&(o=i,a=s);let h=za(t-s,e-i);const c=za(r-a,n-o)-h;return c<-Uw?c+We:c},getAtan2(e,t){return za(t.y-e.y,t.x-e.x)},getDistancePoint(e,t,i,s){const n=Mu(e,t);return t=s?t:{},t.x=e.x+Ou(n)*i,t.y=e.y+Lu(n)*i,t},toNumberPoints(e){let t=e;return typeof e[0]=="object"&&(t=[],e.forEach(i=>t.push(i.x,i.y))),t},reset(e){}},xs=H,{getDistanceFrom:Ha,copy:ja,getAtan2:Mu}=xs;class ur{constructor(t,i){this.set(t,i)}set(t,i){return typeof t=="object"?H.copy(this,t):H.set(this,t,i),this}get(){const{x:t,y:i}=this;return{x:t,y:i}}clone(){return new ur(this)}move(t,i){return H.move(this,t,i),this}scale(t,i){return H.scale(this,t,i),this}scaleOf(t,i,s){return H.scaleOf(this,t,i,s),this}rotate(t,i){return H.rotate(this,t,i),this}rotateOf(t,i){return H.rotate(this,i,t),this}getRotation(t,i,s){return H.getRotation(this,t,i,s)}toInnerOf(t,i){return H.toInnerOf(this,t,i),this}toOuterOf(t,i){return H.toOuterOf(this,t,i),this}getCenter(t){return new ur(H.getCenter(this,t))}getDistance(t){return H.getDistance(this,t)}getDistancePoint(t,i,s){return new ur(H.getDistancePoint(this,t,i,s))}getAngle(t){return H.getAngle(this,t)}getAtan2(t){return H.getAtan2(this,t)}reset(){return this}}new ur;class ae{constructor(t,i,s,n,r,o){this.set(t,i,s,n,r,o)}set(t,i,s,n,r,o){return typeof t=="object"?G.copy(this,t):G.set(this,t,i,s,n,r,o),this}setWith(t){return G.copy(this,t),this.scaleX=t.scaleX,this.scaleY=t.scaleY,this}get(){const{a:t,b:i,c:s,d:n,e:r,f:o}=this;return{a:t,b:i,c:s,d:n,e:r,f:o}}clone(){return new ae(this)}translate(t,i){return G.translate(this,t,i),this}translateInner(t,i){return G.translateInner(this,t,i),this}scale(t,i){return G.scale(this,t,i),this}scaleWith(t,i){return G.scale(this,t,i),this.scaleX*=t,this.scaleY*=i||t,this}scaleOfOuter(t,i,s){return G.scaleOfOuter(this,t,i,s),this}scaleOfInner(t,i,s){return G.scaleOfInner(this,t,i,s),this}rotate(t){return G.rotate(this,t),this}rotateOfOuter(t,i){return G.rotateOfOuter(this,t,i),this}rotateOfInner(t,i){return G.rotateOfInner(this,t,i),this}skew(t,i){return G.skew(this,t,i),this}skewOfOuter(t,i,s){return G.skewOfOuter(this,t,i,s),this}skewOfInner(t,i,s){return G.skewOfInner(this,t,i,s),this}multiply(t){return G.multiply(this,t),this}multiplyParent(t){return G.multiplyParent(this,t),this}divide(t){return G.divide(this,t),this}divideParent(t){return G.divideParent(this,t),this}invert(){return G.invert(this),this}invertWith(){return G.invert(this),this.scaleX=1/this.scaleX,this.scaleY=1/this.scaleY,this}toOuterPoint(t,i,s){G.toOuterPoint(this,t,i,s)}toInnerPoint(t,i,s){G.toInnerPoint(this,t,i,s)}setLayout(t,i,s){return G.setLayout(this,t,i,s),this}getLayout(t,i,s){return G.getLayout(this,t,i,s)}withScale(t,i){return G.withScale(this,t,i)}reset(){G.reset(this)}}new ae;const $r={tempPointBounds:{},setPoint(e,t,i){e.minX=e.maxX=t,e.minY=e.maxY=i},addPoint(e,t,i){e.minX=t<e.minX?t:e.minX,e.minY=i<e.minY?i:e.minY,e.maxX=t>e.maxX?t:e.maxX,e.maxY=i>e.maxY?i:e.maxY},addBounds(e,t,i,s,n){Au(e,t,i),Au(e,t+s,i+n)},copy(e,t){e.minX=t.minX,e.minY=t.minY,e.maxX=t.maxX,e.maxY=t.maxY},addPointBounds(e,t){e.minX=t.minX<e.minX?t.minX:e.minX,e.minY=t.minY<e.minY?t.minY:e.minY,e.maxX=t.maxX>e.maxX?t.maxX:e.maxX,e.maxY=t.maxY>e.maxY?t.maxY:e.maxY},toBounds(e,t){t.x=e.minX,t.y=e.minY,t.width=e.maxX-e.minX,t.height=e.maxY-e.minY}},{addPoint:Au}=$r,{tempPointBounds:Ui,setPoint:$u,addPoint:Jr,toBounds:Du}=$r,{toOuterPoint:Qr}=G,{float:to,fourNumber:Gw}=$t,{floor:Iu,ceil:eo}=Math;let hi,li,cs,us;const Si={},Me={},D={tempBounds:{},set(e,t=0,i=0,s=0,n=0){e.x=t,e.y=i,e.width=s,e.height=n},copy(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},copyAndSpread(e,t,i,s,n){const{x:r,y:o,width:a,height:h}=t;if(i instanceof Array){const l=Gw(i);s?ht.set(e,r+l[3],o+l[0],a-l[1]-l[3],h-l[2]-l[0]):ht.set(e,r-l[3],o-l[0],a+l[1]+l[3],h+l[2]+l[0])}else s&&(i=-i),ht.set(e,r-i,o-i,a+i*2,h+i*2);n&&(n==="width"?(e.y=o,e.height=h):(e.x=r,e.width=a))},minX(e){return e.width>0?e.x:e.x+e.width},minY(e){return e.height>0?e.y:e.y+e.height},maxX(e){return e.width>0?e.x+e.width:e.x},maxY(e){return e.height>0?e.y+e.height:e.y},move(e,t,i){e.x+=t,e.y+=i},getByMove(e,t,i){return e=Object.assign({},e),ht.move(e,t,i),e},toOffsetOutBounds(e,t,i){t?Fu(t,e):t=e,i?(t.offsetX=-(ht.maxX(i)-e.x),t.offsetY=-(ht.maxY(i)-e.y)):(t.offsetX=e.x+e.width,t.offsetY=e.y+e.height),ht.move(t,-t.offsetX,-t.offsetY)},scale(e,t,i=t){H.scale(e,t,i),e.width*=t,e.height*=i},scaleOf(e,t,i,s=i){H.scaleOf(e,t,i,s),e.width*=i,e.height*=s},tempToOuterOf(e,t){return ht.copy(ht.tempBounds,e),ht.toOuterOf(ht.tempBounds,t),ht.tempBounds},getOuterOf(e,t){return e=Object.assign({},e),ht.toOuterOf(e,t),e},toOuterOf(e,t,i){if(i||(i=e),t.b===0&&t.c===0){const{a:s,d:n}=t;s>0?(i.width=e.width*s,i.x=t.e+e.x*s):(i.width=e.width*-s,i.x=t.e+e.x*s-i.width),n>0?(i.height=e.height*n,i.y=t.f+e.y*n):(i.height=e.height*-n,i.y=t.f+e.y*n-i.height)}else Si.x=e.x,Si.y=e.y,Qr(t,Si,Me),$u(Ui,Me.x,Me.y),Si.x=e.x+e.width,Qr(t,Si,Me),Jr(Ui,Me.x,Me.y),Si.y=e.y+e.height,Qr(t,Si,Me),Jr(Ui,Me.x,Me.y),Si.x=e.x,Qr(t,Si,Me),Jr(Ui,Me.x,Me.y),Du(Ui,i)},toInnerOf(e,t,i){i||(i=e),ht.move(i,-t.e,-t.f),ht.scale(i,1/t.a,1/t.d)},getFitMatrix(e,t,i=1){const s=Math.min(i,Math.min(e.width/t.width,e.height/t.height));return new ae(s,0,0,s,-t.x*s,-t.y*s)},getSpread(e,t,i){const s={};return ht.copyAndSpread(s,e,t,!1,i),s},spread(e,t,i){ht.copyAndSpread(e,e,t,!1,i)},shrink(e,t,i){ht.copyAndSpread(e,e,t,!0,i)},ceil(e){const{x:t,y:i}=e;e.x=Iu(e.x),e.y=Iu(e.y),e.width=t>e.x?eo(e.width+t-e.x):eo(e.width),e.height=i>e.y?eo(e.height+i-e.y):eo(e.height)},unsign(e){e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height)},float(e,t){e.x=to(e.x,t),e.y=to(e.y,t),e.width=to(e.width,t),e.height=to(e.height,t)},add(e,t,i){hi=e.x+e.width,li=e.y+e.height,cs=t.x,us=t.y,i||(cs+=t.width,us+=t.height),hi=hi>cs?hi:cs,li=li>us?li:us,e.x=e.x<t.x?e.x:t.x,e.y=e.y<t.y?e.y:t.y,e.width=hi-e.x,e.height=li-e.y},addList(e,t){ht.setListWithFn(e,t,void 0,!0)},setList(e,t,i=!1){ht.setListWithFn(e,t,void 0,i)},addListWithFn(e,t,i){ht.setListWithFn(e,t,i,!0)},setListWithFn(e,t,i,s=!1){let n,r=!0;for(let o=0,a=t.length;o<a;o++)n=i?i(t[o]):t[o],n&&(n.width||n.height)&&(r?(r=!1,s||Fu(e,n)):Wu(e,n));r&&ht.reset(e)},setPoints(e,t){t.forEach((i,s)=>s===0?$u(Ui,i.x,i.y):Jr(Ui,i.x,i.y)),Du(Ui,e)},setPoint(e,t){ht.set(e,t.x,t.y)},addPoint(e,t){Wu(e,t,!0)},getPoints(e){const{x:t,y:i,width:s,height:n}=e;return[{x:t,y:i},{x:t+s,y:i},{x:t+s,y:i+n},{x:t,y:i+n}]},hitRadiusPoint(e,t,i){return i&&(t=H.tempToInnerRadiusPointOf(t,i)),t.x>=e.x-t.radiusX&&t.x<=e.x+e.width+t.radiusX&&t.y>=e.y-t.radiusY&&t.y<=e.y+e.height+t.radiusY},hitPoint(e,t,i){return i&&(t=H.tempToInnerOf(t,i)),t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},hit(e,t,i){return i&&(t=ht.tempToOuterOf(t,i)),!(e.y+e.height<t.y||t.y+t.height<e.y||e.x+e.width<t.x||t.x+t.width<e.x)},includes(e,t,i){return i&&(t=ht.tempToOuterOf(t,i)),e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height},getIntersectData(e,t,i){if(i&&(t=ht.tempToOuterOf(t,i)),!ht.hit(e,t))return dc();let{x:s,y:n,width:r,height:o}=t;return hi=s+r,li=n+o,cs=e.x+e.width,us=e.y+e.height,s=s>e.x?s:e.x,n=n>e.y?n:e.y,hi=hi<cs?hi:cs,li=li<us?li:us,r=hi-s,o=li-n,{x:s,y:n,width:r,height:o}},intersect(e,t,i){ht.copy(e,ht.getIntersectData(e,t,i))},isSame(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},isEmpty(e){return e.x===0&&e.y===0&&e.width===0&&e.height===0},reset(e){ht.set(e)}},ht=D,{add:Wu,copy:Fu}=ht;class tt{get minX(){return D.minX(this)}get minY(){return D.minY(this)}get maxX(){return D.maxX(this)}get maxY(){return D.maxY(this)}constructor(t,i,s,n){this.set(t,i,s,n)}set(t,i,s,n){return typeof t=="object"?D.copy(this,t):D.set(this,t,i,s,n),this}get(){const{x:t,y:i,width:s,height:n}=this;return{x:t,y:i,width:s,height:n}}clone(){return new tt(this)}move(t,i){return D.move(this,t,i),this}scale(t,i){return D.scale(this,t,i),this}scaleOf(t,i,s){return D.scaleOf(this,t,i,s),this}toOuterOf(t,i){return D.toOuterOf(this,t,i),this}toInnerOf(t,i){return D.toInnerOf(this,t,i),this}getFitMatrix(t,i){return D.getFitMatrix(this,t,i)}spread(t,i){return D.spread(this,t,i),this}shrink(t,i){return D.shrink(this,t,i),this}ceil(){return D.ceil(this),this}unsign(){return D.unsign(this),this}float(t){return D.float(this,t),this}add(t){return D.add(this,t),this}addList(t){return D.setList(this,t,!0),this}setList(t){return D.setList(this,t),this}addListWithFn(t,i){return D.setListWithFn(this,t,i,!0),this}setListWithFn(t,i){return D.setListWithFn(this,t,i),this}setPoint(t){return D.setPoint(this,t),this}setPoints(t){return D.setPoints(this,t),this}addPoint(t){return D.addPoint(this,t),this}getPoints(){return D.getPoints(this)}hitPoint(t,i){return D.hitPoint(this,t,i)}hitRadiusPoint(t,i){return D.hitRadiusPoint(this,t,i)}hit(t,i){return D.hit(this,t,i)}includes(t,i){return D.includes(this,t,i)}intersect(t,i){return D.intersect(this,t,i),this}getIntersect(t,i){return new tt(D.getIntersectData(this,t,i))}isSame(t){return D.isSame(this,t)}isEmpty(){return D.isEmpty(this)}reset(){D.reset(this)}}const nt=new tt;class Yw{constructor(t,i,s,n,r,o){typeof t=="object"?this.copy(t):this.set(t,i,s,n,r,o)}set(t=0,i=0,s=0,n=0,r=0,o=0){this.top=t,this.right=i,this.bottom=s,this.left=n,this.width=r,this.height=o}copy(t){const{top:i,right:s,bottom:n,left:r,width:o,height:a}=t;this.set(i,s,n,r,o,a)}getBoundsFrom(t){const{top:i,right:s,bottom:n,left:r,width:o,height:a}=this;return new tt(r,i,o||t.width-r-s,a||t.height-i-n)}}var jo;(function(e){e[e.top=0]="top",e[e.right=1]="right",e[e.bottom=2]="bottom",e[e.left=3]="left"})(jo||(jo={}));var mn;(function(e){e[e.topLeft=0]="topLeft",e[e.top=1]="top",e[e.topRight=2]="topRight",e[e.right=3]="right",e[e.bottomRight=4]="bottomRight",e[e.bottom=5]="bottom",e[e.bottomLeft=6]="bottomLeft",e[e.left=7]="left",e[e.center=8]="center",e[e["top-left"]=0]="top-left",e[e["top-right"]=2]="top-right",e[e["bottom-right"]=4]="bottom-right",e[e["bottom-left"]=6]="bottom-left"})(mn||(mn={}));const fc=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:1,y:.5},{x:1,y:1},{x:.5,y:1},{x:0,y:1},{x:0,y:.5},{x:.5,y:.5}];fc.forEach(e=>e.type="percent");const He={directionData:fc,tempPoint:{},get:zu,toPoint(e,t,i,s,n){const r=zu(e);i.x=r.x,i.y=r.y,r.type==="percent"&&(i.x*=t.width,i.y*=t.height,n&&(i.x-=n.x,i.y-=n.y,r.x&&(i.x-=r.x===1?n.width:r.x===.5?r.x*n.width:0),r.y&&(i.y-=r.y===1?n.height:r.y===.5?r.y*n.height:0))),s||(i.x+=t.x,i.y+=t.y)}};function zu(e){return typeof e=="string"?fc[mn[e]]:e}const{toPoint:Xw}=He,L_={toPoint(e,t,i,s,n){Xw(e,i,s,n,t)}},Kw={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,".":1,e:1,E:1};class it{constructor(t){this.repeatMap={},this.name=t}static get(t){return new it(t)}static set filter(t){this.filterList=Hu(t)}static set exclude(t){this.excludeList=Hu(t)}log(...t){if(ds.enable){if(ds.filterList.length&&ds.filterList.every(i=>i!==this.name)||ds.excludeList.length&&ds.excludeList.some(i=>i===this.name))return;console.log("%c"+this.name,"color:#21ae62",...t)}}tip(...t){ds.enable&&this.warn(...t)}warn(...t){ds.showWarn&&console.warn(this.name,...t)}repeat(t,...i){this.repeatMap[t]||(this.warn("repeat:"+t,...i),this.repeatMap[t]=!0)}error(...t){try{throw new Error}catch(i){console.error(this.name,...t,i)}}}it.filterList=[];it.excludeList=[];it.showWarn=!0;function Hu(e){return e?typeof e=="string"&&(e=[e]):e=[],e}const ds=it,qw=it.get("RunTime"),zt={currentId:0,currentName:"",idMap:{},nameMap:{},nameToIdMap:{},start(e,t){const i=Ii.create(Ii.RUNTIME);return Ae.currentId=Ae.idMap[i]=t?performance.now():Date.now(),Ae.currentName=Ae.nameMap[i]=e,Ae.nameToIdMap[e]=i,i},end(e,t){const i=Ae.idMap[e],s=Ae.nameMap[e],n=t?(performance.now()-i)/1e3:Date.now()-i;Ae.idMap[e]=Ae.nameMap[e]=Ae.nameToIdMap[s]=void 0,qw.log(s,n,"ms")},endOfName(e,t){const i=Ae.nameToIdMap[e];i!==void 0&&Ae.end(i,t)}},Ae=zt,O_=[],St={list:{},add(e,...t){this.list[e]=!0,O_.push(...t)},has(e,t){const i=this.list[e];return!i&&t&&this.need(e),i},need(e){console.error("need plugin: "+(e.includes("-x")?"":"@leafer-in/")+e)}};setTimeout(()=>O_.forEach(e=>St.has(e,!0)));const ju=it.get("UICreator"),aa={list:{},register(e){const{__tag:t}=e.prototype;io[t]&&ju.repeat(t),io[t]=e},get(e,t,i,s,n,r){io[e]||ju.error("not register "+e);const o=new io[e](t);return i!==void 0&&(o.x=i,s&&(o.y=s),n&&(o.width=n),r&&(o.height=r)),o}},{list:io}=aa,Zw=it.get("EventCreator"),wn={nameList:{},register(e){let t;Object.keys(e).forEach(i=>{t=e[i],typeof t=="string"&&(Pn[t]&&Zw.repeat(t),Pn[t]=e)})},changeName(e,t){const i=Pn[e];if(i){const s=Object.keys(i).find(n=>i[n]===e);s&&(i[s]=t,Pn[t]=i)}},has(e){return!!this.nameList[e]},get(e,...t){return new Pn[e](...t)}},{nameList:Pn}=wn;class P_{constructor(){this.list=[]}add(t){t.manager=this,this.list.push(t)}get(t){let i;const{list:s}=this;for(let r=0,o=s.length;r<o;r++)if(i=s[r],i.recycled&&i.isSameSize(t))return i.recycled=!1,i.manager||(i.manager=this),i;const n=rt.canvas(t);return this.add(n),n}recycle(t){t.recycled=!0}clearRecycled(){let t;const i=[];for(let s=0,n=this.list.length;s<n;s++)t=this.list[s],t.recycled?t.destroy():i.push(t);this.list=i}clear(){this.list.forEach(t=>{t.destroy()}),this.list.length=0}destroy(){this.clear()}}const gt={default(e,t){return so(t,e),so(e,t),e},assign(e,t,i){let s;Object.keys(t).forEach(n=>{var r,o;if(s=t[n],(s==null?void 0:s.constructor)===Object&&((r=e[n])===null||r===void 0?void 0:r.constructor)===Object)return so(e[n],t[n],i&&i[n]);if(i&&n in i){((o=i[n])===null||o===void 0?void 0:o.constructor)===Object&&so(e[n]={},t[n],i[n]);return}e[n]=t[n]})},copyAttrs(e,t,i){return i.forEach(s=>{t[s]!==void 0&&(e[s]=t[s])}),e},clone(e){return JSON.parse(JSON.stringify(e))},toMap(e){const t={};for(let i=0,s=e.length;i<s;i++)t[e[i]]=!0;return t}},{assign:so}=gt;class M_{get __useNaturalRatio(){return!0}get __isLinePath(){const{path:t}=this;return t&&t.length===6&&t[0]===1}get __blendMode(){if(this.eraser&&this.eraser!=="path")return"destination-out";const{blendMode:t}=this;return t==="pass-through"?null:t}constructor(t){this.__leaf=t}__get(t){if(this.__input){const i=this.__input[t];if(i!==void 0)return i}return this[t]}__getData(){const t={tag:this.__leaf.tag},{__input:i}=this;let s;for(let n in this)n[0]!=="_"&&(s=i?i[n]:void 0,t[n]=s===void 0?this[n]:s);return t}__setInput(t,i){this.__input||(this.__input={}),this.__input[t]=i}__getInput(t){if(this.__input){const i=this.__input[t];if(i!==void 0)return i}if(!(t==="path"&&!this.__pathInputed))return this["_"+t]}__removeInput(t){this.__input&&this.__input[t]!==void 0&&(this.__input[t]=void 0)}__getInputData(t,i){const s={};if(t)if(t instanceof Array)for(let n of t)s[n]=this.__getInput(n);else for(let n in t)s[n]=this.__getInput(n);else{let n,r,{__input:o}=this;s.tag=this.__leaf.tag;for(let a in this)if(a[0]!=="_"&&(n=this["_"+a],n!==void 0)){if(a==="path"&&!this.__pathInputed)continue;r=o?o[a]:void 0,s[a]=r===void 0?n:r}}if(i&&i.matrix){const{a:n,b:r,c:o,d:a,e:h,f:l}=this.__leaf.__localMatrix;s.matrix={a:n,b:r,c:o,d:a,e:h,f:l}}return s}__setMiddle(t,i){this.__middle||(this.__middle={}),this.__middle[t]=i}__getMiddle(t){return this.__middle&&this.__middle[t]}__checkSingle(){const t=this;if(t.blendMode==="pass-through"){const i=this.__leaf;t.opacity<1&&(i.isBranch||t.__hasMultiPaint)||i.__hasEraser||t.eraser?t.__single=!0:t.__single&&(t.__single=!1)}else t.__single=!0}__removeNaturalSize(){this.__naturalWidth=this.__naturalHeight=void 0}destroy(){this.__input=this.__middle=null}}var No;(function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.NoAndSkip=2]="NoAndSkip",e[e.YesAndSkip=3]="YesAndSkip"})(No||(No={}));const Jw={};function Na(e){return e==null}function W(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function A_(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{l(s.next(c))}catch(d){o(d)}}function h(c){try{l(s.throw(c))}catch(d){o(d)}}function l(c){c.done?r(c.value):n(c.value).then(a,h)}l((s=s.apply(e,[])).next())})}function Tt(e){return(t,i)=>{e||(e=i),Object.defineProperty(t,i,{get(){return this.context[e]},set(s){this.context[e]=s}})}}const $_=[];function ot(){return(e,t)=>{$_.push(t)}}const Qw=[];let F=class{set blendMode(t){t==="normal"&&(t="source-over"),this.context.globalCompositeOperation=t}get blendMode(){return this.context.globalCompositeOperation}set dashPattern(t){this.context.setLineDash(t||Qw)}get dashPattern(){return this.context.getLineDash()}__bindContext(){let t;$_.forEach(i=>{t=this.context[i],t&&(this[i]=t.bind(this.context))}),this.textBaseline="alphabetic"}setTransform(t,i,s,n,r,o){}resetTransform(){}getTransform(){}save(){}restore(){}transform(t,i,s,n,r,o){typeof t=="object"?this.context.transform(t.a,t.b,t.c,t.d,t.e,t.f):this.context.transform(t,i,s,n,r,o)}translate(t,i){}scale(t,i){}rotate(t){}fill(t,i){}stroke(t){}clip(t,i){}fillRect(t,i,s,n){}strokeRect(t,i,s,n){}clearRect(t,i,s,n){}drawImage(t,i,s,n,r,o,a,h,l){switch(arguments.length){case 9:if(i<0){const c=-i/n*h;n+=i,i=0,o+=c,h-=c}if(s<0){const c=-s/r*l;r+=s,s=0,a+=c,l-=c}this.context.drawImage(t,i,s,n,r,o,a,h,l);break;case 5:this.context.drawImage(t,i,s,n,r);break;case 3:this.context.drawImage(t,i,s)}}beginPath(){}moveTo(t,i){}lineTo(t,i){}bezierCurveTo(t,i,s,n,r,o){}quadraticCurveTo(t,i,s,n){}closePath(){}arc(t,i,s,n,r,o){}arcTo(t,i,s,n,r){}ellipse(t,i,s,n,r,o,a,h){}rect(t,i,s,n){}roundRect(t,i,s,n,r){}createConicGradient(t,i,s){}createLinearGradient(t,i,s,n){}createPattern(t,i){}createRadialGradient(t,i,s,n,r,o){}fillText(t,i,s,n){}measureText(t){}strokeText(t,i,s,n){}destroy(){this.context=null}};W([Tt("imageSmoothingEnabled")],F.prototype,"smooth",void 0);W([Tt("imageSmoothingQuality")],F.prototype,"smoothLevel",void 0);W([Tt("globalAlpha")],F.prototype,"opacity",void 0);W([Tt()],F.prototype,"fillStyle",void 0);W([Tt()],F.prototype,"strokeStyle",void 0);W([Tt("lineWidth")],F.prototype,"strokeWidth",void 0);W([Tt("lineCap")],F.prototype,"strokeCap",void 0);W([Tt("lineJoin")],F.prototype,"strokeJoin",void 0);W([Tt("lineDashOffset")],F.prototype,"dashOffset",void 0);W([Tt()],F.prototype,"miterLimit",void 0);W([Tt()],F.prototype,"shadowBlur",void 0);W([Tt()],F.prototype,"shadowColor",void 0);W([Tt()],F.prototype,"shadowOffsetX",void 0);W([Tt()],F.prototype,"shadowOffsetY",void 0);W([Tt()],F.prototype,"filter",void 0);W([Tt()],F.prototype,"font",void 0);W([Tt()],F.prototype,"fontKerning",void 0);W([Tt()],F.prototype,"fontStretch",void 0);W([Tt()],F.prototype,"fontVariantCaps",void 0);W([Tt()],F.prototype,"textAlign",void 0);W([Tt()],F.prototype,"textBaseline",void 0);W([Tt()],F.prototype,"textRendering",void 0);W([Tt()],F.prototype,"wordSpacing",void 0);W([Tt()],F.prototype,"letterSpacing",void 0);W([Tt()],F.prototype,"direction",void 0);W([ot()],F.prototype,"setTransform",null);W([ot()],F.prototype,"resetTransform",null);W([ot()],F.prototype,"getTransform",null);W([ot()],F.prototype,"save",null);W([ot()],F.prototype,"restore",null);W([ot()],F.prototype,"translate",null);W([ot()],F.prototype,"scale",null);W([ot()],F.prototype,"rotate",null);W([ot()],F.prototype,"fill",null);W([ot()],F.prototype,"stroke",null);W([ot()],F.prototype,"clip",null);W([ot()],F.prototype,"fillRect",null);W([ot()],F.prototype,"strokeRect",null);W([ot()],F.prototype,"clearRect",null);W([ot()],F.prototype,"beginPath",null);W([ot()],F.prototype,"moveTo",null);W([ot()],F.prototype,"lineTo",null);W([ot()],F.prototype,"bezierCurveTo",null);W([ot()],F.prototype,"quadraticCurveTo",null);W([ot()],F.prototype,"closePath",null);W([ot()],F.prototype,"arc",null);W([ot()],F.prototype,"arcTo",null);W([ot()],F.prototype,"ellipse",null);W([ot()],F.prototype,"rect",null);W([ot()],F.prototype,"roundRect",null);W([ot()],F.prototype,"createConicGradient",null);W([ot()],F.prototype,"createLinearGradient",null);W([ot()],F.prototype,"createPattern",null);W([ot()],F.prototype,"createRadialGradient",null);W([ot()],F.prototype,"fillText",null);W([ot()],F.prototype,"measureText",null);W([ot()],F.prototype,"strokeText",null);const{copy:tx}=G,ex={width:1,height:1,pixelRatio:1},Fe=["width","height","pixelRatio"];class ha extends F{get width(){return this.size.width}get height(){return this.size.height}get pixelRatio(){return this.size.pixelRatio}get pixelWidth(){return this.width*this.pixelRatio}get pixelHeight(){return this.height*this.pixelRatio}get allowBackgroundColor(){return this.view&&this.parentView}constructor(t,i){super(),this.size={},this.worldTransform={},t||(t=ex),t.pixelRatio||(t.pixelRatio=E.devicePixelRatio),this.manager=i,this.innerId=Ii.create(Ii.CNAVAS);const{width:s,height:n,pixelRatio:r}=t;this.autoLayout=!s||!n,this.size.pixelRatio=r,this.config=t,this.init()}init(){}__createContext(){const{view:t}=this,{contextSettings:i}=this.config;this.context=i?t.getContext("2d",i):t.getContext("2d"),this.__bindContext()}export(t,i){}toBlob(t,i){}toDataURL(t,i){}saveAs(t,i){}resize(t,i=!0){if(this.isSameSize(t))return;let s;this.context&&!this.unreal&&i&&this.width&&(s=this.getSameCanvas(),s.copyWorld(this));const n=this.size;gt.copyAttrs(n,t,Fe),Fe.forEach(r=>n[r]||(n[r]=1)),this.bounds=new tt(0,0,this.width,this.height),this.context&&!this.unreal&&(this.updateViewSize(),this.smooth=this.config.smooth),this.updateClientBounds(),this.context&&!this.unreal&&s&&(this.clearWorld(s.bounds),this.copyWorld(s),s.recycle())}updateViewSize(){}updateClientBounds(){}getClientBounds(t){return t&&this.updateClientBounds(),this.clientBounds||this.bounds}startAutoLayout(t,i){}stopAutoLayout(){}setCursor(t){}setWorld(t,i){const{pixelRatio:s}=this,n=this.worldTransform;if(i){const{a:r,b:o,c:a,d:h,e:l,f:c}=i;this.setTransform(n.a=(t.a*r+t.b*a)*s,n.b=(t.a*o+t.b*h)*s,n.c=(t.c*r+t.d*a)*s,n.d=(t.c*o+t.d*h)*s,n.e=(t.e*r+t.f*a+l)*s,n.f=(t.e*o+t.f*h+c)*s)}else this.setTransform(n.a=t.a*s,n.b=t.b*s,n.c=t.c*s,n.d=t.d*s,n.e=t.e*s,n.f=t.f*s)}useWorldTransform(t){t&&(this.worldTransform=t);const i=this.worldTransform;i&&this.setTransform(i.a,i.b,i.c,i.d,i.e,i.f)}setStroke(t,i,s){i&&(this.strokeWidth=i),t&&(this.strokeStyle=t),s&&this.setStrokeOptions(s)}setStrokeOptions(t){this.strokeCap=t.strokeCap==="none"?"butt":t.strokeCap,this.strokeJoin=t.strokeJoin,this.dashPattern=t.dashPattern,this.dashOffset=t.dashOffset,this.miterLimit=t.miterLimit}saveBlendMode(t){this.savedBlendMode=this.blendMode,this.blendMode=t}restoreBlendMode(){this.blendMode=this.savedBlendMode}hitFill(t,i){return!0}hitStroke(t,i){return!0}hitPixel(t,i,s=1){return!0}setWorldShadow(t,i,s,n){const{pixelRatio:r}=this;this.shadowOffsetX=t*r,this.shadowOffsetY=i*r,this.shadowBlur=s*r,this.shadowColor=n||"black"}setWorldBlur(t){const{pixelRatio:i}=this;this.filter=`blur(${t*i}px)`}copyWorld(t,i,s,n){if(n&&(this.blendMode=n),i){const{pixelRatio:r}=this;s||(s=i),this.drawImage(t.view,i.x*r,i.y*r,i.width*r,i.height*r,s.x*r,s.y*r,s.width*r,s.height*r)}else this.drawImage(t.view,0,0);n&&(this.blendMode="source-over")}copyWorldToInner(t,i,s,n){if(n&&(this.blendMode=n),i.b||i.c)this.save(),this.resetTransform(),this.copyWorld(t,i,D.tempToOuterOf(s,i)),this.restore();else{const{pixelRatio:r}=this;this.drawImage(t.view,i.x*r,i.y*r,i.width*r,i.height*r,s.x,s.y,s.width,s.height)}n&&(this.blendMode="source-over")}copyWorldByReset(t,i,s,n,r){this.resetTransform(),this.copyWorld(t,i,s,n),r||this.useWorldTransform()}useGrayscaleAlpha(t){this.setTempBounds(t,!0,!0);let i,s;const{context:n}=this,r=n.getImageData(nt.x,nt.y,nt.width,nt.height),{data:o}=r;for(let a=0,h=o.length;a<h;a+=4)s=o[a]*.299+o[a+1]*.587+o[a+2]*.114,(i=o[a+3])&&(o[a+3]=i===255?s:i*(s/255));n.putImageData(r,nt.x,nt.y)}useMask(t,i,s){this.copyWorld(t,i,s,"destination-in")}useEraser(t,i,s){this.copyWorld(t,i,s,"destination-out")}fillWorld(t,i,s){s&&(this.blendMode=s),this.fillStyle=i,this.setTempBounds(t),this.fillRect(nt.x,nt.y,nt.width,nt.height),s&&(this.blendMode="source-over")}strokeWorld(t,i,s){s&&(this.blendMode=s),this.strokeStyle=i,this.setTempBounds(t),this.strokeRect(nt.x,nt.y,nt.width,nt.height),s&&(this.blendMode="source-over")}clearWorld(t,i){this.setTempBounds(t,i),this.clearRect(nt.x,nt.y,nt.width,nt.height)}clipWorld(t,i){this.beginPath(),this.setTempBounds(t,i),this.rect(nt.x,nt.y,nt.width,nt.height),this.clip()}clear(){const{pixelRatio:t}=this;this.clearRect(0,0,this.width*t+2,this.height*t+2)}setTempBounds(t,i,s){nt.set(t),s&&nt.intersect(this.bounds),nt.scale(this.pixelRatio),i&&nt.ceil()}isSameSize(t){return this.width===t.width&&this.height===t.height&&this.pixelRatio===t.pixelRatio}getSameCanvas(t,i){const s=this.manager?this.manager.get(this.size):rt.canvas(Object.assign({},this.size));return s.save(),t&&(tx(s.worldTransform,this.worldTransform),s.useWorldTransform()),i&&(s.smooth=this.smooth),s}recycle(t){this.recycled||(this.restore(),t?this.clearWorld(t,!0):this.clear(),this.manager?this.manager.recycle(this):this.destroy())}updateRender(t){}unrealCanvas(){}destroy(){this.manager=this.view=this.parentView=null}}const _i={creator:{},parse(e,t){},convertToCanvasData(e,t){}},D_={N:21,D:22,X:23,G:24,F:25,O:26,P:27,U:28},xe=Object.assign({M:1,m:10,L:2,l:20,H:3,h:30,V:4,v:40,C:5,c:50,S:6,s:60,Q:7,q:70,T:8,t:80,A:9,a:90,Z:11,z:11,R:12},D_),I_={M:3,m:3,L:3,l:3,H:2,h:2,V:2,v:2,C:7,c:7,S:5,s:5,Q:5,q:5,T:3,t:3,A:8,a:8,Z:1,z:1,N:5,D:9,X:6,G:9,F:5,O:7,P:4,U:6},W_={m:10,l:20,H:3,h:30,V:4,v:40,c:50,S:6,s:60,q:70,T:8,t:80,A:9,a:90},ix=Object.assign(Object.assign({},W_),D_),Vo=xe,F_={};for(let e in Vo)F_[Vo[e]]=e;const z_={};for(let e in Vo)z_[Vo[e]]=I_[e];const H_={drawRoundRect(e,t,i,s,n,r){const o=$t.fourNumber(r,Math.min(s/2,n/2)),a=t+s,h=i+n;o[0]?e.moveTo(t+o[0],i):e.moveTo(t,i),o[1]?e.arcTo(a,i,a,h,o[1]):e.lineTo(a,i),o[2]?e.arcTo(a,h,t,h,o[2]):e.lineTo(a,h),o[3]?e.arcTo(t,h,t,i,o[3]):e.lineTo(t,h),o[0]?e.arcTo(t,i,a,i,o[0]):e.lineTo(t,i)}},{sin:Fs,cos:Mn,atan2:Nu,ceil:sx,abs:Va,PI:Vu,sqrt:Uu,pow:no}=Math,{setPoint:Ua,addPoint:ro}=$r,{set:oo,toNumberPoints:nx}=H,{M:Gu,L:Ga,C:Ya,Q:Yu,Z:rx}=xe,Xa={},Ss={points(e,t,i,s){let n=nx(t);if(e.push(Gu,n[0],n[1]),i&&n.length>5){let r,o,a,h,l,c,d,f,u,p,y,v,S,x=n.length;const C=i===!0?.5:i;s&&(n=[n[x-2],n[x-1],...n,n[0],n[1],n[2],n[3]],x=n.length);for(let w=2;w<x-2;w+=2)r=n[w-2],o=n[w-1],a=n[w],h=n[w+1],l=n[w+2],c=n[w+3],y=Uu(no(a-r,2)+no(h-o,2)),v=Uu(no(l-a,2)+no(c-h,2)),S=y+v,y=C*y/S,v=C*v/S,l-=r,c-=o,d=a-y*l,f=h-y*c,w===2?s||e.push(Yu,d,f,a,h):e.push(Ya,u,p,d,f,a,h),u=a+v*l,p=h+v*c;s||e.push(Yu,u,p,n[x-2],n[x-1])}else for(let r=2,o=n.length;r<o;r+=2)e.push(Ga,n[r],n[r+1]);s&&e.push(rx)},rect(e,t,i,s,n){_i.creator.path=e,_i.creator.moveTo(t,i).lineTo(t+s,i).lineTo(t+s,i+n).lineTo(t,i+n).lineTo(t,i)},roundRect(e,t,i,s,n,r){_i.creator.path=[],H_.drawRoundRect(_i.creator,t,i,s,n,r),e.push(..._i.convertToCanvasData(_i.creator.path,!0))},arcTo(e,t,i,s,n,r,o,a,h,l,c){const d=s-t,f=n-i,u=r-s,p=o-n;let y=Nu(f,d),v=Nu(p,u),S=v-y;if(S<0&&(S+=We),S===Vu||Va(d+f)<1e-12||Va(u+p)<1e-12){e&&e.push(Ga,s,n),h&&(Ua(h,t,i),ro(h,s,n)),c&&oo(c,t,i),l&&oo(l,s,n);return}const x=d*p-u*f<0,C=x?-1:1,w=a/Mn(S/2),M=s+w*Mn(y+S/2+en*C),z=n+w*Fs(y+S/2+en*C);return y-=en*C,v-=en*C,qu(e,M,z,a,a,0,y/mt,v/mt,x,h,l,c)},arc(e,t,i,s,n,r,o,a,h,l){return qu(e,t,i,s,s,0,n,r,o,a,h,l)},ellipse(e,t,i,s,n,r,o,a,h,l,c,d){const f=r*mt,u=Fs(f),p=Mn(f);let y=o*mt,v=a*mt;y>Vu&&(y-=We),v<0&&(v+=We);let S=v-y;S<0?S+=We:S>We&&(S-=We),h&&(S-=We);const x=sx(Va(S/en)),C=S/x,w=Fs(C/4),M=8/3*w*w/Fs(C/2);v=y+C;let z=Mn(y),V=Fs(y),ut,Lt,dt,Q,wt,ue,Ee,Pe,Ct=dt=p*s*z-u*n*V,at=Q=u*s*z+p*n*V,U=t+dt,Kt=i+Q;e&&e.push(e.length?Ga:Gu,U,Kt),l&&Ua(l,U,Kt),d&&oo(d,U,Kt);for(let vi=0;vi<x;vi++)ut=Mn(v),Lt=Fs(v),dt=p*s*ut-u*n*Lt,Q=u*s*ut+p*n*Lt,wt=t+Ct-M*(p*s*V+u*n*z),ue=i+at-M*(u*s*V-p*n*z),Ee=t+dt+M*(p*s*Lt+u*n*ut),Pe=i+Q+M*(u*s*Lt-p*n*ut),e&&e.push(Ya,wt,ue,Ee,Pe,t+dt,i+Q),l&&Ku(t+Ct,i+at,wt,ue,Ee,Pe,t+dt,i+Q,l,!0),Ct=dt,at=Q,z=ut,V=Lt,y=v,v+=C;c&&oo(c,t+dt,i+Q)},quadraticCurveTo(e,t,i,s,n,r,o){e.push(Ya,(t+2*s)/3,(i+2*n)/3,(r+2*s)/3,(o+2*n)/3,r,o)},toTwoPointBoundsByQuadraticCurve(e,t,i,s,n,r,o,a){Ku(e,t,(e+2*i)/3,(t+2*s)/3,(n+2*i)/3,(r+2*s)/3,n,r,o,a)},toTwoPointBounds(e,t,i,s,n,r,o,a,h,l){const c=[];let d,f,u,p,y,v,S,x,C=e,w=i,M=n,z=o;for(let V=0;V<2;++V){if(V==1&&(C=t,w=s,M=r,z=a),d=-3*C+9*w-9*M+3*z,f=6*C-12*w+6*M,u=3*w-3*C,Math.abs(d)<1e-12){if(Math.abs(f)<1e-12)continue;p=-u/f,0<p&&p<1&&c.push(p);continue}S=f*f-4*u*d,x=Math.sqrt(S),!(S<0)&&(y=(-f+x)/(2*d),0<y&&y<1&&c.push(y),v=(-f-x)/(2*d),0<v&&v<1&&c.push(v))}l?ro(h,e,t):Ua(h,e,t),ro(h,o,a);for(let V=0,ut=c.length;V<ut;V++)Xu(c[V],e,t,i,s,n,r,o,a,Xa),ro(h,Xa.x,Xa.y)},getPointAndSet(e,t,i,s,n,r,o,a,h,l){const c=1-e,d=c*c*c,f=3*c*c*e,u=3*c*e*e,p=e*e*e;l.x=d*t+f*s+u*r+p*a,l.y=d*i+f*n+u*o+p*h},getPoint(e,t,i,s,n,r,o,a,h){const l={};return Xu(e,t,i,s,n,r,o,a,h,l),l}},{getPointAndSet:Xu,toTwoPointBounds:Ku,ellipse:qu}=Ss,{sin:ox,cos:ax,sqrt:Zu,atan2:Ju}=Math,{ellipse:hx}=Ss,lx={ellipticalArc(e,t,i,s,n,r,o,a,h,l,c){const d=(h-t)/2,f=(l-i)/2,u=r*mt,p=ox(u),y=ax(u),v=-y*d-p*f,S=-y*f+p*d,x=s*s,C=n*n,w=S*S,M=v*v,z=x*C-x*w-C*M;let V=0;if(z<0){const Ct=Zu(1-z/(x*C));s*=Ct,n*=Ct}else V=(o===a?-1:1)*Zu(z/(x*w+C*M));const ut=V*s*S/n,Lt=-V*n*v/s,dt=Ju((S-Lt)/n,(v-ut)/s),Q=Ju((-S-Lt)/n,(-v-ut)/s);let wt=Q-dt;a===0&&wt>0?wt-=We:a===1&&wt<0&&(wt+=We);const ue=t+d+y*ut-p*Lt,Ee=i+f+p*ut+y*Lt,Pe=wt<0?1:0;c||E.ellipseToCurve?hx(e,ue,Ee,s,n,r,dt/mt,Q/mt,Pe):s===n&&!r?e.push(xe.O,ue,Ee,s,dt/mt,Q/mt,Pe):e.push(xe.G,ue,Ee,s,n,r,dt/mt,Q/mt,Pe)}},{M:Ka,m:cx,L:An,l:ux,H:dx,h:fx,V:px,v:_x,C:zs,c:gx,S:qa,s:yx,Q:Hs,q:mx,T:Za,t:wx,A:xx,a:bx,Z:Ja,z:vx,N:Ex,D:Sx,X:Tx,G:Cx,F:Bx,O:Rx,P:kx,U:Lx}=xe,{rect:Ox,roundRect:Qu,arcTo:Px,arc:td,ellipse:ed,quadraticCurveTo:id}=Ss,{ellipticalArc:Mx}=lx,Ax=it.get("PathConvert"),Ti={},Rs={current:{dot:0},stringify(e,t){let i=0,s=e.length,n,r="",o,a;for(;i<s;){o=e[i],n=z_[o],o===a?r+=" ":r+=F_[o];for(let h=1;h<n;h++)r+=$t.float(e[i+h],t),h===n-1||(r+=" ");a=o,i+=n}return r},parse(e,t){let i,s,n,r="";const o=[],a=t?ix:W_;for(let h=0,l=e.length;h<l;h++)s=e[h],Kw[s]?(s==="."&&($e.dot&&(fs(o,r),r=""),$e.dot++),r==="0"&&s!=="."&&(fs(o,r),r=""),r+=s):xe[s]?(r&&(fs(o,r),r=""),$e.name=xe[s],$e.length=I_[s],$e.index=0,fs(o,$e.name),!i&&a[s]&&(i=!0)):s==="-"||s==="+"?n==="e"||n==="E"?r+=s:(r&&fs(o,r),r=s):r&&(fs(o,r),r=""),n=s;return r&&fs(o,r),i?Rs.toCanvasData(o,t):o},toCanvasData(e,t){let i=0,s=0,n=0,r=0,o=0,a=e.length,h,l,c,d,f;const u=[];for(;o<a;){switch(c=e[o],c){case cx:e[o+1]+=i,e[o+2]+=s;case Ka:i=e[o+1],s=e[o+2],u.push(Ka,i,s),o+=3;break;case fx:e[o+1]+=i;case dx:i=e[o+1],u.push(An,i,s),o+=2;break;case _x:e[o+1]+=s;case px:s=e[o+1],u.push(An,i,s),o+=2;break;case ux:e[o+1]+=i,e[o+2]+=s;case An:i=e[o+1],s=e[o+2],u.push(An,i,s),o+=3;break;case yx:e[o+1]+=i,e[o+2]+=s,e[o+3]+=i,e[o+4]+=s,c=qa;case qa:f=d===zs||d===qa,n=f?i*2-h:e[o+1],r=f?s*2-l:e[o+2],h=e[o+1],l=e[o+2],i=e[o+3],s=e[o+4],u.push(zs,n,r,h,l,i,s),o+=5;break;case gx:e[o+1]+=i,e[o+2]+=s,e[o+3]+=i,e[o+4]+=s,e[o+5]+=i,e[o+6]+=s,c=zs;case zs:h=e[o+3],l=e[o+4],i=e[o+5],s=e[o+6],u.push(zs,e[o+1],e[o+2],h,l,i,s),o+=7;break;case wx:e[o+1]+=i,e[o+2]+=s,c=Za;case Za:f=d===Hs||d===Za,h=f?i*2-h:e[o+1],l=f?s*2-l:e[o+2],t?id(u,i,s,h,l,e[o+1],e[o+2]):u.push(Hs,h,l,e[o+1],e[o+2]),i=e[o+1],s=e[o+2],o+=3;break;case mx:e[o+1]+=i,e[o+2]+=s,e[o+3]+=i,e[o+4]+=s,c=Hs;case Hs:h=e[o+1],l=e[o+2],t?id(u,i,s,h,l,e[o+3],e[o+4]):u.push(Hs,h,l,e[o+3],e[o+4]),i=e[o+3],s=e[o+4],o+=5;break;case bx:e[o+6]+=i,e[o+7]+=s;case xx:Mx(u,i,s,e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],e[o+6],e[o+7],t),i=e[o+6],s=e[o+7],o+=8;break;case vx:case Ja:u.push(Ja),o++;break;case Ex:i=e[o+1],s=e[o+2],t?Ox(u,i,s,e[o+3],e[o+4]):Gi(u,e,o,5),o+=5;break;case Sx:i=e[o+1],s=e[o+2],t?Qu(u,i,s,e[o+3],e[o+4],[e[o+5],e[o+6],e[o+7],e[o+8]]):Gi(u,e,o,9),o+=9;break;case Tx:i=e[o+1],s=e[o+2],t?Qu(u,i,s,e[o+3],e[o+4],e[o+5]):Gi(u,e,o,6),o+=6;break;case Cx:ed(t?u:Gi(u,e,o,9),e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],e[o+6],e[o+7],e[o+8],null,Ti),i=Ti.x,s=Ti.y,o+=9;break;case Bx:t?ed(u,e[o+1],e[o+2],e[o+3],e[o+4],0,0,360,!1):Gi(u,e,o,5),i=e[o+1]+e[o+3],s=e[o+2],o+=5;break;case Rx:td(t?u:Gi(u,e,o,7),e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],e[o+6],null,Ti),i=Ti.x,s=Ti.y,o+=7;break;case kx:t?td(u,e[o+1],e[o+2],e[o+3],0,360,!1):Gi(u,e,o,4),i=e[o+1]+e[o+3],s=e[o+2],o+=4;break;case Lx:Px(t?u:Gi(u,e,o,6),i,s,e[o+1],e[o+2],e[o+3],e[o+4],e[o+5],null,Ti),i=Ti.x,s=Ti.y,o+=6;break;default:return Ax.error(`command: ${c} [index:${o}]`,e),u}d=c}return u},objectToCanvasData(e){const t=[];return e.forEach(i=>{switch(i.name){case"M":t.push(Ka,i.x,i.y);break;case"L":t.push(An,i.x,i.y);break;case"C":t.push(zs,i.x1,i.y1,i.x2,i.y2,i.x,i.y);break;case"Q":t.push(Hs,i.x1,i.y1,i.x,i.y);break;case"Z":t.push(Ja)}}),t},copyData(e,t,i,s){for(let n=i,r=i+s;n<r;n++)e.push(t[n])},pushData(e,t){$e.index===$e.length&&($e.index=1,e.push($e.name)),e.push(Number(t)),$e.index++,$e.dot=0}},{current:$e,pushData:fs,copyData:Gi}=Rs,{M:Qa,L:$x,C:Dx,Q:Ix,Z:Wx,N:sd,D:Fx,X:zx,G:Hx,F:jx,O:Nx,P:Vx,U:nd}=xe,{getMinDistanceFrom:Ux,getRadianFrom:Gx}=H,{tan:Yx,min:Xx,abs:Kx}=Math,js={},Os={beginPath(e){e.length=0},moveTo(e,t,i){e.push(Qa,t,i)},lineTo(e,t,i){e.push($x,t,i)},bezierCurveTo(e,t,i,s,n,r,o){e.push(Dx,t,i,s,n,r,o)},quadraticCurveTo(e,t,i,s,n){e.push(Ix,t,i,s,n)},closePath(e){e.push(Wx)},rect(e,t,i,s,n){e.push(sd,t,i,s,n)},roundRect(e,t,i,s,n,r){if(typeof r=="number")e.push(zx,t,i,s,n,r);else{const o=$t.fourNumber(r);o?e.push(Fx,t,i,s,n,...o):e.push(sd,t,i,s,n)}},ellipse(e,t,i,s,n,r,o,a,h){r===void 0?e.push(jx,t,i,s,n):(o===void 0&&(o=0),a===void 0&&(a=360),e.push(Hx,t,i,s,n,r,o,a,h?1:0))},arc(e,t,i,s,n,r,o){n===void 0?e.push(Vx,t,i,s):(r===void 0&&(r=360),e.push(Nx,t,i,s,n,r,o?1:0))},arcTo(e,t,i,s,n,r,o,a){if(o!==void 0){const h=Yx(Gx(o,a,t,i,s,n)/2)*(Ux(o,a,t,i,s,n)/2);e.push(nd,t,i,s,n,Xx(r,Kx(h)))}else e.push(nd,t,i,s,n,r)},drawEllipse(e,t,i,s,n,r,o,a,h){Ss.ellipse(null,t,i,s,n,r===void 0?0:r,o===void 0?0:o,a===void 0?360:a,h,null,null,js),e.push(Qa,js.x,js.y),qx(e,t,i,s,n,r,o,a,h)},drawArc(e,t,i,s,n,r,o){Ss.arc(null,t,i,s,n===void 0?0:n,r===void 0?360:r,o,null,null,js),e.push(Qa,js.x,js.y),Zx(e,t,i,s,n,r,o)},drawPoints(e,t,i,s){Ss.points(e,t,i,s)}},{ellipse:qx,arc:Zx}=Os,{moveTo:Jx,lineTo:Qx,quadraticCurveTo:tb,bezierCurveTo:eb,closePath:ib,beginPath:sb,rect:nb,roundRect:rb,ellipse:ob,arc:ab,arcTo:hb,drawEllipse:lb,drawArc:cb,drawPoints:ub}=Os;class pc{set path(t){this.__path=t}get path(){return this.__path}constructor(t){this.set(t)}set(t){return t?this.__path=typeof t=="string"?_i.parse(t):t:this.__path=[],this}beginPath(){return sb(this.__path),this.paint(),this}moveTo(t,i){return Jx(this.__path,t,i),this.paint(),this}lineTo(t,i){return Qx(this.__path,t,i),this.paint(),this}bezierCurveTo(t,i,s,n,r,o){return eb(this.__path,t,i,s,n,r,o),this.paint(),this}quadraticCurveTo(t,i,s,n){return tb(this.__path,t,i,s,n),this.paint(),this}closePath(){return ib(this.__path),this.paint(),this}rect(t,i,s,n){return nb(this.__path,t,i,s,n),this.paint(),this}roundRect(t,i,s,n,r){return rb(this.__path,t,i,s,n,r),this.paint(),this}ellipse(t,i,s,n,r,o,a,h){return ob(this.__path,t,i,s,n,r,o,a,h),this.paint(),this}arc(t,i,s,n,r,o){return ab(this.__path,t,i,s,n,r,o),this.paint(),this}arcTo(t,i,s,n,r){return hb(this.__path,t,i,s,n,r),this.paint(),this}drawEllipse(t,i,s,n,r,o,a,h){return lb(this.__path,t,i,s,n,r,o,a,h),this.paint(),this}drawArc(t,i,s,n,r,o){return cb(this.__path,t,i,s,n,r,o),this.paint(),this}drawPoints(t,i,s){return ub(this.__path,t,i,s),this.paint(),this}clearPath(){return this.beginPath()}paint(){}}const{M:db,L:fb,C:pb,Q:_b,Z:gb,N:yb,D:mb,X:wb,G:xb,F:bb,O:vb,P:Eb,U:Sb}=xe,Tb=it.get("PathDrawer"),Cb={drawPathByData(e,t){if(!t)return;let i,s=0,n=t.length;for(;s<n;)switch(i=t[s],i){case db:e.moveTo(t[s+1],t[s+2]),s+=3;break;case fb:e.lineTo(t[s+1],t[s+2]),s+=3;break;case pb:e.bezierCurveTo(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5],t[s+6]),s+=7;break;case _b:e.quadraticCurveTo(t[s+1],t[s+2],t[s+3],t[s+4]),s+=5;break;case gb:e.closePath(),s+=1;break;case yb:e.rect(t[s+1],t[s+2],t[s+3],t[s+4]),s+=5;break;case mb:e.roundRect(t[s+1],t[s+2],t[s+3],t[s+4],[t[s+5],t[s+6],t[s+7],t[s+8]]),s+=9;break;case wb:e.roundRect(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]),s+=6;break;case xb:e.ellipse(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]*mt,t[s+6]*mt,t[s+7]*mt,t[s+8]),s+=9;break;case bb:e.ellipse(t[s+1],t[s+2],t[s+3],t[s+4],0,0,We,!1),s+=5;break;case vb:e.arc(t[s+1],t[s+2],t[s+3],t[s+4]*mt,t[s+5]*mt,t[s+6]),s+=7;break;case Eb:e.arc(t[s+1],t[s+2],t[s+3],0,We,!1),s+=4;break;case Sb:e.arcTo(t[s+1],t[s+2],t[s+3],t[s+4],t[s+5]),s+=6;break;default:Tb.error(`command: ${i} [index:${s}]`,t);return}}},{M:Bb,L:Rb,C:rd,Q:od,Z:ad,N:kb,D:hd,X:Lb,G:Ob,F:Pb,O:Mb,P:Ab,U:$b}=xe,{toTwoPointBounds:Db,toTwoPointBoundsByQuadraticCurve:Ib,arcTo:Wb,arc:Fb,ellipse:zb}=Ss,{addPointBounds:$n,copy:th,addPoint:Hb,setPoint:eh,addBounds:ao,toBounds:jb}=$r,Nb=it.get("PathBounds");let Ns,ho,ih;const Ce={},ld={},Ci={},_c={toBounds(e,t){_c.toTwoPointBounds(e,ld),jb(ld,t)},toTwoPointBounds(e,t){if(!e||!e.length)return eh(t,0,0);let i=0,s=0,n=0,r,o,a,h,l;const c=e.length;for(;i<c;)switch(l=e[i],i===0&&(l===ad||l===rd||l===od?eh(t,s,n):eh(t,e[i+1],e[i+2])),l){case Bb:case Rb:s=e[i+1],n=e[i+2],Hb(t,s,n),i+=3;break;case rd:a=e[i+5],h=e[i+6],Db(s,n,e[i+1],e[i+2],e[i+3],e[i+4],a,h,Ce),$n(t,Ce),s=a,n=h,i+=7;break;case od:r=e[i+1],o=e[i+2],a=e[i+3],h=e[i+4],Ib(s,n,r,o,a,h,Ce),$n(t,Ce),s=a,n=h,i+=5;break;case ad:i+=1;break;case kb:s=e[i+1],n=e[i+2],ao(t,s,n,e[i+3],e[i+4]),i+=5;break;case hd:case Lb:s=e[i+1],n=e[i+2],ao(t,s,n,e[i+3],e[i+4]),i+=l===hd?9:6;break;case Ob:zb(null,e[i+1],e[i+2],e[i+3],e[i+4],e[i+5],e[i+6],e[i+7],e[i+8],Ce,Ci),i===0?th(t,Ce):$n(t,Ce),s=Ci.x,n=Ci.y,i+=9;break;case Pb:s=e[i+1],n=e[i+2],ho=e[i+3],ih=e[i+4],ao(t,s-ho,n-ih,ho*2,ih*2),s+=ho,i+=5;break;case Mb:Fb(null,e[i+1],e[i+2],e[i+3],e[i+4],e[i+5],e[i+6],Ce,Ci),i===0?th(t,Ce):$n(t,Ce),s=Ci.x,n=Ci.y,i+=7;break;case Ab:s=e[i+1],n=e[i+2],Ns=e[i+3],ao(t,s-Ns,n-Ns,Ns*2,Ns*2),s+=Ns,i+=4;break;case $b:Wb(null,s,n,e[i+1],e[i+2],e[i+3],e[i+4],e[i+5],Ce,Ci),i===0?th(t,Ce):$n(t,Ce),s=Ci.x,n=Ci.y,i+=6;break;default:Nb.error(`command: ${l} [index:${i}]`,e);return}}},{M:sh,L:lo,C:cd,Z:co}=xe,{getCenterX:Vb,getCenterY:Ub}=H,{arcTo:nh}=Os,Gb={smooth(e,t,i){let s,n=0,r=0,o=0,a=0,h=0,l=0,c=0,d=0,f=0;const u=e.length,p=[];for(;n<u;)switch(s=e[n],s){case sh:a=d=e[n+1],h=f=e[n+2],n+=3,e[n]===lo?(l=e[n+1],c=e[n+2],p.push(sh,Vb(a,l),Ub(h,c))):p.push(sh,a,h);break;case lo:switch(r=e[n+1],o=e[n+2],n+=3,e[n]){case lo:nh(p,r,o,e[n+1],e[n+2],t,d,f);break;case co:nh(p,r,o,a,h,t,d,f);break;default:p.push(lo,r,o)}d=r,f=o;break;case cd:p.push(cd,e[n+1],e[n+2],e[n+3],e[n+4],e[n+5],e[n+6]),n+=7;break;case co:nh(p,a,h,l,c,t,d,f),p.push(co),n+=1;break}return s!==co&&(p[1]=a,p[2]=h),p}};_i.creator=new pc;_i.parse=Rs.parse;_i.convertToCanvasData=Rs.toCanvasData;const Dn=new pc,{drawRoundRect:Yb}=H_;function Xb(e){e&&!e.roundRect&&(e.roundRect=function(t,i,s,n,r){Yb(this,t,i,s,n,r)})}function la(e){Xb(e)}const wi={opacityTypes:["png","webp","svg"],upperCaseTypeMap:{},mineType(e){return!e||e.startsWith("image")?e:(e==="jpg"&&(e="jpeg"),"image/"+e)},fileType(e){const t=e.split(".");return t[t.length-1]},isOpaqueImage(e){const t=vl.fileType(e);return["jpg","jpeg"].some(i=>i===t)},getExportOptions(e){switch(typeof e){case"object":return e;case"number":return{quality:e};case"boolean":return{blob:e};default:return{}}}},vl=wi;vl.opacityTypes.forEach(e=>vl.upperCaseTypeMap[e]=e.toUpperCase());const Kb=it.get("TaskProcessor");class qb{constructor(t){this.parallel=!0,this.time=1,this.id=Ii.create(Ii.TASK),this.task=t}run(){return A_(this,void 0,void 0,function*(){try{this.task&&!this.isComplete&&this.parent.running&&(yield this.task())}catch(t){Kb.error(t)}})}complete(){this.isComplete=!0,this.parent=null,this.task=null}cancel(){this.isCancel=!0,this.complete()}}class El{get total(){return this.list.length+this.delayNumber}get finishedIndex(){return this.isComplete?0:this.index+this.parallelSuccessNumber}get remain(){return this.isComplete?this.total:this.total-this.finishedIndex}get percent(){const{total:t}=this;let i=0,s=0;for(let n=0;n<t;n++)n<=this.finishedIndex?(s+=this.list[n].time,n===this.finishedIndex&&(i=s)):i+=this.list[n].time;return this.isComplete?1:s/i}constructor(t){this.config={parallel:6},this.list=[],this.running=!1,this.isComplete=!0,this.index=0,this.delayNumber=0,t&&gt.assign(this.config,t),this.empty()}add(t,i){let s,n,r,o;const a=new qb(t);return a.parent=this,typeof i=="number"?o=i:i&&(n=i.parallel,s=i.start,r=i.time,o=i.delay),r&&(a.time=r),n===!1&&(a.parallel=!1),o===void 0?this.push(a,s):(this.delayNumber++,setTimeout(()=>{this.delayNumber&&(this.delayNumber--,this.push(a,s))},o)),this.isComplete=!1,a}push(t,i){this.list.push(t),i!==!1&&!this.timer&&(this.timer=setTimeout(()=>this.start()))}empty(){this.index=0,this.parallelSuccessNumber=0,this.list=[],this.parallelList=[],this.delayNumber=0}start(){this.running||(this.running=!0,this.isComplete=!1,this.run())}pause(){clearTimeout(this.timer),this.timer=null,this.running=!1}resume(){this.start()}skip(){this.index++,this.resume()}stop(){this.isComplete=!0,this.list.forEach(t=>{t.isComplete||t.cancel()}),this.pause(),this.empty()}run(){this.running&&(this.setParallelList(),this.parallelList.length>1?this.runParallelTasks():this.remain?this.runTask():this.onComplete())}runTask(){const t=this.list[this.index];if(!t){this.nextTask();return}t.run().then(()=>{this.onTask(t),this.index++,this.nextTask()}).catch(i=>{this.onError(i)})}runParallelTasks(){this.parallelList.forEach(t=>this.runParallelTask(t))}runParallelTask(t){t.run().then(()=>{this.onTask(t),this.fillParallelTask()}).catch(i=>{this.onParallelError(i)})}nextTask(){this.total===this.finishedIndex?this.onComplete():this.timer=setTimeout(()=>this.run())}setParallelList(){let t;this.parallelList=[],this.parallelSuccessNumber=0;let i=this.index+this.config.parallel;i>this.list.length&&(i=this.list.length);for(let s=this.index;s<i&&(t=this.list[s],t.parallel);s++)this.parallelList.push(t)}fillParallelTask(){let t;const i=this.parallelList;this.parallelSuccessNumber++,i.pop();const s=i.length,n=this.finishedIndex+s;if(i.length){if(!this.running)return;n<this.total&&(t=this.list[n],t&&t.parallel&&(i.push(t),this.runParallelTask(t)))}else this.index+=this.parallelSuccessNumber,this.parallelSuccessNumber=0,this.nextTask()}onComplete(){this.stop(),this.config.onComplete&&this.config.onComplete()}onTask(t){t.complete(),this.config.onTask&&this.config.onTask()}onParallelError(t){this.parallelList.forEach(i=>{i.parallel=!1}),this.parallelList.length=0,this.parallelSuccessNumber=0,this.onError(t)}onError(t){this.pause(),this.config.onError&&this.config.onError(t)}destroy(){this.stop()}}const Wt={map:{},recycledList:[],tasker:new El,patternTasker:new El,get isComplete(){return Bi.tasker.isComplete},get(e){let t=Bi.map[e.url];return t||(t=rt.image(e),Bi.map[e.url]=t),t.use++,t},recycle(e){e.use--,setTimeout(()=>{e.use||Bi.recycledList.push(e)})},clearRecycled(){const e=Bi.recycledList;e.length>100&&(e.forEach(t=>{!t.use&&t.url&&(delete Bi.map[t.url],t.destroy())}),e.length=0)},hasOpacityPixel(e){return wi.opacityTypes.some(t=>Bi.isFormat(t,e))},isFormat(e,t){if(t.format===e)return!0;const{url:i}=t;if(i.startsWith("data:")){if(i.startsWith("data:"+wi.mineType(e)))return!0}else{if(i.includes("."+e)||i.includes("."+wi.upperCaseTypeMap[e]))return!0;if(e==="png"&&!i.includes("."))return!0}return!1},destroy(){Bi.map={},Bi.recycledList=[]}},Bi=Wt,{IMAGE:Zb,create:Jb}=Ii;class gc{get url(){return this.config.url}get completed(){return this.ready||!!this.error}constructor(t){this.use=0,this.waitComplete=[],this.innerId=Jb(Zb),this.config=t||{url:""},this.isSVG=Wt.isFormat("svg",t),this.hasOpacityPixel=Wt.hasOpacityPixel(t)}load(t,i){return this.loading||(this.loading=!0,Wt.tasker.add(()=>A_(this,void 0,void 0,function*(){return yield E.origin.loadImage(this.url).then(s=>{this.ready=!0,this.width=s.naturalWidth||s.width,this.height=s.naturalHeight||s.height,this.view=s,this.onComplete(!0)}).catch(s=>{this.error=s,this.onComplete(!1)})}))),this.waitComplete.push(t,i),this.waitComplete.length-2}unload(t,i){const s=this.waitComplete;if(i){const n=s[t+1];n&&n({type:"stop"})}s[t]=s[t+1]=void 0}onComplete(t){let i;this.waitComplete.forEach((s,n)=>{i=n%2,s&&(t?i||s(this):i&&s(this.error))}),this.waitComplete.length=0,this.loading=!1}getCanvas(t,i,s,n){if(t||(t=this.width),i||(i=this.height),this.cache){let{params:a,data:h}=this.cache;for(let l in a)if(a[l]!==arguments[l]){h=null;break}if(h)return h}const r=E.origin.createCanvas(t,i),o=r.getContext("2d");return s&&(o.globalAlpha=s),o.drawImage(this.view,0,0,t,i),this.cache=this.use>1?{data:r,params:arguments}:null,r}getPattern(t,i,s,n){const r=E.canvas.createPattern(t,i);try{s&&r.setTransform&&(r.setTransform(s),s=null)}catch{}return n&&(n.transform=s),r}destroy(){this.config={url:""},this.cache=null,this.waitComplete.length=0}}function le(e,t,i,s){i.configurable=i.enumerable=!0,Object.defineProperty(e,t,i)}function j_(e,t){return Object.getOwnPropertyDescriptor(e,t)}function Qb(e){return Object.getOwnPropertyNames(e)}function kt(e,t){return(i,s)=>t1(i,s,e,t&&t(s))}function t1(e,t,i,s){le(e,t,Object.assign({get(){return this.__getAttr(t)},set(r){this.__setAttr(t,r)}},s||{})),X_(e,t,i)}function ve(e){return kt(e)}function Sn(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.matrixChanged||this.__layout.matrixChange())}}))}function N_(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.matrixChanged||this.__layout.matrixChange(),this.__hasAutoLayout=!!(this.origin||this.around||this.flow),this.__local||this.__layout.createLocal())}}))}function V_(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.scaleChanged||this.__layout.scaleChange())}}))}function yc(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&(this.__layout.rotationChanged||this.__layout.rotationChange())}}))}function ct(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s,t)&&Dr(this)}}))}function e1(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(Dr(this),this.__.__removeNaturalSize())}}))}function Dr(e){e.__layout.boxChanged||e.__layout.boxChange(),e.__hasAutoLayout&&(e.__layout.matrixChanged||e.__layout.matrixChange())}function i1(e){return kt(e,t=>({set(i){const s=this.__;s.__pathInputed!==2&&(s.__pathInputed=i?1:0),i||(s.__pathForRender=void 0),this.__setAttr(t,i),Dr(this)}}))}const ce=ct;function ca(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&U_(this)}}))}function U_(e){e.__layout.strokeChanged||e.__layout.strokeChange(),e.__.__useArrow&&Dr(e)}const ii=ca;function G_(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.renderChanged||this.__layout.renderChange()}}))}function Ir(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange())}}))}function s1(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.opacityChanged||this.__layout.opacityChange()),this.mask&&Y_(this)}}))}function n1(e){return kt(e,t=>({set(i){const s=this.visible;if(s===!0&&i===0){if(this.animationOut)return this.__runAnimation("out",()=>ud(this,t,i,s))}else s===0&&i===!0&&this.animation&&this.__runAnimation("in");ud(this,t,i,s),this.mask&&Y_(this)}}))}function Y_(e){const{parent:t}=e;if(t){const{__hasMask:i}=t;t.__updateMask(),i!==t.__hasMask&&t.forceUpdate()}}function ud(e,t,i,s){e.__setAttr(t,i)&&(e.__layout.opacityChanged||e.__layout.opacityChange(),(s===0||i===0)&&Dr(e))}function r1(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.surfaceChanged||this.__layout.surfaceChange(),this.waitParent(()=>{this.parent.__layout.childrenSortChange()}))}}))}function o1(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.boxChanged||this.__layout.boxChange(),this.waitParent(()=>{this.parent.__updateMask(i)}))}}))}function a1(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&this.waitParent(()=>{this.parent.__updateEraser(i)})}}))}function Ps(e){return kt(e,t=>({set(i){this.__setAttr(t,i)&&(this.__layout.hitCanvasChanged=!0,it.showHitView&&(this.__layout.surfaceChanged||this.__layout.surfaceChange()),this.leafer&&this.leafer.updateCursor())}}))}function h1(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.leafer&&this.leafer.updateCursor()}}))}function Ut(e){return(t,i)=>{le(t,"__DataProcessor",{get(){return e}})}}function l1(e){return"set"+e.charAt(0).toUpperCase()+e.slice(1)}function X_(e,t,i){const s=e.__DataProcessor.prototype,n="_"+t,r=l1(t),o={get(){const l=this[n];return l===void 0?i:l},set(l){this[n]=l}};if(i===void 0)o.get=function(){return this[n]};else if(typeof i=="object"){const{clone:l}=gt;o.get=function(){let c=this[n];return c===void 0&&(this[n]=c=l(i)),c}}t==="width"?o.get=function(){const l=this[n];if(l===void 0){const c=this;return c._height&&c.__naturalWidth&&c.__useNaturalRatio?c._height*c.__naturalWidth/c.__naturalHeight:c.__naturalWidth||i}else return l}:t==="height"&&(o.get=function(){const l=this[n];if(l===void 0){const c=this;return c._width&&c.__naturalHeight&&c.__useNaturalRatio?c._width*c.__naturalHeight/c.__naturalWidth:c.__naturalHeight||i}else return l});let a,h=s;for(;!a&&h;)a=j_(h,t),h=h.__proto__;a&&a.set&&(o.set=a.set),s[r]&&(o.set=s[r],delete s[r]),le(s,t,o)}const c1=new it("rewrite"),Ro=[],u1=["destroy","constructor"];function si(e){return(t,i)=>{Ro.push({name:t.constructor.name+"."+i,run:()=>{t[i]=e}})}}function ua(){return e=>{K_()}}function K_(e){Ro.length&&(Ro.forEach(t=>{e&&c1.error(t.name,"需在Class上装饰@rewriteAble()"),t.run()}),Ro.length=0)}setTimeout(()=>K_(!0));function Ke(e,t){return i=>{(e.prototype?Qb(e.prototype):Object.keys(e)).forEach(n=>{!u1.includes(n)&&(!t||!t.includes(n))&&(e.prototype?j_(e.prototype,n).writable&&(i.prototype[n]=e.prototype[n]):i.prototype[n]=e[n])})}}function Gt(){return e=>{aa.register(e)}}function os(){return e=>{wn.register(e)}}const{copy:Vs,toInnerPoint:d1,toOuterPoint:f1,scaleOfOuter:dd,rotateOfOuter:p1,skewOfOuter:_1,multiplyParent:fd,divideParent:pd,getLayout:g1}=G,Ot={},Vt={updateAllMatrix(e,t,i){if(t&&e.__hasAutoLayout&&e.__layout.matrixChanged&&(i=!0),m1(e,t,i),e.isBranch){const{children:s}=e;for(let n=0,r=s.length;n<r;n++)y1(s[n],t,i)}},updateMatrix(e,t,i){const s=e.__layout;t?i&&(s.waitAutoLayout=!0,e.__hasAutoLayout&&(s.matrixChanged=!1)):s.waitAutoLayout&&(s.waitAutoLayout=!1),s.matrixChanged&&e.__updateLocalMatrix(),s.waitAutoLayout||e.__updateWorldMatrix()},updateBounds(e){const t=e.__layout;t.boundsChanged&&e.__updateLocalBounds(),t.waitAutoLayout||e.__updateWorldBounds()},updateAllWorldOpacity(e){if(e.__updateWorldOpacity(),e.isBranch){const{children:t}=e;for(let i=0,s=t.length;i<s;i++)_d(t[i])}},updateAllChange(e){if(_d(e),e.__updateChange(),e.isBranch){const{children:t}=e;for(let i=0,s=t.length;i<s;i++)w1(t[i])}},worldHittable(e){for(;e;){if(!e.__.hittable)return!1;e=e.parent}return!0},moveWorld(e,t,i=0,s,n){const r=typeof t=="object"?Object.assign({},t):{x:t,y:i};s?f1(e.localTransform,r,r,!0):e.parent&&d1(e.parent.worldTransform,r,r,!0),qt.moveLocal(e,r.x,r.y,n)},moveLocal(e,t,i=0,s){typeof t=="object"&&(i=t.y,t=t.x),t+=e.x,i+=e.y,s?e.animate({x:t,y:i},s):(e.x=t,e.y=i)},zoomOfWorld(e,t,i,s,n){qt.zoomOfLocal(e,rh(e,t),i,s,n)},zoomOfLocal(e,t,i,s=i,n){Vs(Ot,e.__localMatrix),dd(Ot,t,i,s),e.origin||e.around?qt.setTransform(e,Ot,n):(gd(e,Ot),e.scaleResize(i,s,n!==!0))},rotateOfWorld(e,t,i){qt.rotateOfLocal(e,rh(e,t),i)},rotateOfLocal(e,t,i){Vs(Ot,e.__localMatrix),p1(Ot,t,i),e.origin||e.around?qt.setTransform(e,Ot):(gd(e,Ot),e.rotation=$t.formatRotation(e.rotation+i))},skewOfWorld(e,t,i,s,n){qt.skewOfLocal(e,rh(e,t),i,s,n)},skewOfLocal(e,t,i,s=0,n){Vs(Ot,e.__localMatrix),_1(Ot,t,i,s),qt.setTransform(e,Ot,n)},transformWorld(e,t,i){Vs(Ot,e.worldTransform),fd(Ot,t),e.parent&&pd(Ot,e.parent.worldTransform),qt.setTransform(e,Ot,i)},transform(e,t,i){Vs(Ot,e.localTransform),fd(Ot,t),qt.setTransform(e,Ot,i)},setTransform(e,t,i){const s=e.__,n=s.origin&&qt.getInnerOrigin(e,s.origin),r=g1(t,n,s.around&&qt.getInnerOrigin(e,s.around));if(i){const o=r.scaleX/e.scaleX,a=r.scaleY/e.scaleY;if(delete r.scaleX,delete r.scaleY,n){D.scale(e.boxBounds,Math.abs(o),Math.abs(a));const h=qt.getInnerOrigin(e,s.origin);H.move(r,n.x-h.x,n.y-h.y)}e.set(r),e.scaleResize(o,a,!1)}else e.set(r)},getFlipTransform(e,t){const i=vr(),s=t==="x"?1:-1;return dd(i,qt.getLocalOrigin(e,"center"),-1*s,1*s),i},getLocalOrigin(e,t){return H.tempToOuterOf(qt.getInnerOrigin(e,t),e.localTransform)},getInnerOrigin(e,t){const i={};return He.toPoint(t,e.boxBounds,i),i},getRelativeWorld(e,t,i){return Vs(Ot,e.worldTransform),pd(Ot,t.worldTransform),i?Ot:Object.assign({},Ot)},drop(e,t,i,s){e.setTransform(qt.getRelativeWorld(e,t,!0),s),t.add(e,i)},hasParent(e,t){if(!t)return!1;for(;e;){if(t===e)return!0;e=e.parent}}},qt=Vt,{updateAllMatrix:y1,updateMatrix:m1,updateAllWorldOpacity:_d,updateAllChange:w1}=qt;function gd(e,t){const{e:i,f:s}=e.__localMatrix;e.x+=t.e-i,e.y+=t.f-s}function rh(e,t){return e.__layout.update(),e.parent?H.tempToInnerOf(t,e.parent.__world):t}const as={worldBounds(e){return e.__world},localBoxBounds(e){return e.__.eraser||e.__.visible===0?null:e.__local||e.__layout},localStrokeBounds(e){return e.__.eraser||e.__.visible===0?null:e.__layout.localStrokeBounds},localRenderBounds(e){return e.__.eraser||e.__.visible===0?null:e.__layout.localRenderBounds},maskLocalBoxBounds(e){return e.__.mask?e.__localBoxBounds:null},maskLocalStrokeBounds(e){return e.__.mask?e.__layout.localStrokeBounds:null},maskLocalRenderBounds(e){return e.__.mask?e.__layout.localRenderBounds:null},excludeRenderBounds(e,t){return!!(t.bounds&&!t.bounds.hit(e.__world,t.matrix)||t.hideBounds&&t.hideBounds.includes(e.__world,t.matrix))}},{updateBounds:yd}=Vt,Ms={sort(e,t){return e.__.zIndex===t.__.zIndex?e.__tempNumber-t.__tempNumber:e.__.zIndex-t.__.zIndex},pushAllChildBranch(e,t){if(e.__tempNumber=1,e.__.__childBranchNumber){const{children:i}=e;for(let s=0,n=i.length;s<n;s++)e=i[s],e.isBranch&&(e.__tempNumber=1,t.add(e),x1(e,t))}},pushAllParent(e,t){const{keys:i}=t;if(i)for(;e.parent&&i[e.parent.innerId]===void 0;)t.add(e.parent),e=e.parent;else for(;e.parent;)t.add(e.parent),e=e.parent},pushAllBranchStack(e,t){let i=t.length;const{children:s}=e;for(let n=0,r=s.length;n<r;n++)s[n].isBranch&&t.push(s[n]);for(let n=i,r=t.length;n<r;n++)md(t[n],t)},updateBounds(e,t){const i=[e];md(e,i),b1(i,t)},updateBoundsByBranchStack(e,t){let i,s;for(let n=e.length-1;n>-1;n--){i=e[n],s=i.children;for(let r=0,o=s.length;r<o;r++)yd(s[r]);t&&t===i||yd(i)}}},{pushAllChildBranch:x1,pushAllBranchStack:md,updateBoundsByBranchStack:b1}=Ms,In={run(e){if(e&&e.length){const t=e.length;for(let i=0;i<t;i++)e[i]();e.length===t?e.length=0:e.splice(0,t)}}},{getRelativeWorld:wd}=Vt,{toOuterOf:uo,getPoints:v1,copy:E1}=D,oh="_localContentBounds",ah="_worldContentBounds",hh="_worldBoxBounds",lh="_worldStrokeBounds";class S1{get contentBounds(){return this._contentBounds||this.boxBounds}set contentBounds(t){this._contentBounds=t}get strokeBounds(){return this._strokeBounds||this.boxBounds}get renderBounds(){return this._renderBounds||this.boxBounds}get localContentBounds(){return uo(this.contentBounds,this.leaf.__localMatrix,this[oh]||(this[oh]={})),this[oh]}get localStrokeBounds(){return this._localStrokeBounds||this}get localRenderBounds(){return this._localRenderBounds||this}get worldContentBounds(){return uo(this.contentBounds,this.leaf.__world,this[ah]||(this[ah]={})),this[ah]}get worldBoxBounds(){return uo(this.boxBounds,this.leaf.__world,this[hh]||(this[hh]={})),this[hh]}get worldStrokeBounds(){return uo(this.strokeBounds,this.leaf.__world,this[lh]||(this[lh]={})),this[lh]}get a(){return 1}get b(){return 0}get c(){return 0}get d(){return 1}get e(){return this.leaf.__.x}get f(){return this.leaf.__.y}get x(){return this.e+this.boxBounds.x}get y(){return this.f+this.boxBounds.y}get width(){return this.boxBounds.width}get height(){return this.boxBounds.height}constructor(t){this.leaf=t,this.boxBounds={x:0,y:0,width:0,height:0},this.leaf.__local&&(this._localRenderBounds=this._localStrokeBounds=this.leaf.__local),this.boxChange(),this.matrixChange()}createLocal(){const t=this.leaf.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0};this._localStrokeBounds||(this._localStrokeBounds=t),this._localRenderBounds||(this._localRenderBounds=t)}update(){const{leafer:t}=this.leaf;if(t)t.ready?t.watcher.changed&&t.layouter.layout():t.start();else{let i=this.leaf;for(;i.parent&&!i.parent.leafer;)i=i.parent;E.layout(i)}}getTransform(t="world"){this.update();const{leaf:i}=this;switch(t){case"world":return i.__world;case"local":return i.__localMatrix;case"inner":return G.defaultMatrix;case"page":t=i.zoomLayer;default:return wd(i,t)}}getBounds(t,i="world"){switch(this.update(),i){case"world":return this.getWorldBounds(t);case"local":return this.getLocalBounds(t);case"inner":return this.getInnerBounds(t);case"page":i=this.leaf.zoomLayer;default:return new tt(this.getInnerBounds(t)).toOuterOf(this.getTransform(i))}}getInnerBounds(t="box"){switch(t){case"render":return this.renderBounds;case"content":if(this.contentBounds)return this.contentBounds;case"box":return this.boxBounds;case"stroke":return this.strokeBounds}}getLocalBounds(t="box"){switch(t){case"render":return this.localRenderBounds;case"stroke":return this.localStrokeBounds;case"content":if(this.contentBounds)return this.localContentBounds;case"box":return this.leaf.__localBoxBounds}}getWorldBounds(t="box"){switch(t){case"render":return this.leaf.__world;case"stroke":return this.worldStrokeBounds;case"content":if(this.contentBounds)return this.worldContentBounds;case"box":return this.worldBoxBounds}}getLayoutBounds(t,i="world",s){const{leaf:n}=this;let r,o,a,h=this.getInnerBounds(t);switch(i){case"world":r=n.getWorldPoint(h),o=n.__world;break;case"local":const{scaleX:l,scaleY:c,rotation:d,skewX:f,skewY:u}=n.__;a={scaleX:l,scaleY:c,rotation:d,skewX:f,skewY:u},r=n.getLocalPointByInner(h);break;case"inner":r=h,o=G.defaultMatrix;break;case"page":i=n.zoomLayer;default:r=n.getWorldPoint(h,i),o=wd(n,i,!0)}if(a||(a=G.getLayout(o)),E1(a,h),H.copy(a,r),s){const{scaleX:l,scaleY:c}=a,d=Math.abs(l),f=Math.abs(c);(d!==1||f!==1)&&(a.scaleX/=d,a.scaleY/=f,a.width*=d,a.height*=f)}return a}getLayoutPoints(t,i="world"){const{leaf:s}=this,n=v1(this.getInnerBounds(t));let r;switch(i){case"world":r=null;break;case"local":r=s.parent;break;case"inner":break;case"page":i=s.zoomLayer;default:r=i}return r!==void 0&&n.forEach(o=>s.innerToWorld(o,null,!1,r)),n}shrinkContent(){const{x:t,y:i,width:s,height:n}=this.boxBounds;this._contentBounds={x:t,y:i,width:s,height:n}}spreadStroke(){const{x:t,y:i,width:s,height:n}=this.strokeBounds;this._strokeBounds={x:t,y:i,width:s,height:n},this._localStrokeBounds={x:t,y:i,width:s,height:n},this.renderSpread||this.spreadRenderCancel()}spreadRender(){const{x:t,y:i,width:s,height:n}=this.renderBounds;this._renderBounds={x:t,y:i,width:s,height:n},this._localRenderBounds={x:t,y:i,width:s,height:n}}shrinkContentCancel(){this._contentBounds=void 0}spreadStrokeCancel(){const t=this.renderBounds===this.strokeBounds;this._strokeBounds=this.boxBounds,this._localStrokeBounds=this.leaf.__localBoxBounds,t&&this.spreadRenderCancel()}spreadRenderCancel(){this._renderBounds=this._strokeBounds,this._localRenderBounds=this._localStrokeBounds}boxChange(){this.boxChanged=!0,this.localBoxChanged||this.localBoxChange(),this.hitCanvasChanged=!0}localBoxChange(){this.localBoxChanged=!0,this.boundsChanged=!0}strokeChange(){this.strokeChanged=!0,this.strokeSpread||(this.strokeSpread=1),this.boundsChanged=!0,this.hitCanvasChanged=!0}renderChange(){this.renderChanged=!0,this.renderSpread||(this.renderSpread=1),this.boundsChanged=!0}scaleChange(){this.scaleChanged=!0,this._scaleOrRotationChange()}rotationChange(){this.rotationChanged=!0,this.affectRotation=!0,this._scaleOrRotationChange()}_scaleOrRotationChange(){this.affectScaleOrRotation=!0,this.matrixChange(),this.leaf.__local||this.createLocal()}matrixChange(){this.matrixChanged=!0,this.localBoxChanged||this.localBoxChange()}surfaceChange(){this.surfaceChanged=!0}opacityChange(){this.opacityChanged=!0,this.surfaceChanged||this.surfaceChange()}childrenSortChange(){this.childrenSortChanged||(this.childrenSortChanged=!0,this.leaf.forceUpdate("surface"))}destroy(){}}class bi{constructor(t,i){this.bubbles=!1,this.type=t,i&&(this.target=i)}stopDefault(){this.isStopDefault=!0,this.origin&&E.event.stopDefault(this.origin)}stopNow(){this.isStopNow=!0,this.isStop=!0,this.origin&&E.event.stopNow(this.origin)}stop(){this.isStop=!0,this.origin&&E.event.stop(this.origin)}}class Et extends bi{constructor(t,i,s){super(t,i),this.parent=s,this.child=i}}Et.ADD="child.add";Et.REMOVE="child.remove";Et.CREATED="created";Et.MOUNTED="mounted";Et.UNMOUNTED="unmounted";Et.DESTROY="destroy";class qe extends bi{constructor(t,i,s,n,r){super(t,i),this.attrName=s,this.oldValue=n,this.newValue=r}}qe.CHANGE="property.change";qe.LEAFER_CHANGE="property.leafer_change";class be extends bi{constructor(t,i){super(t),Object.assign(this,i)}}be.LOAD="image.load";be.LOADED="image.loaded";be.ERROR="image.error";class ji extends bi{get bigger(){if(!this.old)return!0;const{width:t,height:i}=this.old;return this.width>=t&&this.height>=i}get smaller(){return!this.bigger}get samePixelRatio(){return this.old?this.pixelRatio===this.old.pixelRatio:!0}constructor(t,i){typeof t=="object"?(super(ji.RESIZE),Object.assign(this,t)):super(t),this.old=i}}ji.RESIZE="resize";class Le extends bi{constructor(t,i){super(t),this.data=i}}Le.REQUEST="watch.request";Le.DATA="watch.data";class J extends bi{constructor(t,i,s){super(t),i&&(this.data=i,this.times=s)}}J.REQUEST="layout.request";J.START="layout.start";J.BEFORE="layout.before";J.LAYOUT="layout";J.AFTER="layout.after";J.AGAIN="layout.again";J.END="layout.end";class K extends bi{constructor(t,i,s,n){super(t),i&&(this.times=i),s&&(this.renderBounds=s,this.renderOptions=n)}}K.REQUEST="render.request";K.CHILD_START="render.child_start";K.START="render.start";K.BEFORE="render.before";K.RENDER="render";K.AFTER="render.after";K.AGAIN="render.again";K.END="render.end";K.NEXT="render.next";class Pt extends bi{}Pt.START="leafer.start";Pt.BEFORE_READY="leafer.before_ready";Pt.READY="leafer.ready";Pt.AFTER_READY="leafer.after_ready";Pt.VIEW_READY="leafer.view_ready";Pt.VIEW_COMPLETED="leafer.view_completed";Pt.STOP="leafer.stop";Pt.RESTART="leafer.restart";Pt.END="leafer.end";const xd={};class T1{set event(t){this.on(t)}on(t,i,s){if(!i){let c,d=t;for(let f in d)c=d[f],c instanceof Array?this.on(f,c[0],c[1]):this.on(f,c);return}let n,r;s&&(s==="once"?r=!0:typeof s=="boolean"?n=s:(n=s.capture,r=s.once));let o;const a=ch(this,n,!0),h=typeof t=="string"?t.split(" "):t,l=r?{listener:i,once:r}:{listener:i};h.forEach(c=>{c&&(o=a[c],o?o.findIndex(d=>d.listener===i)===-1&&o.push(l):a[c]=[l])})}off(t,i,s){if(t){const n=typeof t=="string"?t.split(" "):t;if(i){let r;s&&(r=typeof s=="boolean"?s:s==="once"?!1:s.capture);let o,a;const h=ch(this,r);n.forEach(l=>{l&&(o=h[l],o&&(a=o.findIndex(c=>c.listener===i),a>-1&&o.splice(a,1),o.length||delete h[l]))})}else{const{__bubbleMap:r,__captureMap:o}=this;n.forEach(a=>{r&&delete r[a],o&&delete o[a]})}}else this.__bubbleMap=this.__captureMap=void 0}on_(t,i,s,n){return s&&(i=i.bind(s)),this.on(t,i,n),{type:t,current:this,listener:i,options:n}}off_(t){if(!t)return;const i=t instanceof Array?t:[t];i.forEach(s=>s.current.off(s.type,s.listener,s.options)),i.length=0}once(t,i,s){this.on(t,i,{once:!0,capture:s})}emit(t,i,s){!i&&wn.has(t)&&(i=wn.get(t,{type:t,target:this,current:this}));const r=ch(this,s)[t];if(r){let o;for(let a=0,h=r.length;a<h&&!((o=r[a])&&(o.listener(i),o.once&&(this.off(t,o.listener,s),a--,h--),i&&i.isStopNow));a++);}this.syncEventer&&this.syncEventer.emitEvent(i,s)}emitEvent(t,i){t.current=this,this.emit(t.type,t,i)}hasEvent(t,i){if(this.syncEventer&&this.syncEventer.hasEvent(t,i))return!0;const{__bubbleMap:s,__captureMap:n}=this,r=s&&s[t],o=n&&n[t];return!!(i===void 0?r||o:i?o:r)}destroy(){this.__captureMap=this.__bubbleMap=this.syncEventer=null}}function ch(e,t,i){if(t){const{__captureMap:s}=e;return s||(i?e.__captureMap={}:xd)}else{const{__bubbleMap:s}=e;return s||(i?e.__bubbleMap={}:xd)}}const{on:C1,on_:B1,off:R1,off_:k1,once:L1,emit:O1,emitEvent:P1,hasEvent:M1,destroy:A1}=T1.prototype,$1={on:C1,on_:B1,off:R1,off_:k1,once:L1,emit:O1,emitEvent:P1,hasEvent:M1,destroyEventer:A1},{isFinite:D1}=Number,I1=it.get("setAttr"),W1={__setAttr(e,t,i){if(this.leaferIsCreated){const s=this.__.__getInput(e);if(i&&!D1(t)&&t!==void 0&&(I1.warn(this.innerName,e,t),t=void 0),typeof t=="object"||s!==t){this.__realSetAttr(e,t);const{CHANGE:n}=qe,r=new qe(n,this,e,s,t);return this.isLeafer?this.emitEvent(new qe(qe.LEAFER_CHANGE,this,e,s,t)):this.hasEvent(n)&&this.emitEvent(r),this.leafer.emitEvent(r),!0}else return!1}else return this.__realSetAttr(e,t),!0},__realSetAttr(e,t){const i=this.__;i[e]=t,this.__proxyData&&this.setProxyAttr(e,t),i.normalStyle&&(this.lockNormalStyle||i.normalStyle[e]===void 0||(i.normalStyle[e]=t))},__getAttr(e){return this.__proxyData?this.getProxyAttr(e):this.__.__get(e)}},{setLayout:F1,multiplyParent:z1,translateInner:H1,defaultWorld:j1}=G,{toPoint:N1,tempPoint:uh}=He,V1={__updateWorldMatrix(){z1(this.__local||this.__layout,this.parent?this.parent.__world:j1,this.__world,!!this.__layout.affectScaleOrRotation,this.__,this.parent&&this.parent.__)},__updateLocalMatrix(){if(this.__local){const e=this.__layout,t=this.__local,i=this.__;e.affectScaleOrRotation&&(e.scaleChanged||e.rotationChanged)&&(F1(t,i,null,null,e.affectRotation),e.scaleChanged=e.rotationChanged=!1),t.e=i.x+i.offsetX,t.f=i.y+i.offsetY,(i.around||i.origin)&&(N1(i.around||i.origin,e.boxBounds,uh),H1(t,-uh.x,-uh.y,!i.around))}this.__layout.matrixChanged=!1}},{updateMatrix:U1,updateAllMatrix:bd}=Vt,{updateBounds:vd}=Ms,{toOuterOf:fo,copyAndSpread:Ed,copy:G1}=D,{toBounds:Y1}=_c,X1={__updateWorldBounds(){fo(this.__layout.renderBounds,this.__world,this.__world),this.__layout.resized&&(this.__onUpdateSize(),this.__layout.resized=!1)},__updateLocalBounds(){const e=this.__layout;e.boxChanged&&(this.__.__pathInputed||this.__updatePath(),this.__updateRenderPath(),this.__updateBoxBounds(),e.resized=!0),e.localBoxChanged&&(this.__local&&this.__updateLocalBoxBounds(),e.localBoxChanged=!1,e.strokeSpread&&(e.strokeChanged=!0),e.renderSpread&&(e.renderChanged=!0),this.parent&&this.parent.__layout.boxChange()),e.boxChanged=!1,e.strokeChanged&&(e.strokeSpread=this.__updateStrokeSpread(),e.strokeSpread?(e.strokeBounds===e.boxBounds&&e.spreadStroke(),this.__updateStrokeBounds(),this.__updateLocalStrokeBounds()):e.spreadStrokeCancel(),e.strokeChanged=!1,(e.renderSpread||e.strokeSpread!==e.strokeBoxSpread)&&(e.renderChanged=!0),this.parent&&this.parent.__layout.strokeChange(),e.resized=!0),e.renderChanged&&(e.renderSpread=this.__updateRenderSpread(),e.renderSpread?((e.renderBounds===e.boxBounds||e.renderBounds===e.strokeBounds)&&e.spreadRender(),this.__updateRenderBounds(),this.__updateLocalRenderBounds()):e.spreadRenderCancel(),e.renderChanged=!1,this.parent&&this.parent.__layout.renderChange()),e.boundsChanged=!1},__updateLocalBoxBounds(){this.__hasMotionPath&&this.__updateMotionPath(),this.__hasAutoLayout&&this.__updateAutoLayout(),fo(this.__layout.boxBounds,this.__local,this.__local)},__updateLocalStrokeBounds(){fo(this.__layout.strokeBounds,this.__localMatrix,this.__layout.localStrokeBounds)},__updateLocalRenderBounds(){fo(this.__layout.renderBounds,this.__localMatrix,this.__layout.localRenderBounds)},__updateBoxBounds(){const e=this.__layout.boxBounds,t=this.__;t.__pathInputed?Y1(t.path,e):(e.x=0,e.y=0,e.width=t.width,e.height=t.height)},__updateAutoLayout(){this.__layout.matrixChanged=!0,this.isBranch?(this.leaferIsReady&&this.leafer.layouter.addExtra(this),this.__.flow?(this.__layout.boxChanged&&this.__updateFlowLayout(),bd(this),vd(this,this),this.__.__autoSide&&this.__updateBoxBounds(!0)):(bd(this),vd(this,this))):U1(this)},__updateNaturalSize(){const{__:e,__layout:t}=this;e.__naturalWidth=t.boxBounds.width,e.__naturalHeight=t.boxBounds.height},__updateStrokeBounds(){const e=this.__layout;Ed(e.strokeBounds,e.boxBounds,e.strokeBoxSpread)},__updateRenderBounds(){const e=this.__layout;e.renderSpread>0?Ed(e.renderBounds,e.boxBounds,e.renderSpread):G1(e.renderBounds,e.strokeBounds)}},K1={__render(e,t){if(this.__worldOpacity)if(e.setWorld(this.__nowWorld=this.__getNowWorld(t)),e.opacity=this.__.opacity,this.__.__single){if(this.__.eraser==="path")return this.__renderEraser(e,t);const i=e.getSameCanvas(!0,!0);this.__draw(i,t),this.__worldFlipped?e.copyWorldByReset(i,this.__nowWorld,null,this.__.__blendMode,!0):e.copyWorldToInner(i,this.__nowWorld,this.__layout.renderBounds,this.__.__blendMode),i.recycle(this.__nowWorld)}else this.__draw(e,t)},__clip(e,t){this.__worldOpacity&&(e.setWorld(this.__nowWorld=this.__getNowWorld(t)),this.__drawRenderPath(e),this.windingRule?e.clip(this.windingRule):e.clip())},__updateWorldOpacity(){this.__worldOpacity=this.__.visible?this.parent?this.parent.__worldOpacity*this.__.opacity:this.__.opacity:0,this.__layout.opacityChanged&&(this.__layout.opacityChanged=!1)}},{excludeRenderBounds:Sd}=as,q1={__updateChange(){const{__layout:e}=this;e.childrenSortChanged&&(this.__updateSortChildren(),e.childrenSortChanged=!1),this.__.__checkSingle()},__render(e,t){if(this.__nowWorld=this.__getNowWorld(t),this.__worldOpacity)if(this.__.__single){if(this.__.eraser==="path")return this.__renderEraser(e,t);const i=e.getSameCanvas(!1,!0);this.__renderBranch(i,t);const s=this.__nowWorld;e.opacity=this.__.opacity,e.copyWorldByReset(i,s,s,this.__.__blendMode,!0),i.recycle(s)}else this.__renderBranch(e,t)},__renderBranch(e,t){if(this.__hasMask)this.__renderMask(e,t);else{const{children:i}=this;for(let s=0,n=i.length;s<n;s++)Sd(i[s],t)||i[s].__render(e,t)}},__clip(e,t){if(this.__worldOpacity){const{children:i}=this;for(let s=0,n=i.length;s<n;s++)Sd(i[s],t)||i[s].__clip(e,t)}}},{LEAF:Z1,create:J1}=Ii,{toInnerPoint:Q1,toOuterPoint:t0,multiplyParent:e0}=G,{toOuterOf:Td}=D,{copy:Cd,move:Bd}=H,{moveLocal:i0,zoomOfLocal:s0,rotateOfLocal:n0,skewOfLocal:r0,moveWorld:Rd,zoomOfWorld:o0,rotateOfWorld:a0,skewOfWorld:h0,transform:kd,transformWorld:l0,setTransform:c0,getFlipTransform:u0,getLocalOrigin:dh,getRelativeWorld:d0,drop:f0}=Vt;let ks=class{get tag(){return this.__tag}set tag(t){}get __tag(){return"Leaf"}get innerName(){return this.__.name||this.tag+this.innerId}get __DataProcessor(){return M_}get __LayoutProcessor(){return S1}get leaferIsCreated(){return this.leafer&&this.leafer.created}get leaferIsReady(){return this.leafer&&this.leafer.ready}get isLeafer(){return!1}get isBranch(){return!1}get isBranchLeaf(){return!1}get __localMatrix(){return this.__local||this.__layout}get __localBoxBounds(){return this.__local||this.__layout}get worldTransform(){return this.__layout.getTransform("world")}get localTransform(){return this.__layout.getTransform("local")}get boxBounds(){return this.getBounds("box","inner")}get renderBounds(){return this.getBounds("render","inner")}get worldBoxBounds(){return this.getBounds("box")}get worldStrokeBounds(){return this.getBounds("stroke")}get worldRenderBounds(){return this.getBounds("render")}get worldOpacity(){return this.__layout.update(),this.__worldOpacity}get __worldFlipped(){return this.__world.scaleX<0||this.__world.scaleY<0}get __onlyHitMask(){return this.__hasMask&&!this.__.hitChildren}get __ignoreHitWorld(){return(this.__hasMask||this.__hasEraser)&&this.__.hitChildren}get __inLazyBounds(){const{leafer:t}=this;return t&&t.created&&t.lazyBounds.hit(this.__world)}get pathInputed(){return this.__.__pathInputed}set event(t){this.on(t)}constructor(t){this.innerId=J1(Z1),this.reset(t),this.__bubbleMap&&this.__emitLifeEvent(Et.CREATED)}reset(t){this.leafer&&this.leafer.forceRender(this.__world),this.__world={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0,scaleX:1,scaleY:1},t!==null&&(this.__local={a:1,b:0,c:0,d:1,e:0,f:0,x:0,y:0,width:0,height:0}),this.__worldOpacity=1,this.__=new this.__DataProcessor(this),this.__layout=new this.__LayoutProcessor(this),this.__level&&this.resetCustom(),t&&(t.__&&(t=t.toJSON()),t.children?this.set(t):Object.assign(this,t))}resetCustom(){this.__hasMask=this.__hasEraser=null,this.forceUpdate()}waitParent(t,i){i&&(t=t.bind(i)),this.parent?t():this.on(Et.ADD,t,"once")}waitLeafer(t,i){i&&(t=t.bind(i)),this.leafer?t():this.on(Et.MOUNTED,t,"once")}nextRender(t,i,s){this.leafer?this.leafer.nextRender(t,i,s):this.waitLeafer(()=>this.leafer.nextRender(t,i,s))}removeNextRender(t){this.nextRender(t,null,"off")}__bindLeafer(t){if(this.isLeafer&&t!==null&&(t=this),this.leafer&&!t&&this.leafer.leafs--,this.leafer=t,t?(t.leafs++,this.__level=this.parent?this.parent.__level+1:1,this.animation&&this.__runAnimation("in"),this.__bubbleMap&&this.__emitLifeEvent(Et.MOUNTED)):this.__emitLifeEvent(Et.UNMOUNTED),this.isBranch){const{children:i}=this;for(let s=0,n=i.length;s<n;s++)i[s].__bindLeafer(t)}}set(t,i){}get(t){}setAttr(t,i){this[t]=i}getAttr(t){return this[t]}getComputedAttr(t){return this.__[t]}toJSON(t){return t&&this.__layout.update(),this.__.__getInputData(null,t)}toString(t){return JSON.stringify(this.toJSON(t))}toSVG(){}__SVG(t){}toHTML(){}__setAttr(t,i){return!0}__getAttr(t){}setProxyAttr(t,i){}getProxyAttr(t){}find(t,i){}findTag(t){}findOne(t,i){}findId(t){}focus(t){}updateState(){}updateLayout(){this.__layout.update()}forceUpdate(t){t===void 0?t="width":t==="surface"&&(t="blendMode");const i=this.__.__getInput(t);this.__[t]=i===void 0?null:void 0,this[t]=i}forceRender(t,i){this.forceUpdate("surface")}__updateWorldMatrix(){}__updateLocalMatrix(){}__updateWorldBounds(){}__updateLocalBounds(){}__updateLocalBoxBounds(){}__updateLocalStrokeBounds(){}__updateLocalRenderBounds(){}__updateBoxBounds(){}__updateContentBounds(){}__updateStrokeBounds(){}__updateRenderBounds(){}__updateAutoLayout(){}__updateFlowLayout(){}__updateNaturalSize(){}__updateStrokeSpread(){return 0}__updateRenderSpread(){return 0}__onUpdateSize(){}__updateEraser(t){this.__hasEraser=t?!0:this.children.some(i=>i.__.eraser)}__renderEraser(t,i){t.save(),this.__clip(t,i);const{renderBounds:s}=this.__layout;t.clearRect(s.x,s.y,s.width,s.height),t.restore()}__updateMask(t){this.__hasMask=this.children.some(i=>i.__.mask&&i.__.visible&&i.__.opacity)}__renderMask(t,i){}__getNowWorld(t){if(t.matrix){this.__cameraWorld||(this.__cameraWorld={});const i=this.__cameraWorld;return e0(this.__world,t.matrix,i,void 0,this.__world),Td(this.__layout.renderBounds,i,i),i}else return this.__world}getTransform(t){return this.__layout.getTransform(t||"local")}getBounds(t,i){return this.__layout.getBounds(t,i)}getLayoutBounds(t,i,s){return this.__layout.getLayoutBounds(t,i,s)}getLayoutPoints(t,i){return this.__layout.getLayoutPoints(t,i)}getWorldBounds(t,i,s){const n=i?d0(this,i):this.worldTransform,r=s?t:{};return Td(t,n,r),r}worldToLocal(t,i,s,n){this.parent?this.parent.worldToInner(t,i,s,n):i&&Cd(i,t)}localToWorld(t,i,s,n){this.parent?this.parent.innerToWorld(t,i,s,n):i&&Cd(i,t)}worldToInner(t,i,s,n){n&&(n.innerToWorld(t,i,s),t=i||t),Q1(this.worldTransform,t,i,s)}innerToWorld(t,i,s,n){t0(this.worldTransform,t,i,s),n&&n.worldToInner(i||t,null,s)}getBoxPoint(t,i,s,n){return this.getBoxPointByInner(this.getInnerPoint(t,i,s,n),null,null,!0)}getBoxPointByInner(t,i,s,n){const r=n?t:Object.assign({},t),{x:o,y:a}=this.boxBounds;return Bd(r,-o,-a),r}getInnerPoint(t,i,s,n){const r=n?t:{};return this.worldToInner(t,r,s,i),r}getInnerPointByBox(t,i,s,n){const r=n?t:Object.assign({},t),{x:o,y:a}=this.boxBounds;return Bd(r,o,a),r}getInnerPointByLocal(t,i,s,n){return this.getInnerPoint(t,this.parent,s,n)}getLocalPoint(t,i,s,n){const r=n?t:{};return this.worldToLocal(t,r,s,i),r}getLocalPointByInner(t,i,s,n){return this.getWorldPoint(t,this.parent,s,n)}getPagePoint(t,i,s,n){return(this.leafer?this.leafer.zoomLayer:this).getInnerPoint(t,i,s,n)}getWorldPoint(t,i,s,n){const r=n?t:{};return this.innerToWorld(t,r,s,i),r}getWorldPointByBox(t,i,s,n){return this.getWorldPoint(this.getInnerPointByBox(t,null,null,n),i,s,!0)}getWorldPointByLocal(t,i,s,n){const r=n?t:{};return this.localToWorld(t,r,s,i),r}getWorldPointByPage(t,i,s,n){return(this.leafer?this.leafer.zoomLayer:this).getWorldPoint(t,i,s,n)}setTransform(t,i){c0(this,t,i)}transform(t,i){kd(this,t,i)}move(t,i,s){i0(this,t,i,s)}moveInner(t,i,s){Rd(this,t,i,!0,s)}scaleOf(t,i,s,n){s0(this,dh(this,t),i,s,n)}rotateOf(t,i){n0(this,dh(this,t),i)}skewOf(t,i,s,n){r0(this,dh(this,t),i,s,n)}transformWorld(t,i){l0(this,t,i)}moveWorld(t,i,s){Rd(this,t,i,!1,s)}scaleOfWorld(t,i,s,n){o0(this,t,i,s,n)}rotateOfWorld(t,i){a0(this,t,i)}skewOfWorld(t,i,s,n){h0(this,t,i,s,n)}flip(t){kd(this,u0(this,t))}scaleResize(t,i=t,s){this.scaleX*=t,this.scaleY*=i}__scaleResize(t,i){}resizeWidth(t){}resizeHeight(t){}__hitWorld(t){return!0}__hit(t){return!0}__hitFill(t){return!0}__hitStroke(t,i){return!0}__hitPixel(t){return!0}__drawHitPath(t){}__updateHitCanvas(){}__render(t,i){}__drawFast(t,i){}__draw(t,i){}__clip(t,i){}__renderShape(t,i,s,n){}__updateWorldOpacity(){}__updateChange(){}__drawPath(t){}__drawRenderPath(t){}__updatePath(){}__updateRenderPath(){}getMotionPathData(){return St.need("path")}getMotionPoint(t){return St.need("path")}getMotionTotal(){return 0}__updateMotionPath(){}__runAnimation(t,i){}__updateSortChildren(){}add(t,i){}remove(t,i){this.parent&&this.parent.remove(this,i)}dropTo(t,i,s){f0(this,t,i,s)}on(t,i,s){}off(t,i,s){}on_(t,i,s,n){}off_(t){}once(t,i,s){}emit(t,i,s){}emitEvent(t,i){}hasEvent(t,i){return!1}static changeAttr(t,i,s){s?this.addAttr(t,i,s):X_(this.prototype,t,i)}static addAttr(t,i,s){s||(s=ct),s(i)(this.prototype,t)}__emitLifeEvent(t){this.hasEvent(t)&&this.emitEvent(new Et(t,this,this.parent))}destroy(){this.destroyed||(this.parent&&this.remove(),this.children&&this.clear(),this.__emitLifeEvent(Et.DESTROY),this.__.destroy(),this.__layout.destroy(),this.destroyEventer(),this.destroyed=!0)}};ks=W([Ke(W1),Ke(V1),Ke(X1),Ke($1),Ke(K1)],ks);const{setListWithFn:fh}=D,{sort:p0}=Ms,{localBoxBounds:_0,localStrokeBounds:g0,localRenderBounds:y0,maskLocalBoxBounds:m0,maskLocalStrokeBounds:w0,maskLocalRenderBounds:x0}=as,b0=new it("Branch");let Sl=class extends ks{__updateStrokeSpread(){const{children:t}=this;for(let i=0,s=t.length;i<s;i++)if(t[i].__layout.strokeSpread)return 1;return 0}__updateRenderSpread(){const{children:t}=this;for(let i=0,s=t.length;i<s;i++)if(t[i].__layout.renderSpread)return 1;return 0}__updateBoxBounds(){fh(this.__layout.boxBounds,this.children,this.__hasMask?m0:_0)}__updateStrokeBounds(){fh(this.__layout.strokeBounds,this.children,this.__hasMask?w0:g0)}__updateRenderBounds(){fh(this.__layout.renderBounds,this.children,this.__hasMask?x0:y0)}__updateSortChildren(){let t;const{children:i}=this;if(i.length>1){for(let s=0,n=i.length;s<n;s++)i[s].__tempNumber=s,i[s].__.zIndex&&(t=!0);i.sort(p0),this.__layout.affectChildrenSort=t}}add(t,i){if(t===this||t.destroyed)return b0.warn("add self or destroyed");const s=i===void 0;if(!t.__){if(t instanceof Array)return t.forEach(r=>{this.add(r,i),s||i++});t=aa.get(t.tag,t)}t.parent&&t.parent.remove(t),t.parent=this,s?this.children.push(t):this.children.splice(i,0,t),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||0)+1);const n=t.__layout;n.boxChanged||n.boxChange(),n.matrixChanged||n.matrixChange(),t.__bubbleMap&&t.__emitLifeEvent(Et.ADD),this.leafer&&(t.__bindLeafer(this.leafer),this.leafer.created&&this.__emitChildEvent(Et.ADD,t)),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}addMany(...t){this.add(t)}remove(t,i){t?t.__?t.animationOut?t.__runAnimation("out",()=>this.__remove(t,i)):this.__remove(t,i):this.find(t).forEach(s=>this.remove(s,i)):t===void 0&&super.remove(null,i)}removeAll(t){const{children:i}=this;i.length&&(this.children=[],this.__preRemove(),this.__.__childBranchNumber=0,i.forEach(s=>{this.__realRemoveChild(s),t&&s.destroy()}))}clear(){this.removeAll(!0)}__remove(t,i){const s=this.children.indexOf(t);s>-1&&(this.children.splice(s,1),t.isBranch&&(this.__.__childBranchNumber=(this.__.__childBranchNumber||1)-1),this.__preRemove(),this.__realRemoveChild(t),i&&t.destroy())}__preRemove(){this.__hasMask&&this.__updateMask(),this.__hasEraser&&this.__updateEraser(),this.__layout.boxChange(),this.__layout.affectChildrenSort&&this.__layout.childrenSortChange()}__realRemoveChild(t){t.__emitLifeEvent(Et.REMOVE),t.parent=null,this.leafer&&(t.__bindLeafer(null),this.leafer.created&&(this.__emitChildEvent(Et.REMOVE,t),this.leafer.hitCanvasManager&&this.leafer.hitCanvasManager.clear()))}__emitChildEvent(t,i){const s=new Et(t,i,this);this.hasEvent(t)&&!this.isLeafer&&this.emitEvent(s),this.leafer.emitEvent(s)}};Sl=W([Ke(q1)],Sl);class et{get length(){return this.list.length}constructor(t){this.reset(),t&&(t instanceof Array?this.addList(t):this.add(t))}has(t){return t&&this.keys[t.innerId]!==void 0}indexAt(t){return this.list[t]}indexOf(t){const i=this.keys[t.innerId];return i===void 0?-1:i}add(t){const{list:i,keys:s}=this;s[t.innerId]===void 0&&(i.push(t),s[t.innerId]=i.length-1)}addAt(t,i=0){const{keys:s}=this;if(s[t.innerId]===void 0){const{list:n}=this;for(let r=i,o=n.length;r<o;r++)s[n[r].innerId]++;i===0?n.unshift(t):(i>n.length&&(i=n.length),n.splice(i,0,t)),s[t.innerId]=i}}addList(t){for(let i=0;i<t.length;i++)this.add(t[i])}remove(t){const{list:i}=this;let s;for(let n=0,r=i.length;n<r;n++)s!==void 0?this.keys[i[n].innerId]=n-1:i[n].innerId===t.innerId&&(s=n,delete this.keys[t.innerId]);s!==void 0&&i.splice(s,1)}sort(t){const{list:i}=this;t?i.sort((s,n)=>n.__level-s.__level):i.sort((s,n)=>s.__level-n.__level)}forEach(t){this.list.forEach(t)}clone(){const t=new et;return t.list=[...this.list],t.keys=Object.assign({},this.keys),t}update(){this.keys={};const{list:t,keys:i}=this;for(let s=0,n=t.length;s<n;s++)i[t[s].innerId]=s}reset(){this.list=[],this.keys={}}destroy(){this.reset()}}class q_{get length(){return this._length}constructor(t){this._length=0,this.reset(),t&&(t instanceof Array?this.addList(t):this.add(t))}has(t){return this.keys[t.innerId]!==void 0}without(t){return this.keys[t.innerId]===void 0}sort(t){const{levels:i}=this;t?i.sort((s,n)=>n-s):i.sort((s,n)=>s-n)}addList(t){t.forEach(i=>{this.add(i)})}add(t){const{keys:i,levelMap:s}=this;i[t.innerId]||(i[t.innerId]=1,s[t.__level]?s[t.__level].push(t):(s[t.__level]=[t],this.levels.push(t.__level)),this._length++)}forEach(t){let i;this.levels.forEach(s=>{i=this.levelMap[s];for(let n=0,r=i.length;n<r;n++)t(i[n])})}reset(){this.levelMap={},this.keys={},this.levels=[],this._length=0}destroy(){this.levelMap=null}}function m(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function Wr(e){return kt(e,t=>({set(i){this.__setAttr(t,i),i&&(this.__.__useEffect=!0),this.__layout.renderChanged||this.__layout.renderChange()}}))}function Fr(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.boxChanged||this.__layout.boxChange(),this.__updateSize()}}))}function v0(){return(e,t)=>{const i="_"+t;le(e,t,{set(s){this.isLeafer&&(this[i]=s)},get(){return this.isApp?this.tree.zoomLayer:this.isLeafer?this[i]||this:this.leafer&&this.leafer.zoomLayer}})}}const mc={},Xt={},Ld={number(e,t){return typeof e=="object"?e.type==="percent"?e.value*t:e.value:e}},wc={},Rt={},je={},es={},Uo={},Di={},_t={setStyleName(e,t,i){return St.need("state")},set(e,t){return St.need("state")}},{parse:E0,objectToCanvasData:S0}=Rs,Od={},Pd=it.get("UIData");class Ni extends M_{get scale(){const{scaleX:t,scaleY:i}=this;return t!==i?{x:t,y:i}:t}get __strokeWidth(){const{strokeWidth:t,strokeWidthFixed:i}=this;if(i){const s=this.__leaf;let{scaleX:n}=s.__nowWorld||s.__world;return n<0&&(n=-n),n>1?t/n:t}else return t}get __hasStroke(){return this.stroke&&this.strokeWidth}get __hasMultiPaint(){const t=this;return t.__isFills&&t.fill.length>1||t.__isStrokes&&t.stroke.length>1||t.__useEffect?!0:t.fill&&this.__hasStroke}get __clipAfterFill(){const t=this;return t.cornerRadius||t.innerShadow||t.__pathInputed}get __autoWidth(){return!this._width}get __autoHeight(){return!this._height}get __autoSide(){return!this._width||!this._height}get __autoSize(){return!this._width&&!this._height}setVisible(t){this._visible=t;const{leafer:i}=this.__leaf;i&&(i.watcher.hasVisible=!0)}setWidth(t){t<0?(this._width=-t,this.__leaf.scaleX*=-1,Pd.warn("width < 0, instead -scaleX ",this)):this._width=t}setHeight(t){t<0?(this._height=-t,this.__leaf.scaleY*=-1,Pd.warn("height < 0, instead -scaleY",this)):this._height=t}setFill(t){this.__naturalWidth&&this.__removeNaturalSize(),typeof t=="string"||!t?(this.__isFills&&(this.__removeInput("fill"),je.recycleImage("fill",this),this.__isFills=!1,this.__pixelFill&&(this.__pixelFill=!1)),this._fill=t):typeof t=="object"&&(this.__setInput("fill",t),this.__leaf.__layout.boxChanged||this.__leaf.__layout.boxChange(),this.__isFills=!0,this._fill||(this._fill=Od))}setStroke(t){typeof t=="string"||!t?(this.__isStrokes&&(this.__removeInput("stroke"),je.recycleImage("stroke",this),this.__isStrokes=!1,this.__pixelStroke&&(this.__pixelStroke=!1)),this._stroke=t):typeof t=="object"&&(this.__setInput("stroke",t),this.__leaf.__layout.boxChanged||this.__leaf.__layout.boxChange(),this.__isStrokes=!0,this._stroke||(this._stroke=Od))}setPath(t){const i=typeof t=="string";i||t&&typeof t[0]=="object"?(this.__setInput("path",t),this._path=i?E0(t):S0(t)):(this.__input&&this.__removeInput("path"),this._path=t)}setShadow(t){this.__setInput("shadow",t),t instanceof Array?(t.some(i=>i.visible===!1)&&(t=t.filter(i=>i.visible!==!1)),this._shadow=t.length?t:null):this._shadow=t&&t.visible!==!1?[t]:null}setInnerShadow(t){this.__setInput("innerShadow",t),t instanceof Array?(t.some(i=>i.visible===!1)&&(t=t.filter(i=>i.visible!==!1)),this._innerShadow=t.length?t:null):this._innerShadow=t&&t.visible!==!1?[t]:null}__computePaint(){const{fill:t,stroke:i}=this.__input;t&&Rt.compute("fill",this.__leaf),i&&Rt.compute("stroke",this.__leaf),this.__needComputePaint=!1}}class da extends Ni{}class Z_ extends da{get __boxStroke(){return!this.__pathInputed}get __drawAfterFill(){const t=this;return t.overflow==="hide"&&(t.__clipAfterFill||t.innerShadow)&&t.__leaf.children.length}get __clipAfterFill(){return this.__leaf.isOverflow||super.__clipAfterFill}}class T0 extends da{__getInputData(t,i){const s=super.__getInputData(t,i);return Fe.forEach(n=>delete s[n]),s}}class C0 extends Z_{}class J_ extends Ni{}class xc extends Ni{get __boxStroke(){return!this.__pathInputed}}class B0 extends Ni{get __boxStroke(){return!this.__pathInputed}}class R0 extends Ni{}class k0 extends Ni{}class L0 extends Ni{get __pathInputed(){return 2}}class O0 extends da{}const P0={thin:100,"extra-light":200,light:300,normal:400,medium:500,"semi-bold":600,bold:700,"extra-bold":800,black:900};class M0 extends Ni{get __useNaturalRatio(){return!1}setFontWeight(t){typeof t=="string"?(this.__setInput("fontWeight",t),this._fontWeight=P0[t]||400):(this.__input&&this.__removeInput("fontWeight"),this._fontWeight=t)}}class Q_ extends xc{setUrl(t){this.__setImageFill(t),this._url=t}__setImageFill(t){this.__leaf.image&&(this.__leaf.image=null),this.fill=t?{type:"image",mode:"stretch",url:t}:void 0}__getData(){const t=super.__getData();return delete t.fill,t}__getInputData(t,i){const s=super.__getInputData(t,i);return delete s.fill,s}}class A0 extends xc{get __isCanvas(){return!0}get __drawAfterFill(){return!0}__getInputData(t,i){const s=super.__getInputData(t,i);return s.url=this.__leaf.canvas.toDataURL("image/png"),s}}const $0={__updateStrokeSpread(){let e=0,t=0;const i=this.__,{strokeAlign:s,strokeWidth:n}=i;if((i.stroke||i.hitStroke==="all")&&n&&s!=="inside"&&(t=e=s==="center"?n/2:n,!i.__boxStroke)){const r=i.__isLinePath?0:10*e,o=i.strokeCap==="none"?0:n;e+=Math.max(r,o)}return i.__useArrow&&(e+=n*5),this.__layout.strokeBoxSpread=t,e},__updateRenderSpread(){let e=0;const{shadow:t,innerShadow:i,blur:s,backgroundBlur:n}=this.__;t&&t.forEach(o=>e=Math.max(e,Math.max(Math.abs(o.y),Math.abs(o.x))+(o.spread>0?o.spread:0)+o.blur*1.5)),s&&(e=Math.max(e,s));let r=e=Math.ceil(e);return i&&i.forEach(o=>r=Math.max(r,Math.max(Math.abs(o.y),Math.abs(o.x))+(o.spread<0?-o.spread:0)+o.blur*1.5)),n&&(r=Math.max(r,n)),this.__layout.renderShapeSpread=r,e+(this.__layout.strokeSpread||0)}},D0={__updateChange(){const e=this.__;if(e.__useEffect){const{shadow:i,innerShadow:s,blur:n,backgroundBlur:r}=this.__;e.__useEffect=!!(i||s||n||r)}e.__checkSingle(),e.__isFills||e.__isStrokes||e.cornerRadius||e.__useEffect?e.__complex=!0:e.__complex&&(e.__complex=!1)},__drawFast(e,t){Md(this,e,t)},__draw(e,t){const i=this.__;if(i.__complex){i.__needComputePaint&&i.__computePaint();const{fill:s,stroke:n,__drawAfterFill:r}=i;if(this.__drawRenderPath(e),i.__useEffect){const o=Rt.shape(this,e,t);this.__nowWorld=this.__getNowWorld(t);const{shadow:a,innerShadow:h}=i;a&&Uo.shadow(this,e,o),s&&(i.__isFills?Rt.fills(s,this,e):Rt.fill(s,this,e)),r&&this.__drawAfterFill(e,t),h&&Uo.innerShadow(this,e,o),n&&(i.__isStrokes?Rt.strokes(n,this,e):Rt.stroke(n,this,e)),o.worldCanvas&&o.worldCanvas.recycle(),o.canvas.recycle()}else s&&(i.__isFills?Rt.fills(s,this,e):Rt.fill(s,this,e)),r&&this.__drawAfterFill(e,t),n&&(i.__isStrokes?Rt.strokes(n,this,e):Rt.stroke(n,this,e))}else i.__pathInputed?Md(this,e,t):this.__drawFast(e,t)},__renderShape(e,t,i,s){if(this.__worldOpacity){e.setWorld(this.__nowWorld=this.__getNowWorld(t));const{fill:n,stroke:r}=this.__;this.__drawRenderPath(e),n&&!i&&(this.__.__pixelFill?Rt.fills(n,this,e):Rt.fill("#000000",this,e)),this.__.__isCanvas&&this.__drawAfterFill(e,t),r&&!s&&(this.__.__pixelStroke?Rt.strokes(r,this,e):Rt.stroke("#000000",this,e))}},__drawAfterFill(e,t){this.__.__clipAfterFill?(e.save(),this.windingRule?e.clip(this.windingRule):e.clip(),this.__drawContent(e,t),e.restore()):this.__drawContent(e,t)}};function Md(e,t,i){const{fill:s,stroke:n,__drawAfterFill:r}=e.__;e.__drawRenderPath(t),s&&Rt.fill(s,e,t),r&&e.__drawAfterFill(t,i),n&&Rt.stroke(n,e,t)}const I0={__drawFast(e,t){let{width:i,height:s,fill:n,stroke:r,__drawAfterFill:o}=this.__;if(n&&(e.fillStyle=n,e.fillRect(0,0,i,s)),o&&this.__drawAfterFill(e,t),r){const{strokeAlign:a,__strokeWidth:h}=this.__;if(!h)return;e.setStroke(r,h,this.__);const l=h/2;switch(a){case"center":e.strokeRect(0,0,i,s);break;case"inside":i-=h,s-=h,i<0||s<0?(e.save(),this.__clip(e,t),e.strokeRect(l,l,i,s),e.restore()):e.strokeRect(l,l,i,s);break;case"outside":e.strokeRect(-l,-l,i+h,s+h);break}}}};var Tl;let L=Tl=class extends ks{get app(){return this.leafer&&this.leafer.app}get isFrame(){return!1}set scale(t){$t.assignScale(this,t)}get scale(){return this.__.scale}get pen(){const{path:t}=this.__;return Dn.set(this.path=t||[]),t||this.__drawPathByBox(Dn),Dn}get editConfig(){}get editOuter(){return""}get editInner(){return""}constructor(t){super(t)}reset(t){}set(t,i){t&&(i?i==="temp"?(this.lockNormalStyle=!0,Object.assign(this,t),this.lockNormalStyle=!1):this.animate(t,i):Object.assign(this,t))}get(t){return typeof t=="string"?this.__.__getInput(t):this.__.__getInputData(t)}createProxyData(){}find(t,i){return St.need("find")}findTag(t){return this.find({tag:t})}findOne(t,i){return St.need("find")}findId(t){return this.findOne({id:t})}getPath(t,i){this.__layout.update();let s=i?this.__.__pathForRender:this.__.path;return s||(Dn.set(s=[]),this.__drawPathByBox(Dn)),t?Rs.toCanvasData(s,!0):s}getPathString(t,i,s){return Rs.stringify(this.getPath(t,i),s)}load(){this.__.__computePaint()}__onUpdateSize(){if(this.__.__input){const t=this.__;t.lazy&&!this.__inLazyBounds&&!Di.running?t.__needComputePaint=!0:t.__computePaint()}}__updateRenderPath(){if(this.__.path){const t=this.__;t.__pathForRender=t.cornerRadius?Gb.smooth(t.path,t.cornerRadius,t.cornerSmoothing):t.path,t.__useArrow&&wc.addArrows(this,!t.cornerRadius)}}__drawRenderPath(t){t.beginPath(),this.__drawPathByData(t,this.__.__pathForRender)}__drawPath(t){t.beginPath(),this.__drawPathByData(t,this.__.path)}__drawPathByData(t,i){i?Cb.drawPathByData(t,i):this.__drawPathByBox(t)}__drawPathByBox(t){const{x:i,y:s,width:n,height:r}=this.__layout.boxBounds;if(this.__.cornerRadius){const{cornerRadius:o}=this.__;t.roundRect(i,s,n,r,typeof o=="number"?[o]:o)}else t.rect(i,s,n,r)}animate(t,i,s,n){return St.need("animate")}killAnimate(t,i){}export(t,i){return St.need("export")}clone(t){const i=this.toJSON();return t&&Object.assign(i,t),Tl.one(i)}static one(t,i,s,n,r){return aa.get(t.tag||this.prototype.__tag,t,i,s,n,r)}static registerUI(){Gt()(this)}static registerData(t){Ut(t)(this.prototype)}static setEditConfig(t){}static setEditOuter(t){}static setEditInner(t){}destroy(){this.fill=this.stroke=null,this.__animate&&this.killAnimate(),super.destroy()}};m([Ut(Ni)],L.prototype,"__",void 0);m([v0()],L.prototype,"zoomLayer",void 0);m([ve("")],L.prototype,"id",void 0);m([ve("")],L.prototype,"name",void 0);m([ve("")],L.prototype,"className",void 0);m([Ir("pass-through")],L.prototype,"blendMode",void 0);m([s1(1)],L.prototype,"opacity",void 0);m([n1(!0)],L.prototype,"visible",void 0);m([Ir(!1)],L.prototype,"locked",void 0);m([r1(0)],L.prototype,"zIndex",void 0);m([o1(!1)],L.prototype,"mask",void 0);m([a1(!1)],L.prototype,"eraser",void 0);m([Sn(0,!0)],L.prototype,"x",void 0);m([Sn(0,!0)],L.prototype,"y",void 0);m([ct(100,!0)],L.prototype,"width",void 0);m([ct(100,!0)],L.prototype,"height",void 0);m([V_(1,!0)],L.prototype,"scaleX",void 0);m([V_(1,!0)],L.prototype,"scaleY",void 0);m([yc(0,!0)],L.prototype,"rotation",void 0);m([yc(0,!0)],L.prototype,"skewX",void 0);m([yc(0,!0)],L.prototype,"skewY",void 0);m([Sn(0,!0)],L.prototype,"offsetX",void 0);m([Sn(0,!0)],L.prototype,"offsetY",void 0);m([Sn(0,!0)],L.prototype,"scrollX",void 0);m([Sn(0,!0)],L.prototype,"scrollY",void 0);m([N_()],L.prototype,"origin",void 0);m([N_()],L.prototype,"around",void 0);m([ve(!1)],L.prototype,"lazy",void 0);m([e1(1)],L.prototype,"pixelRatio",void 0);m([i1()],L.prototype,"path",void 0);m([ce()],L.prototype,"windingRule",void 0);m([ce(!0)],L.prototype,"closed",void 0);m([ct(0)],L.prototype,"padding",void 0);m([ct(!1)],L.prototype,"lockRatio",void 0);m([ct()],L.prototype,"widthRange",void 0);m([ct()],L.prototype,"heightRange",void 0);m([ve(!1)],L.prototype,"draggable",void 0);m([ve()],L.prototype,"dragBounds",void 0);m([ve(!1)],L.prototype,"editable",void 0);m([Ps(!0)],L.prototype,"hittable",void 0);m([Ps("path")],L.prototype,"hitFill",void 0);m([ii("path")],L.prototype,"hitStroke",void 0);m([Ps(!1)],L.prototype,"hitBox",void 0);m([Ps(!0)],L.prototype,"hitChildren",void 0);m([Ps(!0)],L.prototype,"hitSelf",void 0);m([Ps()],L.prototype,"hitRadius",void 0);m([h1("")],L.prototype,"cursor",void 0);m([Ir()],L.prototype,"fill",void 0);m([ii()],L.prototype,"stroke",void 0);m([ii("inside")],L.prototype,"strokeAlign",void 0);m([ii(1)],L.prototype,"strokeWidth",void 0);m([ii(!1)],L.prototype,"strokeWidthFixed",void 0);m([ii("none")],L.prototype,"strokeCap",void 0);m([ii("miter")],L.prototype,"strokeJoin",void 0);m([ii()],L.prototype,"dashPattern",void 0);m([ii()],L.prototype,"dashOffset",void 0);m([ii(10)],L.prototype,"miterLimit",void 0);m([ce(0)],L.prototype,"cornerRadius",void 0);m([ce()],L.prototype,"cornerSmoothing",void 0);m([Wr()],L.prototype,"shadow",void 0);m([Wr()],L.prototype,"innerShadow",void 0);m([Wr()],L.prototype,"blur",void 0);m([Wr()],L.prototype,"backgroundBlur",void 0);m([Wr()],L.prototype,"grayscale",void 0);m([ve({})],L.prototype,"data",void 0);m([si(ks.prototype.reset)],L.prototype,"reset",null);L=Tl=m([Ke($0),Ke(D0),ua()],L);let Mt=class extends L{get __tag(){return"Group"}get isBranch(){return!0}constructor(t){super(t)}reset(t){this.__setBranch(),super.reset(t)}__setBranch(){this.children||(this.children=[])}set(t,i){if(t)if(t.children){const{children:s}=t;delete t.children,this.children?this.clear():this.__setBranch(),super.set(t,i),s.forEach(n=>this.add(n)),t.children=s}else super.set(t,i)}toJSON(t){const i=super.toJSON(t);return i.children=this.children.map(s=>s.toJSON(t)),i}pick(t,i){}addAt(t,i){this.add(t,i)}addAfter(t,i){this.add(t,this.children.indexOf(i)+1)}addBefore(t,i){this.add(t,this.children.indexOf(i))}add(t,i){}addMany(...t){}remove(t,i){}removeAll(t){}clear(){}};m([Ut(da)],Mt.prototype,"__",void 0);Mt=m([Ke(Sl),Gt()],Mt);var ko;const Ad=it.get("Leafer");let Wi=ko=class extends Mt{get __tag(){return"Leafer"}get isApp(){return!1}get app(){return this.parent||this}get isLeafer(){return!0}get imageReady(){return this.viewReady&&Wt.isComplete}get layoutLocked(){return!this.layouter.running}get FPS(){return this.renderer?this.renderer.FPS:60}get cursorPoint(){return this.interaction&&this.interaction.hoverData||{x:this.width/2,y:this.height/2}}get clientBounds(){return this.canvas&&this.canvas.getClientBounds()}constructor(t,i){super(i),this.config={start:!0,hittable:!0,smooth:!0,lazySpeard:100},this.leafs=0,this.__eventIds=[],this.__controllers=[],this.__readyWait=[],this.__viewReadyWait=[],this.__viewCompletedWait=[],this.__nextRenderWait=[],this.userConfig=t,t&&(t.view||t.width)&&this.init(t),ko.list.add(this)}init(t,i){if(this.canvas)return;let s;const{config:n}=this;this.__setLeafer(this),i&&(this.parentApp=i,this.__bindApp(i),s=i.running),t&&(this.parent=i,this.initType(t.type),this.parent=void 0,gt.assign(n,t));const r=this.canvas=rt.canvas(n);this.__controllers.push(this.renderer=rt.renderer(this,r,n),this.watcher=rt.watcher(this,n),this.layouter=rt.layouter(this,n)),this.isApp&&this.__setApp(),this.__checkAutoLayout(n,i),this.view=r.view,i||(this.selector=rt.selector(this),this.interaction=rt.interaction(this,r,this.selector,n),this.interaction&&(this.__controllers.unshift(this.interaction),this.hitCanvasManager=rt.hitCanvasManager()),this.canvasManager=new P_,s=n.start),this.hittable=n.hittable,this.fill=n.fill,this.canvasManager.add(r),this.__listenEvents(),s&&(this.__startTimer=setTimeout(this.start.bind(this))),In.run(this.__initWait),this.onInit()}onInit(){}initType(t){}set(t,i){this.waitInit(()=>{super.set(t,i)})}start(){clearTimeout(this.__startTimer),!this.running&&this.canvas&&(this.running=!0,this.ready?this.emitLeafer(Pt.RESTART):this.emitLeafer(Pt.START),this.__controllers.forEach(t=>t.start()),this.isApp||this.renderer.render())}stop(){clearTimeout(this.__startTimer),this.running&&this.canvas&&(this.__controllers.forEach(t=>t.stop()),this.running=!1,this.emitLeafer(Pt.STOP))}unlockLayout(){this.layouter.start(),this.updateLayout()}lockLayout(){this.updateLayout(),this.layouter.stop()}resize(t){const i=gt.copyAttrs({},t,Fe);Object.keys(i).forEach(s=>this[s]=i[s])}forceRender(t,i){const{renderer:s}=this;s&&(s.addBlock(t?new tt(t):this.canvas.bounds),this.viewReady&&(i?s.render():s.update()))}requestRender(t=!1){this.renderer&&this.renderer.update(t)}updateCursor(t){const i=this.interaction;i&&(t?i.setCursor(t):i.updateCursor())}updateLazyBounds(){this.lazyBounds=this.canvas.bounds.clone().spread(this.config.lazySpeard)}__doResize(t){const{canvas:i}=this;if(!i||i.isSameSize(t))return;const s=gt.copyAttrs({},this.canvas,Fe);i.resize(t),this.updateLazyBounds(),this.__onResize(new ji(t,s))}__onResize(t){this.emitEvent(t),gt.copyAttrs(this.__,t,Fe),setTimeout(()=>{this.canvasManager&&this.canvasManager.clearRecycled()},0)}__setApp(){}__bindApp(t){this.selector=t.selector,this.interaction=t.interaction,this.canvasManager=t.canvasManager,this.hitCanvasManager=t.hitCanvasManager}__setLeafer(t){this.leafer=t,this.__level=1}__checkAutoLayout(t,i){i||((!t.width||!t.height)&&(this.autoLayout=new Yw(t)),this.canvas.startAutoLayout(this.autoLayout,this.__onResize.bind(this)))}__setAttr(t,i){return this.canvas&&(Fe.includes(t)?(i||Ad.warn(t+" is 0"),this.__changeCanvasSize(t,i)):t==="fill"?this.__changeFill(i):t==="hittable"?this.parent||(this.canvas.hittable=i):t==="zIndex"&&(this.canvas.zIndex=i,setTimeout(()=>this.parent&&this.parent.__updateSortChildren()))),super.__setAttr(t,i)}__getAttr(t){return this.canvas&&Fe.includes(t)?this.canvas[t]:super.__getAttr(t)}__changeCanvasSize(t,i){const s=gt.copyAttrs({},this.canvas,Fe);s[t]=this.config[t]=i,i&&this.canvas.stopAutoLayout(),this.__doResize(s)}__changeFill(t){this.config.fill=t,this.canvas.allowBackgroundColor?this.canvas.backgroundColor=t:this.forceRender()}__onCreated(){this.created=!0}__onReady(){this.ready=!0,this.emitLeafer(Pt.BEFORE_READY),this.emitLeafer(Pt.READY),this.emitLeafer(Pt.AFTER_READY),In.run(this.__readyWait)}__onViewReady(){this.viewReady||(this.viewReady=!0,this.emitLeafer(Pt.VIEW_READY),In.run(this.__viewReadyWait))}__onLayoutEnd(){const{grow:t,growWidth:i,growHeight:s}=this.config;if(t){let{width:n,height:r,pixelRatio:o}=this;const a=t==="box"?this.worldBoxBounds:this.__world;i!==!1&&(n=Math.max(1,a.x+a.width)),s!==!1&&(r=Math.max(1,a.y+a.height)),this.__doResize({width:n,height:r,pixelRatio:o})}this.ready||this.__onReady()}__onNextRender(){if(this.viewReady){In.run(this.__nextRenderWait);const{imageReady:t}=this;t&&!this.viewCompleted&&this.__checkViewCompleted(),t||(this.viewCompleted=!1,this.requestRender())}else this.requestRender()}__checkViewCompleted(t=!0){this.nextRender(()=>{this.imageReady&&(t&&this.emitLeafer(Pt.VIEW_COMPLETED),In.run(this.__viewCompletedWait),this.viewCompleted=!0)})}__onWatchData(){this.watcher.childrenChanged&&this.interaction&&this.nextRender(()=>this.interaction.updateCursor())}waitInit(t,i){i&&(t=t.bind(i)),this.__initWait||(this.__initWait=[]),this.canvas?t():this.__initWait.push(t)}waitReady(t,i){i&&(t=t.bind(i)),this.ready?t():this.__readyWait.push(t)}waitViewReady(t,i){i&&(t=t.bind(i)),this.viewReady?t():this.__viewReadyWait.push(t)}waitViewCompleted(t,i){i&&(t=t.bind(i)),this.__viewCompletedWait.push(t),this.viewCompleted?this.__checkViewCompleted(!1):this.running||this.start()}nextRender(t,i,s){i&&(t=t.bind(i));const n=this.__nextRenderWait;if(s){for(let r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}}else n.push(t);this.requestRender()}zoom(t,i,s){return St.need("view")}getValidMove(t,i){return{x:t,y:i}}getValidScale(t){return t}getWorldPointByClient(t,i){return this.interaction&&this.interaction.getLocal(t,i)}getPagePointByClient(t,i){return this.getPagePoint(this.getWorldPointByClient(t,i))}updateClientBounds(){this.canvas&&this.canvas.updateClientBounds()}receiveEvent(t){}emitLeafer(t){this.emitEvent(new Pt(t,this))}__listenEvents(){const t=zt.start("FirstCreate "+this.innerName);this.once(Pt.START,()=>zt.end(t)),this.once(J.START,()=>this.updateLazyBounds()),this.once(K.START,()=>this.__onCreated()),this.once(K.END,()=>this.__onViewReady()),this.__eventIds.push(this.on_(Le.DATA,this.__onWatchData,this),this.on_(J.END,this.__onLayoutEnd,this),this.on_(K.NEXT,this.__onNextRender,this))}__removeListenEvents(){this.off_(this.__eventIds),this.__eventIds.length=0}destroy(t){const i=()=>{if(!this.destroyed){ko.list.remove(this);try{this.stop(),this.emitEvent(new Pt(Pt.END,this)),this.__removeListenEvents(),this.__controllers.forEach(s=>!(this.parent&&s===this.interaction)&&s.destroy()),this.__controllers.length=0,this.parent||(this.selector&&this.selector.destroy(),this.hitCanvasManager&&this.hitCanvasManager.destroy(),this.canvasManager.destroy()),this.canvas.destroy(),this.config.view=this.view=this.parentApp=null,this.userConfig&&(this.userConfig.view=null),super.destroy(),setTimeout(()=>{Wt.clearRecycled()},100)}catch(s){Ad.error(s)}}};t?i():setTimeout(i)}};Wi.list=new et;m([Ut(T0)],Wi.prototype,"__",void 0);m([ct()],Wi.prototype,"pixelRatio",void 0);Wi=ko=m([Gt()],Wi);let Ne=class extends L{get __tag(){return"Rect"}constructor(t){super(t)}};m([Ut(xc)],Ne.prototype,"__",void 0);Ne=m([Ke(I0),ua(),Gt()],Ne);const{copy:W0,add:F0,includes:z0}=D,As=Ne.prototype,H0=Mt.prototype,ph={};let Ft=class extends Mt{get __tag(){return"Box"}get isBranchLeaf(){return!0}constructor(t){super(t),this.__layout.renderChanged||this.__layout.renderChange()}__updateStrokeSpread(){return 0}__updateRectRenderSpread(){return 0}__updateRenderSpread(){return this.__updateRectRenderSpread()||-1}__updateRectBoxBounds(){}__updateBoxBounds(t){const i=this.__;if(this.children.length)if(i.__autoSide){super.__updateBoxBounds();const{boxBounds:s}=this.__layout;i.__autoSize||(i.__autoWidth?(s.width+=s.x,s.x=0,s.height=i.height,s.y=0):(s.height+=s.y,s.y=0,s.width=i.width,s.x=0)),this.__updateNaturalSize()}else this.__updateRectBoxBounds();else this.__updateRectBoxBounds()}__updateStrokeBounds(){}__updateRenderBounds(){let t;const{renderBounds:i}=this.__layout;this.children.length?(super.__updateRenderBounds(),W0(ph,i),this.__updateRectRenderBounds(),t=!z0(i,ph),t&&this.__.overflow!=="hide"&&F0(i,ph)):this.__updateRectRenderBounds(),!this.isOverflow!=!t&&(this.isOverflow=t)}__updateRectRenderBounds(){}__updateRectChange(){}__updateChange(){super.__updateChange(),this.__updateRectChange()}__renderRect(t,i){}__renderGroup(t,i){}__render(t,i){this.__.__drawAfterFill?this.__renderRect(t,i):(this.__renderRect(t,i),this.children.length&&this.__renderGroup(t,i))}__drawContent(t,i){this.__renderGroup(t,i),this.__.__hasStroke&&(t.setWorld(this.__nowWorld),this.__drawRenderPath(t))}};m([Ut(Z_)],Ft.prototype,"__",void 0);m([ve(!1)],Ft.prototype,"resizeChildren",void 0);m([G_("show")],Ft.prototype,"overflow",void 0);m([si(As.__updateStrokeSpread)],Ft.prototype,"__updateStrokeSpread",null);m([si(As.__updateRenderSpread)],Ft.prototype,"__updateRectRenderSpread",null);m([si(As.__updateBoxBounds)],Ft.prototype,"__updateRectBoxBounds",null);m([si(As.__updateStrokeBounds)],Ft.prototype,"__updateStrokeBounds",null);m([si(As.__updateRenderBounds)],Ft.prototype,"__updateRectRenderBounds",null);m([si(As.__updateChange)],Ft.prototype,"__updateRectChange",null);m([si(As.__render)],Ft.prototype,"__renderRect",null);m([si(H0.__render)],Ft.prototype,"__renderGroup",null);Ft=m([ua(),Gt()],Ft);let Er=class extends Ft{get __tag(){return"Frame"}get isFrame(){return!0}constructor(t){super(t)}};m([Ut(C0)],Er.prototype,"__",void 0);m([Ir("#FFFFFF")],Er.prototype,"fill",void 0);m([G_("hide")],Er.prototype,"overflow",void 0);Er=m([Gt()],Er);const{moveTo:$d,closePath:Dd,ellipse:Us}=Os;let xn=class extends L{get __tag(){return"Ellipse"}constructor(t){super(t)}__updatePath(){const{width:t,height:i,innerRadius:s,startAngle:n,endAngle:r}=this.__,o=t/2,a=i/2,h=this.__.path=[];s?(n||r?(s<1&&Us(h,o,a,o*s,a*s,0,n,r,!1),Us(h,o,a,o,a,0,r,n,!0),s<1&&Dd(h)):(s<1&&(Us(h,o,a,o*s,a*s),$d(h,t,a)),Us(h,o,a,o,a,0,360,0,!0)),E.ellipseToCurve&&(this.__.path=this.getPath(!0))):n||r?($d(h,o,a),Us(h,o,a,o,a,0,n,r,!1),Dd(h)):Us(h,o,a,o,a)}};m([Ut(B0)],xn.prototype,"__",void 0);m([ce(0)],xn.prototype,"innerRadius",void 0);m([ce(0)],xn.prototype,"startAngle",void 0);m([ce(0)],xn.prototype,"endAngle",void 0);xn=m([Gt()],xn);const{moveTo:j0,lineTo:N0,drawPoints:Id}=Os,{rotate:V0,getAngle:U0,getDistance:G0,defaultPoint:Wd}=H,{toBounds:Y0}=_c;let ei=class extends L{get __tag(){return"Line"}get toPoint(){const{width:t,rotation:i}=this.__,s=uc();return t&&(s.x=t),i&&V0(s,i),s}set toPoint(t){this.width=G0(Wd,t),this.rotation=U0(Wd,t),this.height&&(this.height=0)}constructor(t){super(t)}__updatePath(){const t=this.__,i=t.path=[];t.points?Id(i,t.points,!1,t.closed):(j0(i,0,0),N0(i,this.width,0))}__updateRenderPath(){const t=this.__;!this.pathInputed&&t.points&&t.curve?(Id(t.__pathForRender=[],t.points,t.curve,t.closed),t.__useArrow&&wc.addArrows(this,!1)):super.__updateRenderPath()}__updateBoxBounds(){this.points?Y0(this.__.__pathForRender,this.__layout.boxBounds):super.__updateBoxBounds()}};m([Ut(J_)],ei.prototype,"__",void 0);m([ca("center")],ei.prototype,"strokeAlign",void 0);m([ct(0)],ei.prototype,"height",void 0);m([ce()],ei.prototype,"points",void 0);m([ce(0)],ei.prototype,"curve",void 0);m([ce(!1)],ei.prototype,"closed",void 0);ei=m([Gt()],ei);const{sin:X0,cos:K0,PI:Fd}=Math,{moveTo:q0,lineTo:Z0,closePath:J0,drawPoints:Q0}=Os,tg=ei.prototype;let Fi=class extends L{get __tag(){return"Polygon"}constructor(t){super(t)}__updatePath(){const t=this.__.path=[];if(this.__.points)Q0(t,this.__.points,!1,!0);else{const{width:i,height:s,sides:n}=this.__,r=i/2,o=s/2;q0(t,r,0);for(let a=1;a<n;a++)Z0(t,r+r*X0(a*2*Fd/n),o-o*K0(a*2*Fd/n))}J0(t)}__updateRenderPath(){}__updateBoxBounds(){}};m([Ut(R0)],Fi.prototype,"__",void 0);m([ce(3)],Fi.prototype,"sides",void 0);m([ce()],Fi.prototype,"points",void 0);m([ce(0)],Fi.prototype,"curve",void 0);m([si(tg.__updateRenderPath)],Fi.prototype,"__updateRenderPath",null);m([si(tg.__updateBoxBounds)],Fi.prototype,"__updateBoxBounds",null);Fi=m([ua(),Gt()],Fi);const{sin:tv,cos:ev,PI:zd}=Math,{moveTo:iv,lineTo:sv,closePath:nv}=Os;let Sr=class extends L{get __tag(){return"Star"}constructor(t){super(t)}__updatePath(){const{width:t,height:i,corners:s,innerRadius:n}=this.__,r=t/2,o=i/2,a=this.__.path=[];iv(a,r,0);for(let h=1;h<s*2;h++)sv(a,r+(h%2===0?r:r*n)*tv(h*zd/s),o-(h%2===0?o:o*n)*ev(h*zd/s));nv(a)}};m([Ut(k0)],Sr.prototype,"__",void 0);m([ce(5)],Sr.prototype,"corners",void 0);m([ce(.382)],Sr.prototype,"innerRadius",void 0);Sr=m([Gt()],Sr);let Tr=class extends Ne{get __tag(){return"Image"}get ready(){return this.image?this.image.ready:!1}constructor(t){super(t),this.on(be.LOADED,i=>{i.attrName==="fill"&&i.attrValue.url===this.url&&(this.image=i.image)})}destroy(){this.image=null,super.destroy()}};m([Ut(Q_)],Tr.prototype,"__",void 0);m([ct("")],Tr.prototype,"url",void 0);Tr=m([Gt()],Tr);let zi=class extends Ne{get __tag(){return"Canvas"}get ready(){return!this.url}constructor(t){super(t),this.canvas=rt.canvas(this.__),this.context=this.canvas.context,t&&t.url&&this.drawImage(t.url)}drawImage(t){new gc({url:t}).load(i=>{this.context.drawImage(i.view,0,0),this.url=void 0,this.paint(),this.emitEvent(new be(be.LOADED,{image:i}))})}draw(t,i,s,n){const r=new ae(t.worldTransform).invert(),o=new ae;i&&o.translate(i.x,i.y),s&&(typeof s=="number"?o.scale(s):o.scale(s.x,s.y)),n&&o.rotate(n),r.multiplyParent(o),t.__render(this.canvas,{matrix:r.withScale()}),this.paint()}paint(){this.forceRender()}__drawContent(t,i){const{width:s,height:n}=this.__,{view:r}=this.canvas;t.drawImage(r,0,0,r.width,r.height,0,0,s,n)}__updateSize(){const{canvas:t}=this;if(t){const{smooth:i,safeResize:s}=this.__;t.resize(this.__,s),t.smooth!==i&&(t.smooth=i)}}destroy(){this.canvas&&(this.canvas.destroy(),this.canvas=this.context=null),super.destroy()}};m([Ut(A0)],zi.prototype,"__",void 0);m([Fr(100)],zi.prototype,"width",void 0);m([Fr(100)],zi.prototype,"height",void 0);m([Fr(1)],zi.prototype,"pixelRatio",void 0);m([Fr(!0)],zi.prototype,"smooth",void 0);m([ve(!1)],zi.prototype,"safeResize",void 0);m([Fr()],zi.prototype,"contextSettings",void 0);zi=m([Gt()],zi);const{copyAndSpread:rv,includes:ov,isSame:av,spread:hv,setList:lv}=D;let lt=class extends L{get __tag(){return"Text"}get textDrawData(){return this.__layout.update(),this.__.__textDrawData}constructor(t){super(t)}__drawHitPath(t){const{__lineHeight:i,fontSize:s,__baseLine:n,__textDrawData:r}=this.__;t.beginPath(),this.__.__letterSpacing<0?this.__drawPathByData(t):r.rows.forEach(o=>t.rect(o.x,o.y-n,o.width,i<s?s:i))}__drawPathByData(t,i){const{x:s,y:n,width:r,height:o}=this.__layout.boxBounds;t.rect(s,n,r,o)}__drawRenderPath(t){t.font=this.__.__font}__updateTextDrawData(){const t=this.__,{lineHeight:i,letterSpacing:s,fontFamily:n,fontSize:r,fontWeight:o,italic:a,textCase:h,textOverflow:l,padding:c}=t;t.__lineHeight=Ld.number(i,r),t.__letterSpacing=Ld.number(s,r),t.__padding=c?$t.fourNumber(c):void 0,t.__baseLine=t.__lineHeight-(t.__lineHeight-r*.7)/2,t.__font=`${a?"italic ":""}${h==="small-caps"?"small-caps ":""}${o!=="normal"?o+" ":""}${r}px ${n}`,t.__clipText=l!=="show"&&!t.__autoSize,t.__textDrawData=mc.getDrawData(t.text,this.__)}__updateBoxBounds(){const t=this.__,i=this.__layout,{fontSize:s,italic:n,padding:r,__autoWidth:o,__autoHeight:a}=t;this.__updateTextDrawData();const{bounds:h}=t.__textDrawData,l=i.boxBounds;if(t.__lineHeight<s&&hv(h,s/2),o||a){if(l.x=o?h.x:0,l.y=a?h.y:0,l.width=o?h.width:t.width,l.height=a?h.height:t.height,r){const[d,f,u,p]=t.__padding;o&&(l.x-=p,l.width+=f+p),a&&(l.y-=d,l.height+=u+d)}this.__updateNaturalSize()}else super.__updateBoxBounds();n&&(l.width+=s*.16);const c=ov(l,h)?l:h;av(c,i.contentBounds)?t.__textBoxBounds=c:(i.contentBounds=c,i.renderChanged=!0,lv(t.__textBoxBounds={},[l,h]))}__updateRenderSpread(){let t=super.__updateRenderSpread();return t||(t=this.__layout.boxBounds===this.__layout.contentBounds?0:1),t}__updateRenderBounds(){rv(this.__layout.renderBounds,this.__.__textBoxBounds,this.__layout.renderSpread)}};m([Ut(M0)],lt.prototype,"__",void 0);m([ct(0)],lt.prototype,"width",void 0);m([ct(0)],lt.prototype,"height",void 0);m([ve(!1)],lt.prototype,"resizeFontSize",void 0);m([Ir("#000000")],lt.prototype,"fill",void 0);m([ca("outside")],lt.prototype,"strokeAlign",void 0);m([Ps("all")],lt.prototype,"hitFill",void 0);m([ct("")],lt.prototype,"text",void 0);m([ct("L")],lt.prototype,"fontFamily",void 0);m([ct(12)],lt.prototype,"fontSize",void 0);m([ct("normal")],lt.prototype,"fontWeight",void 0);m([ct(!1)],lt.prototype,"italic",void 0);m([ct("none")],lt.prototype,"textCase",void 0);m([ct("none")],lt.prototype,"textDecoration",void 0);m([ct(0)],lt.prototype,"letterSpacing",void 0);m([ct({type:"percent",value:1.5})],lt.prototype,"lineHeight",void 0);m([ct(0)],lt.prototype,"paraIndent",void 0);m([ct(0)],lt.prototype,"paraSpacing",void 0);m([ct("x")],lt.prototype,"writingMode",void 0);m([ct("left")],lt.prototype,"textAlign",void 0);m([ct("top")],lt.prototype,"verticalAlign",void 0);m([ct(!0)],lt.prototype,"autoSizeAlign",void 0);m([ct("normal")],lt.prototype,"textWrap",void 0);m([ct("show")],lt.prototype,"textOverflow",void 0);lt=m([Gt()],lt);let bn=class extends L{get __tag(){return"Path"}constructor(t){super(t)}};m([Ut(L0)],bn.prototype,"__",void 0);m([ca("center")],bn.prototype,"strokeAlign",void 0);bn=m([Gt()],bn);let Go=class extends Mt{get __tag(){return"Pen"}constructor(t){super(t)}setStyle(t){const i=this.pathElement=new bn(t);return this.pathStyle=t,this.__path=i.path||(i.path=[]),this.add(i),this}beginPath(){return this}moveTo(t,i){return this}lineTo(t,i){return this}bezierCurveTo(t,i,s,n,r,o){return this}quadraticCurveTo(t,i,s,n){return this}closePath(){return this}rect(t,i,s,n){return this}roundRect(t,i,s,n,r){return this}ellipse(t,i,s,n,r,o,a,h){return this}arc(t,i,s,n,r,o){return this}arcTo(t,i,s,n,r){return this}drawEllipse(t,i,s,n,r,o,a,h){return this}drawArc(t,i,s,n,r,o){return this}drawPoints(t,i,s){return this}clearPath(){return this}paint(){this.pathElement.__layout.boxChanged||this.pathElement.forceUpdate("path")}};m([Ut(O0)],Go.prototype,"__",void 0);m([cv()],Go.prototype,"path",void 0);Go=m([Ke(pc,["set","path","paint"]),Gt()],Go);function cv(){return(e,t)=>{le(e,t,{get(){return this.__path}})}}function Vi(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}let Cl=class extends Wi{get __tag(){return"App"}get isApp(){return!0}constructor(t,i){super(t,i)}init(t,i){if(super.init(t,i),t){const{ground:s,tree:n,sky:r,editor:o}=t;s&&(this.ground=this.addLeafer(s)),(n||o)&&(this.tree=this.addLeafer(n||{type:t.type||"design"})),(r||o)&&(this.sky=this.addLeafer(r)),o&&this.sky.add(this.editor=rt.editor(o))}}__setApp(){const{canvas:t}=this,{realCanvas:i,view:s}=this.config;i||s===this.canvas.view||!t.parentView?this.realCanvas=!0:t.unrealCanvas(),this.leafer=this,this.watcher.disable(),this.layouter.disable(),this.__eventIds.push(this.on_(qe.CHANGE,this.__onPropertyChange,this))}start(){super.start(),this.children.forEach(t=>t.start())}stop(){this.children.forEach(t=>t.stop()),super.stop()}unlockLayout(){super.unlockLayout(),this.children.forEach(t=>t.unlockLayout())}lockLayout(){super.lockLayout(),this.children.forEach(t=>t.lockLayout())}forceRender(t,i){this.children.forEach(s=>s.forceRender(t,i))}addLeafer(t){const i=new Wi(t);return this.add(i),i}add(t,i){if(!t.view){if(this.realCanvas&&!this.canvas.bounds){setTimeout(()=>this.add(t,i),10);return}t.init(this.__getChildConfig(t.userConfig),this)}super.add(t,i),i!==void 0&&(t.canvas.childIndex=i),this.__listenChildEvents(t)}__onPropertyChange(){it.showHitView&&this.children.forEach(t=>t.forceUpdate("surface"))}__onCreated(){this.created=this.children.every(t=>t.created)}__onReady(){this.children.every(t=>t.ready)&&super.__onReady()}__onViewReady(){this.children.every(t=>t.viewReady)&&super.__onViewReady()}__onChildRenderEnd(t){this.renderer.addBlock(t.renderBounds),this.viewReady&&this.renderer.update()}__render(t,i){if(t.context){const s=i.matrix;s&&t.setTransform(s.a,s.b,s.c,s.d,s.e,s.f),this.children.forEach(n=>t.copyWorld(n.canvas))}}__onResize(t){this.children.forEach(i=>i.resize(t)),super.__onResize(t)}updateLayout(){this.children.forEach(t=>t.updateLayout())}__getChildConfig(t){let i=Object.assign({},this.config);return i.hittable=i.realCanvas=void 0,t&&gt.assign(i,t),this.autoLayout&&gt.copyAttrs(i,this,Fe),i.view=this.realCanvas?void 0:this.view,i.fill=void 0,i}__listenChildEvents(t){t.once(J.END,()=>this.__onReady()),t.once(K.START,()=>this.__onCreated()),t.once(K.END,()=>this.__onViewReady()),this.realCanvas&&this.__eventIds.push(t.on_(K.END,this.__onChildRenderEnd,this))}};Cl=Vi([Gt()],Cl);const po={},dr={isHoldSpaceKey(){return dr.isHold("Space")},isHold(e){return po[e]},setDownCode(e){po[e]||(po[e]=!0)},setUpCode(e){po[e]=!1}},Ye={LEFT:1,RIGHT:2,MIDDLE:4,defaultLeft(e){e.buttons||(e.buttons=1)},left(e){return e.buttons===1},right(e){return e.buttons===2},middle(e){return e.buttons===4}};class fa extends bi{get spaceKey(){return dr.isHoldSpaceKey()}get left(){return Ye.left(this)}get right(){return Ye.right(this)}get middle(){return Ye.middle(this)}constructor(t){super(t.type),this.bubbles=!0,Object.assign(this,t)}getBoxPoint(t){return(t||this.current).getBoxPoint(this)}getInnerPoint(t){return(t||this.current).getInnerPoint(this)}getLocalPoint(t){return(t||this.current).getLocalPoint(this)}getPagePoint(){return this.current.getPagePoint(this)}getInner(t){return this.getInnerPoint(t)}getLocal(t){return this.getLocalPoint(t)}getPage(){return this.getPagePoint()}static changeName(t,i){wn.changeName(t,i)}}let I=class extends fa{};I.POINTER="pointer";I.BEFORE_DOWN="pointer.before_down";I.BEFORE_MOVE="pointer.before_move";I.BEFORE_UP="pointer.before_up";I.DOWN="pointer.down";I.MOVE="pointer.move";I.UP="pointer.up";I.OVER="pointer.over";I.OUT="pointer.out";I.ENTER="pointer.enter";I.LEAVE="pointer.leave";I.TAP="tap";I.DOUBLE_TAP="double_tap";I.CLICK="click";I.DOUBLE_CLICK="double_click";I.LONG_PRESS="long_press";I.LONG_TAP="long_tap";I.MENU="pointer.menu";I.MENU_TAP="pointer.menu_tap";I=Vi([os()],I);const Wn={};let Z=class extends I{static setList(t){this.list=t instanceof et?t:new et(t)}static setData(t){this.data=t}static getValidMove(t,i,s){const{draggable:n,dragBounds:r}=t,o=t.getLocalPoint(s,null,!0);return H.move(o,i.x-t.x,i.y-t.y),r&&this.getMoveInDragBounds(t.__local,r==="parent"?t.parent.boxBounds:r,o,!0),n==="x"&&(o.y=0),n==="y"&&(o.x=0),o}static getMoveInDragBounds(t,i,s,n){const r=t.x+s.x,o=t.y+s.y,a=r+t.width,h=o+t.height,l=i.x+i.width,c=i.y+i.height;return n||(s=Object.assign({},s)),D.includes(t,i)?(r>i.x?s.x+=i.x-r:a<l&&(s.x+=l-a),o>i.y?s.y+=i.y-o:h<c&&(s.y+=c-h)):(r<i.x?s.x+=i.x-r:a>l&&(s.x+=l-a),o<i.y?s.y+=i.y-o:h>c&&(s.y+=c-h)),s}getPageMove(t){return this.assignMove(t),this.current.getPagePoint(Wn,null,!0)}getInnerMove(t,i){return t||(t=this.current),this.assignMove(i),t.getInnerPoint(Wn,null,!0)}getLocalMove(t,i){return t||(t=this.current),this.assignMove(i),t.getLocalPoint(Wn,null,!0)}getPageTotal(){return this.getPageMove(!0)}getInnerTotal(t){return this.getInnerMove(t,!0)}getLocalTotal(t){return this.getLocalMove(t,!0)}getPageBounds(){const t=this.getPageTotal(),i=this.getPagePoint(),s={};return D.set(s,i.x-t.x,i.y-t.y,t.x,t.y),D.unsign(s),s}assignMove(t){Wn.x=t?this.totalX:this.moveX,Wn.y=t?this.totalY:this.moveY}};Z.BEFORE_DRAG="drag.before_drag";Z.START="drag.start";Z.DRAG="drag";Z.END="drag.end";Z.OVER="drag.over";Z.OUT="drag.out";Z.ENTER="drag.enter";Z.LEAVE="drag.leave";Z=Vi([os()],Z);let Cr=class extends I{static setList(t){Z.setList(t)}static setData(t){Z.setData(t)}};Cr.DROP="drop";Cr=Vi([os()],Cr);let Ht=class extends Z{};Ht.BEFORE_MOVE="move.before_move";Ht.START="move.start";Ht.MOVE="move";Ht.END="move.end";Ht=Vi([os()],Ht);let ze=class extends fa{};ze.BEFORE_ROTATE="rotate.before_rotate";ze.START="rotate.start";ze.ROTATE="rotate";ze.END="rotate.end";ze=Vi([os()],ze);let Ze=class extends Z{};Ze.SWIPE="swipe";Ze.LEFT="swipe.left";Ze.RIGHT="swipe.right";Ze.UP="swipe.up";Ze.DOWN="swipe.down";Ze=Vi([os()],Ze);let we=class extends fa{};we.BEFORE_ZOOM="zoom.before_zoom";we.START="zoom.start";we.ZOOM="zoom";we.END="zoom.end";we=Vi([os()],we);let ti=class extends fa{};ti.DOWN="key.down";ti.HOLD="key.hold";ti.UP="key.up";ti=Vi([os()],ti);const jt={getDragEventData(e,t,i){return Object.assign(Object.assign({},i),{x:i.x,y:i.y,moveX:i.x-t.x,moveY:i.y-t.y,totalX:i.x-e.x,totalY:i.y-e.y})},getDropEventData(e,t,i){return Object.assign(Object.assign({},e),{list:t,data:i})},getSwipeDirection(e){return e<-45&&e>-135?Ze.UP:e>45&&e<135?Ze.DOWN:e<=45&&e>=-45?Ze.RIGHT:Ze.LEFT},getSwipeEventData(e,t,i){return Object.assign(Object.assign({},i),{moveX:t.moveX,moveY:t.moveY,totalX:i.x-e.x,totalY:i.y-e.y,type:uv.getSwipeDirection(H.getAngle(e,i))})},getBase(e){const t=e.button===1?4:e.button;return{altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,buttons:e.buttons===void 0?1:e.buttons===0?t:e.buttons,origin:e}},pathHasEventType(e,t){const{list:i}=e;for(let s=0,n=i.length;s<n;s++)if(i[s].hasEvent(t))return!0;return!1},filterPathByEventType(e,t){const i=new et,{list:s}=e;for(let n=0,r=s.length;n<r;n++)s[n].hasEvent(t)&&i.add(s[n]);return i},pathCanDrag(e){return e&&e.list.some(t=>t.draggable||t.editable||!t.isLeafer&&t.hasEvent(Z.DRAG))},pathHasOutside(e){return e&&e.list.some(t=>t.isOutside)}},uv=jt,Hd=new et,{getDragEventData:_h,getDropEventData:dv,getSwipeEventData:fv}=jt;class eg{constructor(t){this.interaction=t}setDragData(t){this.animateWait&&this.dragEndReal(),this.downData=this.interaction.downData,this.dragData=_h(t,t,t),this.canAnimate=this.canDragOut=!0}getList(t,i){const{proxy:s}=this.interaction.selector,n=s&&s.list.length,r=Z.list||this.draggableList||Hd;return this.dragging&&(n?t?Hd:new et(i?[...s.list,...s.dragHoverExclude]:s.list):r)}checkDrag(t,i){const{interaction:s}=this;if(this.moving&&t.buttons<1){this.canAnimate=!1,s.pointerCancel();return}!this.moving&&i&&(this.moving=s.canMove(this.downData)||s.isHoldRightKey||s.isMobileDragEmpty)&&(this.dragData.moveType="drag",s.emit(Ht.START,this.dragData)),this.moving||this.dragStart(t,i),this.drag(t)}dragStart(t,i){this.dragging||(this.dragging=i&&Ye.left(t),this.dragging&&(this.interaction.emit(Z.START,this.dragData),this.getDraggableList(this.dragData.path),this.setDragStartPoints(this.realDraggableList=this.getList(!0))))}setDragStartPoints(t){this.dragStartPoints={},t.forEach(i=>this.dragStartPoints[i.innerId]={x:i.x,y:i.y})}getDraggableList(t){let i;for(let s=0,n=t.length;s<n;s++)if(i=t.list[s],(i.draggable||i.editable)&&i.hitSelf&&!i.locked){this.draggableList=new et(i);break}}drag(t){const{interaction:i,dragData:s,downData:n}=this,{path:r,throughPath:o}=n;this.dragData=_h(n,s,t),o&&(this.dragData.throughPath=o),this.dragData.path=r,this.moving?(this.dragData.moveType="drag",i.emit(Ht.BEFORE_MOVE,this.dragData),i.emit(Ht.MOVE,this.dragData)):this.dragging&&(this.dragReal(),i.emit(Z.BEFORE_DRAG,this.dragData),i.emit(Z.DRAG,this.dragData))}dragReal(){const{running:t}=this.interaction,i=this.realDraggableList;if(i.length&&t){const{totalX:s,totalY:n}=this.dragData;i.forEach(r=>r.draggable&&r.move(Z.getValidMove(r,this.dragStartPoints[r.innerId],{x:s,y:n})))}}dragOverOrOut(t){const{interaction:i}=this,{dragOverPath:s}=this,{path:n}=t;this.dragOverPath=n,s?n.indexAt(0)!==s.indexAt(0)&&(i.emit(Z.OUT,t,s),i.emit(Z.OVER,t,n)):i.emit(Z.OVER,t,n)}dragEnterOrLeave(t){const{interaction:i}=this,{dragEnterPath:s}=this,{path:n}=t;i.emit(Z.LEAVE,t,s,n),i.emit(Z.ENTER,t,n,s),this.dragEnterPath=n}dragEnd(t,i){!this.dragging&&!this.moving||this.checkDragEndAnimate(t,i)||this.dragEndReal(t)}dragEndReal(t){const{interaction:i,downData:s,dragData:n}=this;t||(t=n);const{path:r,throughPath:o}=s,a=_h(s,t,t);if(o&&(a.throughPath=o),a.path=r,this.moving&&(this.moving=!1,a.moveType="drag",i.emit(Ht.END,a)),this.dragging){const h=this.getList();this.dragging=!1,i.emit(Z.END,a),this.swipe(t,s,n,a),this.drop(t,h,this.dragEnterPath)}this.autoMoveCancel(),this.dragReset(),this.animate(null,"off")}swipe(t,i,s,n){const{interaction:r}=this;if(H.getDistance(i,t)>r.config.pointer.swipeDistance){const o=fv(i,s,n);this.interaction.emit(o.type,o)}}drop(t,i,s){const n=dv(t,i,Z.data);n.path=s,this.interaction.emit(Cr.DROP,n),this.interaction.emit(Z.LEAVE,t,s)}dragReset(){Z.list=Z.data=this.draggableList=this.dragData=this.downData=this.dragOverPath=this.dragEnterPath=null}checkDragEndAnimate(t,i){return!1}animate(t,i){}checkDragOut(t){}autoMoveOnDragOut(t){}autoMoveCancel(){}destroy(){this.dragReset()}}const pv=it.get("emit");function _v(e,t,i,s){if(!i&&!t.path)return;let n;t.type=e,i?t=Object.assign(Object.assign({},t),{path:i}):i=t.path,t.target=i.indexAt(0);try{for(let r=i.length-1;r>-1;r--){if(n=i.list[r],Bl(n,e,t,!0,s))return;n.isApp&&jd(n,e,t,!0,s)}for(let r=0,o=i.length;r<o;r++)if(n=i.list[r],n.isApp&&jd(n,e,t,!1,s),Bl(n,e,t,!1,s))return}catch(r){pv.error(r)}}const gv=["move","zoom","rotate","key"];function jd(e,t,i,s,n){if(gv.some(r=>t.startsWith(r))&&e.__.hitChildren&&!ig(e,n)){let r;for(let o=0,a=e.children.length;o<a;o++)r=e.children[o],!i.path.has(r)&&r.__.hittable&&Bl(r,t,i,s,n)}}function Bl(e,t,i,s,n){if(e.destroyed)return!1;if(e.__.hitSelf&&!ig(e,n)&&(_t.updateEventStyle&&!s&&_t.updateEventStyle(e,t),e.hasEvent(t,s))){i.phase=s?1:e===i.target?2:3;const r=wn.get(t,i);if(e.emitEvent(r,s),r.isStop)return!0}return!1}function ig(e,t){return t&&t.has(e)}const yv={wheel:{zoomSpeed:.5,moveSpeed:.5,rotateSpeed:.5,delta:{x:80/4,y:8}},pointer:{hitRadius:5,tapTime:120,longPressTime:800,transformTime:500,hover:!0,dragHover:!0,dragDistance:2,swipeDistance:20},touch:{preventDefault:"auto"},multiTouch:{},move:{autoDistance:2},zoom:{},cursor:!0,keyEvent:!0},{pathHasEventType:gh,pathCanDrag:mv,pathHasOutside:Nd}=jt;class bc{get dragging(){return this.dragger.dragging}get transforming(){return this.transformer.transforming}get moveMode(){return this.m.drag===!0||this.isHoldSpaceKey||this.isHoldMiddleKey||this.isHoldRightKey&&this.dragger.moving||this.isDragEmpty}get canHover(){return this.p.hover&&!this.config.mobile}get isDragEmpty(){return this.m.dragEmpty&&this.isRootPath(this.hoverData)&&(!this.downData||this.isRootPath(this.downData))}get isMobileDragEmpty(){return this.m.dragEmpty&&!this.canHover&&this.downData&&this.isTreePath(this.downData)}get isHoldMiddleKey(){return this.m.holdMiddleKey&&this.downData&&Ye.middle(this.downData)}get isHoldRightKey(){return this.m.holdRightKey&&this.downData&&Ye.right(this.downData)}get isHoldSpaceKey(){return this.m.holdSpaceKey&&dr.isHoldSpaceKey()}get m(){return this.config.move}get p(){return this.config.pointer}get hitRadius(){return this.p.hitRadius}constructor(t,i,s,n){this.config=gt.clone(yv),this.tapCount=0,this.downKeyMap={},this.target=t,this.canvas=i,this.selector=s,this.defaultPath=new et(t),this.createTransformer(),this.dragger=new eg(this),n&&(this.config=gt.default(n,this.config)),this.__listenEvents()}start(){this.running=!0}stop(){this.running=!1}receive(t){}pointerDown(t,i){t||(t=this.hoverData),t&&(Ye.defaultLeft(t),this.updateDownData(t),this.checkPath(t,i),this.downTime=Date.now(),this.emit(I.BEFORE_DOWN,t),this.emit(I.DOWN,t),Ye.left(t)&&(this.tapWait(),this.longPressWait(t)),this.waitRightTap=Ye.right(t),this.dragger.setDragData(t),this.isHoldRightKey||this.updateCursor(t))}pointerMove(t){if(t||(t=this.hoverData),!t)return;const{downData:i}=this;i&&Ye.defaultLeft(t),(this.canvas.bounds.hitPoint(t)||i)&&(this.pointerMoveReal(t),i&&this.dragger.checkDragOut(t))}pointerMoveReal(t){const{dragHover:i,dragDistance:s}=this.p;if(this.emit(I.BEFORE_MOVE,t,this.defaultPath),this.downData){const n=H.getDistance(this.downData,t)>s;n&&(this.waitTap&&this.pointerWaitCancel(),this.waitRightTap=!1),this.dragger.checkDrag(t,n)}this.dragger.moving||(this.updateHoverData(t),this.checkPath(t),this.emit(I.MOVE,t),this.dragging&&!i||this.pointerHover(t),this.dragger.dragging&&(this.dragger.dragOverOrOut(t),this.dragger.dragEnterOrLeave(t))),this.updateCursor(this.downData||t)}pointerUp(t){const{downData:i}=this;if(t||(t=i),!i)return;Ye.defaultLeft(t),t.multiTouch=i.multiTouch,this.findPath(t);const s=Object.assign(Object.assign({},t),{path:t.path.clone()});t.path.addList(i.path.list),this.checkPath(t),this.downData=null,this.emit(I.BEFORE_UP,t),this.emit(I.UP,t),this.touchLeave(t),t.isCancel||(this.tap(t),this.menuTap(t)),this.dragger.dragEnd(t),this.updateCursor(s)}pointerCancel(){const t=Object.assign({},this.dragger.dragData);t.isCancel=!0,this.pointerUp(t)}menu(t){this.findPath(t),this.emit(I.MENU,t),this.waitMenuTap=!0,!this.downData&&this.waitRightTap&&this.menuTap(t)}menuTap(t){this.waitRightTap&&this.waitMenuTap&&(this.emit(I.MENU_TAP,t),this.waitRightTap=this.waitMenuTap=!1)}createTransformer(){}move(t){}zoom(t){}rotate(t){}transformEnd(){}wheel(t){}multiTouch(t,i){}keyDown(t){if(!this.config.keyEvent)return;const{code:i}=t;this.downKeyMap[i]||(this.downKeyMap[i]=!0,dr.setDownCode(i),this.emit(ti.HOLD,t,this.defaultPath),this.moveMode&&(this.cancelHover(),this.updateCursor())),this.emit(ti.DOWN,t,this.defaultPath)}keyUp(t){if(!this.config.keyEvent)return;const{code:i}=t;this.downKeyMap[i]=!1,dr.setUpCode(i),this.emit(ti.UP,t,this.defaultPath),this.cursor==="grab"&&this.updateCursor()}pointerHover(t){this.canHover&&(this.pointerOverOrOut(t),this.pointerEnterOrLeave(t))}pointerOverOrOut(t){const{path:i}=t,{overPath:s}=this;this.overPath=i,s?i.indexAt(0)!==s.indexAt(0)&&(this.emit(I.OUT,t,s),this.emit(I.OVER,t,i)):this.emit(I.OVER,t,i)}pointerEnterOrLeave(t){let{path:i}=t;this.downData&&!this.moveMode&&(i=i.clone(),this.downData.path.forEach(n=>i.add(n)));const{enterPath:s}=this;this.enterPath=i,this.emit(I.LEAVE,t,s,i),this.emit(I.ENTER,t,i,s)}touchLeave(t){t.pointerType==="touch"&&this.enterPath&&(this.emit(I.LEAVE,t),this.dragger.dragging&&this.emit(Cr.LEAVE,t))}tap(t){const{pointer:i}=this.config,s=this.longTap(t);if(!i.tapMore&&s||!this.waitTap)return;i.tapMore&&this.emitTap(t);const n=Date.now()-this.downTime,r=[I.DOUBLE_TAP,I.DOUBLE_CLICK].some(o=>gh(t.path,o));n<i.tapTime+50&&r?(this.tapCount++,this.tapCount===2?(this.tapWaitCancel(),this.emitDoubleTap(t)):(clearTimeout(this.tapTimer),this.tapTimer=setTimeout(()=>{i.tapMore||(this.tapWaitCancel(),this.emitTap(t))},i.tapTime))):i.tapMore||(this.tapWaitCancel(),this.emitTap(t))}findPath(t,i){const{hitRadius:s,through:n}=this.p,{bottomList:r}=this,o=this.selector.getByPoint(t,s,Object.assign({bottomList:r,name:t.type},i||{through:n}));return o.throughPath&&(t.throughPath=o.throughPath),t.path=o.path,o.path}isRootPath(t){return t&&t.path.list[0].isLeafer}isTreePath(t){const i=this.target.app;return!i||!i.isApp?!1:i.editor&&!t.path.has(i.editor)&&t.path.has(i.tree)&&!t.target.syncEventer}checkPath(t,i){(i||this.moveMode&&!Nd(t.path))&&(t.path=this.defaultPath)}canMove(t){return t&&(this.moveMode||this.m.drag==="auto"&&!mv(t.path))&&!Nd(t.path)}isDrag(t){return this.dragger.getList().has(t)}isPress(t){return this.downData&&this.downData.path.has(t)}isHover(t){return this.enterPath&&this.enterPath.has(t)}isFocus(t){return this.focusData===t}cancelHover(){const{hoverData:t}=this;t&&(t.path=this.defaultPath,this.pointerHover(t))}updateDownData(t,i,s){const{downData:n}=this;!t&&n&&(t=n),t&&(this.findPath(t,i),s&&n&&t.path.addList(n.path.list),this.downData=t)}updateHoverData(t){t||(t=this.hoverData),t&&(this.findPath(t,{exclude:this.dragger.getList(!1,!0),name:I.MOVE}),this.hoverData=t)}updateCursor(t){if(!this.config.cursor||!this.canHover)return;if(t||(this.updateHoverData(),t=this.downData||this.hoverData),this.dragger.moving)return this.setCursor("grabbing");if(this.canMove(t))return this.setCursor(this.downData?"grabbing":"grab");if(!t)return;let i,s;const{path:n}=t;for(let r=0,o=n.length;r<o&&(i=n.list[r],s=i.syncEventer&&i.syncEventer.cursor||i.cursor,!s);r++);this.setCursor(s)}setCursor(t){this.cursor=t}getLocal(t,i){const s=this.canvas.getClientBounds(i);return{x:t.clientX-s.x,y:t.clientY-s.y}}emitTap(t){this.emit(I.TAP,t),this.emit(I.CLICK,t)}emitDoubleTap(t){this.emit(I.DOUBLE_TAP,t),this.emit(I.DOUBLE_CLICK,t)}pointerWaitCancel(){this.tapWaitCancel(),this.longPressWaitCancel()}tapWait(){clearTimeout(this.tapTimer),this.waitTap=!0}tapWaitCancel(){clearTimeout(this.tapTimer),this.waitTap=!1,this.tapCount=0}longPressWait(t){clearTimeout(this.longPressTimer),this.longPressTimer=setTimeout(()=>{this.longPressed=!0,this.emit(I.LONG_PRESS,t)},this.p.longPressTime)}longTap(t){let i;return this.longPressed&&(this.emit(I.LONG_TAP,t),(gh(t.path,I.LONG_TAP)||gh(t.path,I.LONG_PRESS))&&(i=!0)),this.longPressWaitCancel(),i}longPressWaitCancel(){clearTimeout(this.longPressTimer),this.longPressed=!1}__onResize(){const{dragOut:t}=this.m;this.shrinkCanvasBounds=new tt(this.canvas.bounds),this.shrinkCanvasBounds.spread(-(typeof t=="number"?t:2))}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(ji.RESIZE,this.__onResize,this)],t.once(Pt.READY,()=>this.__onResize())}__removeListenEvents(){this.target.off_(this.__eventIds),this.__eventIds.length=0}emit(t,i,s,n){this.running&&_v(t,i,s,n)}destroy(){this.__eventIds.length&&(this.stop(),this.__removeListenEvents(),this.dragger.destroy(),this.transformer&&this.transformer.destroy(),this.downData=this.overPath=this.enterPath=null)}}class vc{static set(t,i){this.custom[t]=i}static get(t){return this.custom[t]}}vc.custom={};class sg extends P_{constructor(){super(...arguments),this.maxTotal=1e3,this.pathList=new et,this.pixelList=new et}getPixelType(t,i){return this.__autoClear(),this.pixelList.add(t),rt.hitCanvas(i)}getPathType(t){return this.__autoClear(),this.pathList.add(t),rt.hitCanvas()}clearImageType(){this.__clearLeafList(this.pixelList)}clearPathType(){this.__clearLeafList(this.pathList)}__clearLeafList(t){t.length&&(t.forEach(i=>{i.__hitCanvas&&(i.__hitCanvas.destroy(),i.__hitCanvas=null)}),t.reset())}__autoClear(){this.pathList.length+this.pixelList.length>this.maxTotal&&this.clear()}clear(){this.clearPathType(),this.clearImageType()}}const{toInnerRadiusPointOf:wv,copy:xv,setRadius:bv}=H,Fn={},zr=ks.prototype;zr.__hitWorld=function(e){if(!this.__.hitSelf)return!1;this.__.hitRadius&&(xv(Fn,e),e=Fn,bv(e,this.__.hitRadius)),wv(e,this.__world,Fn);const{width:t,height:i}=this.__world,s=t<10&&i<10;if(this.__.hitBox||s){if(D.hitRadiusPoint(this.__layout.boxBounds,Fn))return!0;if(s)return!1}return(this.__layout.hitCanvasChanged||!this.__hitCanvas)&&(this.__updateHitCanvas(),this.__layout.boundsChanged||(this.__layout.hitCanvasChanged=!1)),this.__hit(Fn)};zr.__hitFill=function(e){var t;return(t=this.__hitCanvas)===null||t===void 0?void 0:t.hitFill(e,this.__.windingRule)};zr.__hitStroke=function(e,t){var i;return(i=this.__hitCanvas)===null||i===void 0?void 0:i.hitStroke(e,t)};zr.__hitPixel=function(e){var t;return(t=this.__hitCanvas)===null||t===void 0?void 0:t.hitPixel(e,this.__layout.renderBounds,this.__hitCanvas.hitScale)};zr.__drawHitPath=function(e){e&&this.__drawRenderPath(e)};const vv=new ae,ng=L.prototype;ng.__updateHitCanvas=function(){const e=this.__,{hitCanvasManager:t}=this.leafer,i=(e.__pixelFill||e.__isCanvas)&&e.hitFill==="pixel",s=e.__pixelStroke&&e.hitStroke==="pixel",n=i||s;this.__hitCanvas||(this.__hitCanvas=n?t.getPixelType(this,{contextSettings:{willReadFrequently:!0}}):t.getPathType(this));const r=this.__hitCanvas;if(n){const{renderBounds:o}=this.__layout,a=E.image.hitCanvasSize,h=r.hitScale=nt.set(0,0,a,a).getFitMatrix(o).a,{x:l,y:c,width:d,height:f}=nt.set(o).scale(h);r.resize({width:d,height:f,pixelRatio:1}),r.clear(),Wt.patternLocked=!0,this.__renderShape(r,{matrix:vv.setWith(this.__world).scaleWith(1/h).invertWith().translate(-l,-c)},!i,!s),Wt.patternLocked=!1,r.resetTransform(),e.__isHitPixel=!0}else e.__isHitPixel&&(e.__isHitPixel=!1);this.__drawHitPath(r),r.setStrokeOptions(e)};ng.__hit=function(e){E.name==="miniapp"&&this.__drawHitPath(this.__hitCanvas);const t=this.__;if(t.__isHitPixel&&this.__hitPixel(e))return!0;const{hitFill:i}=t,s=(t.fill||t.__isCanvas)&&(i==="path"||i==="pixel"&&!(t.__pixelFill||t.__isCanvas))||i==="all";if(s&&this.__hitFill(e))return!0;const{hitStroke:n,__strokeWidth:r}=t,o=t.stroke&&(n==="path"||n==="pixel"&&!t.__pixelStroke)||n==="all";if(!s&&!o)return!1;const a=e.radiusX*2;let h=a;if(o)switch(t.strokeAlign){case"inside":if(h+=r*2,!s&&this.__hitFill(e)&&this.__hitStroke(e,h))return!0;h=a;break;case"center":h+=r;break;case"outside":if(h+=r*2,!s){if(!this.__hitFill(e)&&this.__hitStroke(e,h))return!0;h=a}break}return h?this.__hitStroke(e,h):!1};const rg=L.prototype,og=Ne.prototype,ag=Ft.prototype;og.__updateHitCanvas=ag.__updateHitCanvas=function(){this.stroke||this.cornerRadius||(this.fill||this.__.__isCanvas)&&this.hitFill==="pixel"||this.hitStroke==="all"?rg.__updateHitCanvas.call(this):this.__hitCanvas&&(this.__hitCanvas=null)};og.__hitFill=ag.__hitFill=function(e){return this.__hitCanvas?rg.__hitFill.call(this,e):D.hitRadiusPoint(this.__layout.boxBounds,e)};function Ev(e){return e.leafer?e.leafer.selector:E.selector||(E.selector=rt.selector())}Mt.prototype.pick=function(e,t){return this.leafer||this.updateLayout(),t||(t=Jw),Ev(this).getByPoint(e,t.hitRadius||0,Object.assign(Object.assign({},t),{target:this}))};const Ec=ha.prototype;Ec.hitFill=function(e,t){return t?this.context.isPointInPath(e.x,e.y,t):this.context.isPointInPath(e.x,e.y)};Ec.hitStroke=function(e,t){return this.strokeWidth=t,this.context.isPointInStroke(e.x,e.y)};Ec.hitPixel=function(e,t,i=1){let{x:s,y:n,radiusX:r,radiusY:o}=e;t&&(s-=t.x,n-=t.y),nt.set(s-r,n-o,r*2,o*2).scale(i).ceil();const{data:a}=this.context.getImageData(nt.x,nt.y,nt.width||1,nt.height||1);for(let h=0,l=a.length;h<l;h+=4)if(a[h+3]>0)return!0;return a[3]>0};const Vd=it.get("LeaferCanvas");let hg=class extends ha{set zIndex(t){const{style:i}=this.view;i.zIndex=t,this.setAbsolute(this.view)}set childIndex(t){const{view:i,parentView:s}=this;if(i&&s){const n=s.children[t];n?(this.setAbsolute(n),s.insertBefore(i,n)):s.appendChild(n)}}init(){const{config:t}=this,i=t.view||t.canvas;i?this.__createViewFrom(i):this.__createView();const{style:s}=this.view;if(s.display||(s.display="block"),this.parentView=this.view.parentElement,this.parentView){const n=this.parentView.style;n.webkitUserSelect=n.userSelect="none"}E.syncDomFont&&!this.parentView&&(s.display="none",document.body.appendChild(this.view)),this.__createContext(),this.autoLayout||this.resize(t)}set backgroundColor(t){this.view.style.backgroundColor=t}get backgroundColor(){return this.view.style.backgroundColor}set hittable(t){this.view.style.pointerEvents=t?"auto":"none"}get hittable(){return this.view.style.pointerEvents!=="none"}__createView(){this.view=document.createElement("canvas")}__createViewFrom(t){let i=typeof t=="string"?document.getElementById(t):t;if(i)if(i instanceof HTMLCanvasElement)this.view=i;else{let s=i;if(i===window||i===document){const r=document.createElement("div"),{style:o}=r;o.position="absolute",o.top=o.bottom=o.left=o.right="0px",document.body.appendChild(r),s=r}this.__createView();const n=this.view;s.hasChildNodes()&&(this.setAbsolute(n),s.style.position||(s.style.position="relative")),s.appendChild(n)}else Vd.error(`no id: ${t}`),this.__createView()}setAbsolute(t){const{style:i}=t;i.position="absolute",i.top=i.left="0px"}updateViewSize(){const{width:t,height:i,pixelRatio:s}=this,{style:n}=this.view;n.width=t+"px",n.height=i+"px",this.view.width=Math.ceil(t*s),this.view.height=Math.ceil(i*s)}updateClientBounds(){this.view.parentElement&&(this.clientBounds=this.view.getBoundingClientRect())}startAutoLayout(t,i){if(this.resizeListener=i,t){this.autoBounds=t;try{this.resizeObserver=new ResizeObserver(n=>{this.updateClientBounds();for(const r of n)this.checkAutoBounds(r.contentRect)});const s=this.parentView;s?(this.resizeObserver.observe(s),this.checkAutoBounds(s.getBoundingClientRect())):(this.checkAutoBounds(this.view),Vd.warn("no parent"))}catch{this.imitateResizeObserver()}}else window.addEventListener("resize",()=>{const s=E.devicePixelRatio;if(this.pixelRatio!==s){const{width:n,height:r}=this;this.emitResize({width:n,height:r,pixelRatio:s})}})}imitateResizeObserver(){this.autoLayout&&(this.parentView&&this.checkAutoBounds(this.parentView.getBoundingClientRect()),E.requestRender(this.imitateResizeObserver.bind(this)))}checkAutoBounds(t){const i=this.view,{x:s,y:n,width:r,height:o}=this.autoBounds.getBoundsFrom(t),a={width:r,height:o,pixelRatio:E.devicePixelRatio};if(!this.isSameSize(a)){const{style:h}=i;h.marginLeft=s+"px",h.marginTop=n+"px",this.emitResize(a)}}stopAutoLayout(){this.autoLayout=!1,this.resizeListener=null,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}emitResize(t){const i={};gt.copyAttrs(i,this,Fe),this.resize(t),this.resizeListener&&this.width!==void 0&&this.resizeListener(new ji(t,i))}unrealCanvas(){if(!this.unreal&&this.parentView){const t=this.view;t&&t.remove(),this.view=this.parentView,this.unreal=!0}}destroy(){if(this.view){if(this.stopAutoLayout(),!this.unreal){const t=this.view;t.parentElement&&t.remove()}super.destroy()}}};la(CanvasRenderingContext2D.prototype);la(Path2D.prototype);const{mineType:yh,fileType:Sv}=wi;Object.assign(rt,{canvas:(e,t)=>new hg(e,t),image:e=>new gc(e)});function Tv(e,t){E.origin={createCanvas(i,s){const n=document.createElement("canvas");return n.width=i,n.height=s,n},canvasToDataURL:(i,s,n)=>i.toDataURL(yh(s),n),canvasToBolb:(i,s,n)=>new Promise(r=>i.toBlob(r,yh(s),n)),canvasSaveAs:(i,s,n)=>{const r=i.toDataURL(yh(Sv(s)),n);return E.origin.download(r,s)},download(i,s){return new Promise(n=>{let r=document.createElement("a");r.href=i,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),n()})},loadImage(i){return new Promise((s,n)=>{const r=new E.origin.Image,{crossOrigin:o}=E.image;o&&(r.setAttribute("crossOrigin",o),r.crossOrigin=o),r.onload=()=>{s(r)},r.onerror=a=>{n(a)},r.src=E.image.getRealURL(i)})},Image,PointerEvent,DragEvent},E.event={stopDefault(i){i.preventDefault()},stopNow(i){i.stopImmediatePropagation()},stop(i){i.stopPropagation()}},E.canvas=rt.canvas(),E.conicGradientSupport=!!E.canvas.context.createConicGradient}E.name="web";E.isMobile="ontouchstart"in window;E.requestRender=function(e){window.requestAnimationFrame(e)};le(E,"devicePixelRatio",{get(){return Math.max(1,devicePixelRatio)}});const{userAgent:fn}=navigator;fn.indexOf("Firefox")>-1?(E.conicGradientRotate90=!0,E.intWheelDeltaY=!0,E.syncDomFont=!0):fn.indexOf("Safari")>-1&&fn.indexOf("Chrome")===-1&&(E.fullImageShadow=!0);fn.indexOf("Windows")>-1?(E.os="Windows",E.intWheelDeltaY=!0):fn.indexOf("Mac")>-1?E.os="Mac":fn.indexOf("Linux")>-1&&(E.os="Linux");let Cv=class{get childrenChanged(){return this.hasAdd||this.hasRemove||this.hasVisible}get updatedList(){if(this.hasRemove){const t=new et;return this.__updatedList.list.forEach(i=>{i.leafer&&t.add(i)}),t}else return this.__updatedList}constructor(t,i){this.totalTimes=0,this.config={},this.__updatedList=new et,this.target=t,i&&(this.config=gt.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}update(){this.changed=!0,this.running&&this.target.emit(K.REQUEST)}__onAttrChange(t){this.__updatedList.add(t.target),this.update()}__onChildEvent(t){t.type===Et.ADD?(this.hasAdd=!0,this.__pushChild(t.child)):(this.hasRemove=!0,this.__updatedList.add(t.parent)),this.update()}__pushChild(t){this.__updatedList.add(t),t.isBranch&&this.__loopChildren(t)}__loopChildren(t){const{children:i}=t;for(let s=0,n=i.length;s<n;s++)this.__pushChild(i[s])}__onRquestData(){this.target.emitEvent(new Le(Le.DATA,{updatedList:this.updatedList})),this.__updatedList=new et,this.totalTimes++,this.changed=!1,this.hasVisible=!1,this.hasRemove=!1,this.hasAdd=!1}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(qe.CHANGE,this.__onAttrChange,this),t.on_([Et.ADD,Et.REMOVE],this.__onChildEvent,this),t.on_(Le.REQUEST,this.__onRquestData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=null,this.__updatedList=null)}};const{updateAllMatrix:Bv,updateBounds:Ud,updateAllWorldOpacity:Rv}=Vt,{pushAllChildBranch:kv,pushAllParent:Gd}=Ms;function Lv(e,t){let i;e.list.forEach(s=>{i=s.__layout,t.without(s)&&!i.proxyZoom&&(i.matrixChanged?(Bv(s,!0),t.add(s),s.isBranch&&kv(s,t),Gd(s,t)):i.boundsChanged&&(t.add(s),s.isBranch&&(s.__tempNumber=0),Gd(s,t)))})}function Ov(e){let t,i,s;e.sort(!0),e.levels.forEach(n=>{t=e.levelMap[n];for(let r=0,o=t.length;r<o;r++){if(i=t[r],i.isBranch&&i.__tempNumber){s=i.children;for(let a=0,h=s.length;a<h;a++)s[a].isBranch||Ud(s[a])}Ud(i)}})}function Pv(e){let t;e.list.forEach(i=>{t=i.__layout,t.opacityChanged&&Rv(i),t.stateStyleChanged&&setTimeout(()=>t.stateStyleChanged&&i.updateState()),i.__updateChange()})}const{worldBounds:Yd}=as,Mv={x:0,y:0,width:1e5,height:1e5};let Xd=class{constructor(t){this.updatedBounds=new tt,this.beforeBounds=new tt,this.afterBounds=new tt,t instanceof Array&&(t=new et(t)),this.updatedList=t}setBefore(){this.beforeBounds.setListWithFn(this.updatedList.list,Yd)}setAfter(){const{list:t}=this.updatedList;t.some(i=>i.noBounds)?this.afterBounds.set(Mv):this.afterBounds.setListWithFn(t,Yd),this.updatedBounds.setList([this.beforeBounds,this.afterBounds])}merge(t){this.updatedList.addList(t.updatedList.list),this.beforeBounds.add(t.beforeBounds),this.afterBounds.add(t.afterBounds),this.updatedBounds.add(t.updatedBounds)}destroy(){this.updatedList=null}};const{updateAllMatrix:Av,updateAllChange:$v}=Vt,mh=it.get("Layouter");let lg=class cg{constructor(t,i){this.totalTimes=0,this.config={},this.__levelList=new q_,this.target=t,i&&(this.config=gt.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}layout(){if(!this.running)return;const{target:t}=this;this.times=0;try{t.emit(J.START),this.layoutOnce(),t.emitEvent(new J(J.END,this.layoutedBlocks,this.times))}catch(i){mh.error(i)}this.layoutedBlocks=null}layoutAgain(){this.layouting?this.waitAgain=!0:this.layoutOnce()}layoutOnce(){if(this.layouting)return mh.warn("layouting");if(this.times>3)return mh.warn("layout max times");this.times++,this.totalTimes++,this.layouting=!0,this.target.emit(Le.REQUEST),this.totalTimes>1?this.partLayout():this.fullLayout(),this.layouting=!1,this.waitAgain&&(this.waitAgain=!1,this.layoutOnce())}partLayout(){var t;if(!(!((t=this.__updatedList)===null||t===void 0)&&t.length))return;const i=zt.start("PartLayout"),{target:s,__updatedList:n}=this,{BEFORE:r,LAYOUT:o,AFTER:a}=J,h=this.getBlocks(n);h.forEach(l=>l.setBefore()),s.emitEvent(new J(r,h,this.times)),this.extraBlock=null,n.sort(),Lv(n,this.__levelList),Ov(this.__levelList),Pv(n),this.extraBlock&&h.push(this.extraBlock),h.forEach(l=>l.setAfter()),s.emitEvent(new J(o,h,this.times)),s.emitEvent(new J(a,h,this.times)),this.addBlocks(h),this.__levelList.reset(),this.__updatedList=null,zt.end(i)}fullLayout(){const t=zt.start("FullLayout"),{target:i}=this,{BEFORE:s,LAYOUT:n,AFTER:r}=J,o=this.getBlocks(new et(i));i.emitEvent(new J(s,o,this.times)),cg.fullLayout(i),o.forEach(a=>{a.setAfter()}),i.emitEvent(new J(n,o,this.times)),i.emitEvent(new J(r,o,this.times)),this.addBlocks(o),zt.end(t)}static fullLayout(t){Av(t,!0),t.isBranch?Ms.updateBounds(t):Vt.updateBounds(t),$v(t)}addExtra(t){if(!this.__updatedList.has(t)){const{updatedList:i,beforeBounds:s}=this.extraBlock||(this.extraBlock=new Xd([]));i.length?s.add(t.__world):s.set(t.__world),i.add(t)}}createBlock(t){return new Xd(t)}getBlocks(t){return[this.createBlock(t)]}addBlocks(t){this.layoutedBlocks?this.layoutedBlocks.push(...t):this.layoutedBlocks=t}__onReceiveWatchData(t){this.__updatedList=t.data.updatedList}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(J.REQUEST,this.layout,this),t.on_(J.AGAIN,this.layoutAgain,this),t.on_(Le.DATA,this.__onReceiveWatchData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.config=null)}};const Gs=it.get("Renderer");let Dv=class{get needFill(){return!!(!this.canvas.allowBackgroundColor&&this.config.fill)}constructor(t,i,s){this.FPS=60,this.totalTimes=0,this.times=0,this.config={usePartRender:!0,maxFPS:60},this.target=t,this.canvas=i,s&&(this.config=gt.default(s,this.config)),this.__listenEvents()}start(){this.running=!0,this.update(!1)}stop(){this.running=!1}update(t=!0){this.changed||(this.changed=t),this.__requestRender()}requestLayout(){this.target.emit(J.REQUEST)}render(t){if(!(this.running&&this.canvas.view))return this.update();const{target:i}=this;this.times=0,this.totalBounds=new tt,Gs.log(i.innerName,"--->");try{i.isApp||i.app.emit(K.CHILD_START,i),this.emitRender(K.START),this.renderOnce(t),this.emitRender(K.END,this.totalBounds),Wt.clearRecycled()}catch(s){this.rendering=!1,Gs.error(s)}Gs.log("-------------|")}renderAgain(){this.rendering?this.waitAgain=!0:this.renderOnce()}renderOnce(t){if(this.rendering)return Gs.warn("rendering");if(this.times>3)return Gs.warn("render max times");if(this.times++,this.totalTimes++,this.rendering=!0,this.changed=!1,this.renderBounds=new tt,this.renderOptions={},t)this.emitRender(K.BEFORE),t();else{if(this.requestLayout(),this.ignore){this.ignore=this.rendering=!1;return}this.emitRender(K.BEFORE),this.config.usePartRender&&this.totalTimes>1?this.partRender():this.fullRender()}this.emitRender(K.RENDER,this.renderBounds,this.renderOptions),this.emitRender(K.AFTER,this.renderBounds,this.renderOptions),this.updateBlocks=null,this.rendering=!1,this.waitAgain&&(this.waitAgain=!1,this.renderOnce())}partRender(){const{canvas:t,updateBlocks:i}=this;i&&(this.mergeBlocks(),i.forEach(s=>{t.bounds.hit(s)&&!s.isEmpty()&&this.clipRender(s)}))}clipRender(t){const i=zt.start("PartRender"),{canvas:s}=this,n=t.getIntersect(s.bounds),r=t.includes(this.target.__world),o=new tt(n);s.save(),r&&!it.showRepaint?s.clear():(n.spread(10+1/this.canvas.pixelRatio).ceil(),s.clearWorld(n,!0),s.clipWorld(n,!0)),this.__render(n,r,o),s.restore(),zt.end(i)}fullRender(){const t=zt.start("FullRender"),{canvas:i}=this;i.save(),i.clear(),this.__render(i.bounds,!0),i.restore(),zt.end(t)}__render(t,i,s){const n=t.includes(this.target.__world)?{includes:i}:{bounds:t,includes:i};this.needFill&&this.canvas.fillWorld(t,this.config.fill),it.showRepaint&&this.canvas.strokeWorld(t,"red"),this.target.__render(this.canvas,n),this.renderBounds=s=s||t,this.renderOptions=n,this.totalBounds.isEmpty()?this.totalBounds=s:this.totalBounds.add(s),it.showHitView&&this.renderHitView(n),it.showBoundsView&&this.renderBoundsView(n),this.canvas.updateRender(s)}renderHitView(t){}renderBoundsView(t){}addBlock(t){this.updateBlocks||(this.updateBlocks=[]),this.updateBlocks.push(t)}mergeBlocks(){const{updateBlocks:t}=this;if(t){const i=new tt;i.setList(t),t.length=0,t.push(i)}}__requestRender(){if(this.requestTime)return;const t=this.requestTime=Date.now();E.requestRender(()=>{this.FPS=Math.min(60,Math.ceil(1e3/(Date.now()-t))),this.requestTime=0,this.running&&(this.changed&&this.canvas.view&&this.render(),this.target.emit(K.NEXT))})}__onResize(t){if(!this.canvas.unreal){if(t.bigger||!t.samePixelRatio){const{width:i,height:s}=t.old;if(!new tt(0,0,i,s).includes(this.target.__world)||this.needFill||!t.samePixelRatio){this.addBlock(this.canvas.bounds),this.target.forceUpdate("surface");return}}this.addBlock(new tt(0,0,1,1)),this.update()}}__onLayoutEnd(t){t.data&&t.data.map(i=>{let s;i.updatedList&&i.updatedList.list.some(n=>(s=!n.__world.width||!n.__world.height,s&&(n.isLeafer||Gs.tip(n.innerName,": empty"),s=!n.isBranch||n.isBranchLeaf),s)),this.addBlock(s?this.canvas.bounds:i.updatedBounds)})}emitRender(t,i,s){this.target.emitEvent(new K(t,this.times,i,s))}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(K.REQUEST,this.update,this),t.on_(J.END,this.__onLayoutEnd,this),t.on_(K.AGAIN,this.renderAgain,this),t.on_(ji.RESIZE,this.__onResize,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.canvas=this.config=null)}};const{hitRadiusPoint:Iv}=D;let Wv=class{constructor(t,i){this.target=t,this.selector=i}getByPoint(t,i,s){i||(i=0),s||(s={});const n=s.through||!1,r=s.ignoreHittable||!1,o=s.target||this.target;this.exclude=s.exclude||null,this.point={x:t.x,y:t.y,radiusX:i,radiusY:i},this.findList=new et(s.findList),s.findList||this.hitBranch(o);const{list:a}=this.findList,h=this.getBestMatchLeaf(a,s.bottomList,r),l=r?this.getPath(h):this.getHitablePath(h);return this.clear(),n?{path:l,target:h,throughPath:a.length?this.getThroughPath(a):l}:{path:l,target:h}}getBestMatchLeaf(t,i,s){if(t.length){let n;this.findList=new et;const{x:r,y:o}=this.point,a={x:r,y:o,radiusX:0,radiusY:0};for(let h=0,l=t.length;h<l;h++)if(n=t[h],(s||Vt.worldHittable(n))&&(this.hitChild(n,a),this.findList.length))return this.findList.list[0]}if(i){for(let n=0,r=i.length;n<r;n++)if(this.hitChild(i[n].target,this.point,i[n].proxy),this.findList.length)return this.findList.list[0]}return t[0]}getPath(t){const i=new et;for(;t;)i.add(t),t=t.parent;return this.target&&i.add(this.target),i}getHitablePath(t){const i=this.getPath(t&&t.hittable?t:null);let s,n=new et;for(let r=i.list.length-1;r>-1&&(s=i.list[r],!(!s.__.hittable||(n.addAt(s,0),!s.__.hitChildren)));r--);return n}getThroughPath(t){const i=new et,s=[];for(let a=t.length-1;a>-1;a--)s.push(this.getPath(t[a]));let n,r,o;for(let a=0,h=s.length;a<h;a++){n=s[a],r=s[a+1];for(let l=0,c=n.length;l<c&&(o=n.list[l],!(r&&r.has(o)));l++)i.add(o)}return i}hitBranch(t){this.eachFind(t.children,t.__onlyHitMask)}eachFind(t,i){let s,n;const{point:r}=this,o=t.length;for(let a=o-1;a>-1;a--)s=t[a],!(!s.__.visible||i&&!s.__.mask)&&(n=s.__.hitRadius?!0:Iv(s.__world,r),s.isBranch?(n||s.__ignoreHitWorld)&&(this.eachFind(s.children,s.__onlyHitMask),s.isBranchLeaf&&this.hitChild(s,r)):n&&this.hitChild(s,r))}hitChild(t,i,s){if(!(this.exclude&&this.exclude.has(t))&&t.__hitWorld(i)){const{parent:n}=t;if(n&&n.__hasMask&&!t.__.mask&&!n.children.some(r=>r.__.mask&&r.__hitWorld(i)))return;this.findList.add(s||t)}}clear(){this.point=null,this.findList=null,this.exclude=null}destroy(){this.clear()}},Fv=class{constructor(t,i){this.config={},i&&(this.config=gt.default(i,this.config)),this.picker=new Wv(this.target=t,this),this.finder=rt.finder&&rt.finder()}getByPoint(t,i,s){return E.backgrounder&&this.target&&this.target.updateLayout(),this.picker.getByPoint(t,i,s)}getBy(t,i,s,n){return this.finder?this.finder.getBy(t,i,s,n):St.need("find")}destroy(){this.picker.destroy(),this.finder&&this.finder.destroy()}};Object.assign(rt,{watcher:(e,t)=>new Cv(e,t),layouter:(e,t)=>new lg(e,t),renderer:(e,t,i)=>new Dv(e,t,i),selector:(e,t)=>new Fv(e,t)});E.layout=lg.fullLayout;const _e={convert(e,t){const i=jt.getBase(e),s=Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:e.width,height:e.height,pointerType:e.pointerType,pressure:e.pressure});return s.pointerType==="pen"&&(s.tangentialPressure=e.tangentialPressure,s.tiltX=e.tiltX,s.tiltY=e.tiltY,s.twist=e.twist),s},convertMouse(e,t){const i=jt.getBase(e);return Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:1,height:1,pointerType:"mouse",pressure:.5})},convertTouch(e,t){const i=_e.getTouch(e),s=jt.getBase(e);return Object.assign(Object.assign({},s),{x:t.x,y:t.y,width:1,height:1,pointerType:"touch",multiTouch:e.touches.length>1,pressure:i.force})},getTouch(e){return e.targetTouches[0]||e.changedTouches[0]}},Kd={convert(e){const t=jt.getBase(e);return Object.assign(Object.assign({},t),{code:e.code,key:e.key})}},{pathCanDrag:zv}=jt;let Hv=class extends bc{__listenEvents(){super.__listenEvents();const t=this.view=this.canvas.view;this.viewEvents={pointerdown:this.onPointerDown,mousedown:this.onMouseDown,touchstart:this.onTouchStart,contextmenu:this.onContextMenu,wheel:this.onWheel,gesturestart:this.onGesturestart,gesturechange:this.onGesturechange,gestureend:this.onGestureend},this.windowEvents={pointermove:this.onPointerMove,pointerup:this.onPointerUp,pointercancel:this.onPointerCancel,mousemove:this.onMouseMove,mouseup:this.onMouseUp,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchCancel,keydown:this.onKeyDown,keyup:this.onKeyUp,scroll:this.onScroll};const{viewEvents:i,windowEvents:s}=this;for(let n in i)i[n]=i[n].bind(this),t.addEventListener(n,i[n]);for(let n in s)s[n]=s[n].bind(this),window.addEventListener(n,s[n])}__removeListenEvents(){super.__removeListenEvents();const{viewEvents:t,windowEvents:i}=this;for(let s in t)this.view.removeEventListener(s,t[s]),this.viewEvents={};for(let s in i)window.removeEventListener(s,i[s]),this.windowEvents={}}getTouches(t){const i=[];for(let s=0,n=t.length;s<n;s++)i.push(t[s]);return i}preventDefaultPointer(t){const{pointer:i}=this.config;i.preventDefault&&t.preventDefault()}preventDefaultWheel(t){const{wheel:i}=this.config;i.preventDefault&&t.preventDefault()}preventWindowPointer(t){return!this.downData&&t.target!==this.view}onKeyDown(t){this.keyDown(Kd.convert(t))}onKeyUp(t){this.keyUp(Kd.convert(t))}onContextMenu(t){this.config.pointer.preventDefaultMenu&&t.preventDefault(),this.menu(_e.convert(t,this.getLocal(t)))}onScroll(){this.canvas.updateClientBounds()}onPointerDown(t){this.preventDefaultPointer(t),!(this.config.pointer.touch||this.useMultiTouch)&&(this.usePointer||(this.usePointer=!0),this.pointerDown(_e.convert(t,this.getLocal(t))))}onPointerMove(t){this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t)||(this.usePointer||(this.usePointer=!0),this.pointerMove(_e.convert(t,this.getLocal(t,!0))))}onPointerUp(t){this.downData&&this.preventDefaultPointer(t),!(this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t))&&this.pointerUp(_e.convert(t,this.getLocal(t)))}onPointerCancel(){this.useMultiTouch||this.pointerCancel()}onMouseDown(t){this.preventDefaultPointer(t),!(this.useTouch||this.usePointer)&&this.pointerDown(_e.convertMouse(t,this.getLocal(t)))}onMouseMove(t){this.useTouch||this.usePointer||this.preventWindowPointer(t)||this.pointerMove(_e.convertMouse(t,this.getLocal(t,!0)))}onMouseUp(t){this.downData&&this.preventDefaultPointer(t),!(this.useTouch||this.usePointer||this.preventWindowPointer(t))&&this.pointerUp(_e.convertMouse(t,this.getLocal(t)))}onMouseCancel(){this.useTouch||this.usePointer||this.pointerCancel()}onTouchStart(t){const i=_e.getTouch(t),s=this.getLocal(i,!0),{preventDefault:n}=this.config.touch;(n===!0||n==="auto"&&zv(this.findPath(s)))&&t.preventDefault(),this.multiTouchStart(t),!this.usePointer&&(this.touchTimer&&(window.clearTimeout(this.touchTimer),this.touchTimer=0),this.useTouch=!0,this.pointerDown(_e.convertTouch(t,s)))}onTouchMove(t){if(this.multiTouchMove(t),this.usePointer||this.preventWindowPointer(t))return;const i=_e.getTouch(t);this.pointerMove(_e.convertTouch(t,this.getLocal(i)))}onTouchEnd(t){if(this.multiTouchEnd(),this.usePointer||this.preventWindowPointer(t))return;this.touchTimer&&clearTimeout(this.touchTimer),this.touchTimer=setTimeout(()=>{this.useTouch=!1},500);const i=_e.getTouch(t);this.pointerUp(_e.convertTouch(t,this.getLocal(i)))}onTouchCancel(){this.usePointer||this.pointerCancel()}multiTouchStart(t){this.useMultiTouch=t.touches.length>1,this.touches=this.useMultiTouch?this.getTouches(t.touches):void 0,this.useMultiTouch&&this.pointerCancel()}multiTouchMove(t){if(this.useMultiTouch&&t.touches.length>1){const i=this.getTouches(t.touches),s=this.getKeepTouchList(this.touches,i);s.length>1&&(this.multiTouch(jt.getBase(t),s),this.touches=i)}}multiTouchEnd(){this.touches=null,this.useMultiTouch=!1,this.transformEnd()}getKeepTouchList(t,i){let s;const n=[];return t.forEach(r=>{s=i.find(o=>o.identifier===r.identifier),s&&n.push({from:this.getLocal(r),to:this.getLocal(s)})}),n}getLocalTouchs(t){return t.map(i=>this.getLocal(i))}onWheel(t){this.preventDefaultWheel(t),this.wheel(Object.assign(Object.assign(Object.assign({},jt.getBase(t)),this.getLocal(t)),{deltaX:t.deltaX,deltaY:t.deltaY}))}onGesturestart(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.lastGestureScale=1,this.lastGestureRotation=0)}onGesturechange(t){if(this.useMultiTouch)return;this.preventDefaultWheel(t);const i=jt.getBase(t);Object.assign(i,this.getLocal(t));const s=t.scale/this.lastGestureScale,n=(t.rotation-this.lastGestureRotation)/Math.PI*180*($t.within(this.config.wheel.rotateSpeed,0,1)/4+.1);this.zoom(Object.assign(Object.assign({},i),{scale:s*s})),this.rotate(Object.assign(Object.assign({},i),{rotation:n})),this.lastGestureScale=t.scale,this.lastGestureRotation=t.rotation}onGestureend(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.transformEnd())}setCursor(t){super.setCursor(t);const i=[];this.eachCursor(t,i),typeof i[i.length-1]=="object"&&i.push("default"),this.canvas.view.style.cursor=i.map(s=>typeof s=="object"?`url(${s.url}) ${s.x||0} ${s.y||0}`:s).join(",")}eachCursor(t,i,s=0){if(s++,t instanceof Array)t.forEach(n=>this.eachCursor(n,i,s));else{const n=typeof t=="string"&&vc.get(t);n&&s<2?this.eachCursor(n,i,s):i.push(t)}}destroy(){this.view&&(super.destroy(),this.view=null,this.touches=null)}};function pn(e,t){let i;const{rows:s,decorationY:n,decorationHeight:r}=e.__.__textDrawData;for(let o=0,a=s.length;o<a;o++)i=s[o],i.text?t.fillText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.fillText(h.char,h.x,i.y)}),n&&t.fillRect(i.x,i.y+n,i.width,r)}function jv(e,t,i){i.fillStyle=e,t.__.__font?pn(t,i):t.__.windingRule?i.fill(t.__.windingRule):i.fill()}function Nv(e,t,i){let s;const{windingRule:n,__font:r}=t.__;for(let o=0,a=e.length;o<a;o++)s=e[o],!(s.image&&je.checkImage(t,i,s,!r))&&s.style&&(i.fillStyle=s.style,s.transform?(i.save(),i.transform(s.transform),s.blendMode&&(i.blendMode=s.blendMode),r?pn(t,i):n?i.fill(n):i.fill(),i.restore()):s.blendMode?(i.saveBlendMode(s.blendMode),r?pn(t,i):n?i.fill(n):i.fill(),i.restoreBlendMode()):r?pn(t,i):n?i.fill(n):i.fill())}function Sc(e,t,i){const{strokeAlign:s}=t.__,n=typeof e!="string";switch(s){case"center":i.setStroke(n?void 0:e,t.__.strokeWidth,t.__),n?fr(e,!0,t,i):Br(t,i);break;case"inside":qd("inside",e,n,t,i);break;case"outside":qd("outside",e,n,t,i);break}}function qd(e,t,i,s,n){const{__strokeWidth:r,__font:o}=s.__,a=n.getSameCanvas(!0,!0);a.setStroke(i?void 0:t,r*2,s.__),a.font=o,i?fr(t,!0,s,a):Br(s,a),a.blendMode=e==="outside"?"destination-out":"destination-in",pn(s,a),a.blendMode="normal",s.__worldFlipped?n.copyWorldByReset(a,s.__nowWorld):n.copyWorldToInner(a,s.__nowWorld,s.__layout.renderBounds),a.recycle(s.__nowWorld)}function Br(e,t){let i;const{rows:s,decorationY:n,decorationHeight:r}=e.__.__textDrawData;for(let o=0,a=s.length;o<a;o++)i=s[o],i.text?t.strokeText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.strokeText(h.char,h.x,i.y)}),n&&t.strokeRect(i.x,i.y+n,i.width,r)}function fr(e,t,i,s){let n;for(let r=0,o=e.length;r<o;r++)n=e[r],!(n.image&&je.checkImage(i,s,n,!1))&&n.style&&(s.strokeStyle=n.style,n.blendMode?(s.saveBlendMode(n.blendMode),t?Br(i,s):s.stroke(),s.restoreBlendMode()):t?Br(i,s):s.stroke())}function Vv(e,t,i){const s=t.__,{__strokeWidth:n,strokeAlign:r,__font:o}=s;if(n)if(o)Sc(e,t,i);else switch(r){case"center":i.setStroke(e,n,s),i.stroke(),s.__useArrow&&ug(t,i);break;case"inside":i.save(),i.setStroke(e,n*2,s),s.windingRule?i.clip(s.windingRule):i.clip(),i.stroke(),i.restore();break;case"outside":const a=i.getSameCanvas(!0,!0);a.setStroke(e,n*2,s),t.__drawRenderPath(a),a.stroke(),s.windingRule?a.clip(s.windingRule):a.clip(),a.clearWorld(t.__layout.renderBounds),t.__worldFlipped?i.copyWorldByReset(a,t.__nowWorld):i.copyWorldToInner(a,t.__nowWorld,t.__layout.renderBounds),a.recycle(t.__nowWorld);break}}function Uv(e,t,i){const s=t.__,{__strokeWidth:n,strokeAlign:r,__font:o}=s;if(n)if(o)Sc(e,t,i);else switch(r){case"center":i.setStroke(void 0,n,s),fr(e,!1,t,i),s.__useArrow&&ug(t,i);break;case"inside":i.save(),i.setStroke(void 0,n*2,s),s.windingRule?i.clip(s.windingRule):i.clip(),fr(e,!1,t,i),i.restore();break;case"outside":const{renderBounds:a}=t.__layout,h=i.getSameCanvas(!0,!0);t.__drawRenderPath(h),h.setStroke(void 0,n*2,s),fr(e,!1,t,h),s.windingRule?h.clip(s.windingRule):h.clip(),h.clearWorld(a),t.__worldFlipped?i.copyWorldByReset(h,t.__nowWorld):i.copyWorldToInner(h,t.__nowWorld,a),h.recycle(t.__nowWorld);break}}function ug(e,t){e.__.dashPattern&&(t.beginPath(),e.__drawPathByData(t,e.__.__pathForArrow),t.dashPattern=null,t.stroke())}const{getSpread:Gv,getOuterOf:Yv,getByMove:Xv,getIntersectData:Kv}=D;function qv(e,t,i){const s=t.getSameCanvas(),n=e.__nowWorld;let r,o,a,h,{scaleX:l,scaleY:c}=n;if(l<0&&(l=-l),c<0&&(c=-c),t.bounds.includes(n))h=s,r=a=n;else{const{renderShapeSpread:d}=e.__layout,f=Kv(d?Gv(t.bounds,l===c?d*l:[d*c,d*l]):t.bounds,n);o=t.bounds.getFitMatrix(f);let{a:u,d:p}=o;if(o.a<1&&(h=t.getSameCanvas(),e.__renderShape(h,i),l*=u,c*=p),a=Yv(n,o),r=Xv(a,-o.e,-o.f),i.matrix){const{matrix:y}=i;o.multiply(y),u*=y.scaleX,p*=y.scaleY}i=Object.assign(Object.assign({},i),{matrix:o.withScale(u,p)})}return e.__renderShape(s,i),{canvas:s,matrix:o,bounds:r,worldCanvas:h,shapeBounds:a,scaleX:l,scaleY:c}}let Rl;function Zv(e,t){const i=t.__,s=[];let n=i.__input[e],r;n instanceof Array||(n=[n]),Rl=je.recycleImage(e,i);for(let o=0,a=n.length,h;o<a;o++)h=Jv(e,n[o],t),h&&s.push(h);i["_"+e]=s.length?s:void 0,s.length&&s[0].image&&(r=s[0].image.hasOpacityPixel),e==="fill"?i.__pixelFill=r:i.__pixelStroke=r}function Jv(e,t,i){if(typeof t!="object"||t.visible===!1||t.opacity===0)return;const{boxBounds:s}=i.__layout;switch(t.type){case"solid":let{type:n,blendMode:r,color:o,opacity:a}=t;return{type:n,blendMode:r,style:Xt.string(o,a)};case"image":return je.image(i,e,t,s,!Rl||!Rl[t.url]);case"linear":return es.linearGradient(t,s);case"radial":return es.radialGradient(t,s);case"angular":return es.conicGradient(t,s);default:return t.r!==void 0?{type:"solid",style:Xt.string(t)}:void 0}}const Qv={compute:Zv,fill:jv,fills:Nv,fillText:pn,stroke:Vv,strokes:Uv,strokeText:Sc,drawTextStroke:Br,shape:qv};let zn={};const{get:Tc,rotateOfOuter:dg,translate:rn,scaleOfOuter:tE,scale:fg,rotate:pg}=G;function _g(e,t,i,s,n,r,o){const a=Tc();rn(a,t.x+i,t.y+s),fg(a,n,r),o&&dg(a,{x:t.x+t.width/2,y:t.y+t.height/2},o),e.transform=a}function gg(e,t,i,s,n,r,o){const a=Tc();rn(a,t.x+i,t.y+s),n&&fg(a,n,r),o&&pg(a,o),e.transform=a}function yg(e,t,i,s,n,r,o,a,h,l){const c=Tc();if(h)if(l==="center")dg(c,{x:i/2,y:s/2},h);else switch(pg(c,h),h){case 90:rn(c,s,0);break;case 180:rn(c,i,s);break;case 270:rn(c,0,i);break}zn.x=t.x+n,zn.y=t.y+r,rn(c,zn.x,zn.y),o&&tE(c,zn,o,a),e.transform=c}const{get:eE,translate:iE}=G,sE=new tt,wh={},xh={};function mg(e,t,i,s){const{blendMode:n,sync:r}=i;n&&(e.blendMode=n),r&&(e.sync=r),e.data=wg(i,s,t)}function wg(e,t,i){let{width:s,height:n}=i;e.padding&&(t=sE.set(t).shrink(e.padding)),e.mode==="strench"&&(e.mode="stretch");const{opacity:r,mode:o,align:a,offset:h,scale:l,size:c,rotation:d,repeat:f}=e,u=t.width===s&&t.height===n,p={mode:o},y=a!=="center"&&(d||0)%180===90,v=y?n:s,S=y?s:n;let x=0,C=0,w,M;if(!o||o==="cover"||o==="fit"){if(!u||d){const z=t.width/v,V=t.height/S;w=M=o==="fit"?Math.min(z,V):Math.max(z,V),x+=(t.width-s*w)/2,C+=(t.height-n*M)/2}}else(l||c)&&($t.getScaleData(l,c,i,xh),w=xh.scaleX,M=xh.scaleY);if(a){const z={x,y:C,width:v,height:S};w&&(z.width*=w,z.height*=M),L_.toPoint(a,z,t,wh,!0),x+=wh.x,C+=wh.y}switch(h&&(x+=h.x,C+=h.y),o){case"stretch":u||(s=t.width,n=t.height);break;case"normal":case"clip":(x||C||w||d)&&gg(p,t,x,C,w,M,d);break;case"repeat":(!u||w||d)&&yg(p,t,s,n,x,C,w,M,d,a),f||(p.repeat="repeat");break;case"fit":case"cover":default:w&&_g(p,t,x,C,w,M,d)}return p.transform||(t.x||t.y)&&(p.transform=eE(),iE(p.transform,t.x,t.y)),w&&o!=="stretch"&&(p.scaleX=w,p.scaleY=M),p.width=s,p.height=n,r&&(p.opacity=r),f&&(p.repeat=typeof f=="string"?f==="x"?"repeat-x":"repeat-y":"repeat"),p}let Hn,nE=new tt;const{isSame:rE}=D;function oE(e,t,i,s,n){let r,o;const a=Wt.get(i);return Hn&&i===Hn.paint&&rE(s,Hn.boxBounds)?r=Hn.leafPaint:(r={type:i.type,image:a},Hn=a.use>1?{leafPaint:r,paint:i,boxBounds:nE.set(s)}:null),(n||a.loading)&&(o={image:a,attrName:t,attrValue:i}),a.ready?(Zd(e,t,i,a,r,s),n&&(Jd(e,o),Qd(e,o))):a.error?n&&tf(e,o,a.error):(n&&(bh(e,!0),Jd(e,o)),r.loadId=a.load(()=>{bh(e,!1),e.destroyed||(Zd(e,t,i,a,r,s)&&(a.hasOpacityPixel&&(e.__layout.hitCanvasChanged=!0),e.forceUpdate("surface")),Qd(e,o)),r.loadId=null},h=>{bh(e,!1),tf(e,o,h),r.loadId=null})),r}function Zd(e,t,i,s,n,r){if(t==="fill"&&!e.__.__naturalWidth){const o=e.__;if(o.__naturalWidth=s.width/o.pixelRatio,o.__naturalHeight=s.height/o.pixelRatio,o.__autoSide)return e.forceUpdate("width"),e.__proxyData&&(e.setProxyAttr("width",o.width),e.setProxyAttr("height",o.height)),!1}return n.data||mg(n,s,i,r),!0}function Jd(e,t){Cc(e,be.LOAD,t)}function Qd(e,t){Cc(e,be.LOADED,t)}function tf(e,t,i){t.error=i,e.forceUpdate("surface"),Cc(e,be.ERROR,t)}function Cc(e,t,i){e.hasEvent(t)&&e.emitEvent(new be(t,i))}function bh(e,t){const{leafer:i}=e;i&&i.viewReady&&(i.renderer.ignore=t)}const{get:ef,scale:sf,copy:nf}=G,{ceil:rf,abs:of}=Math;function kl(e,t,i){let{scaleX:s,scaleY:n}=Wt.patternLocked?e.__world:e.__nowWorld;const r=s+"-"+n+"-"+i;if(t.patternId!==r&&!e.destroyed){s=of(s),n=of(n);const{image:o,data:a}=t;let h,l,{width:c,height:d,scaleX:f,scaleY:u,opacity:p,transform:y,repeat:v}=a;f&&(l=ef(),nf(l,y),sf(l,1/f,1/u),s*=f,n*=u),s*=i,n*=i,c*=s,d*=n;const S=c*d;if(!v&&S>E.image.maxCacheSize)return!1;let x=E.image.maxPatternSize;if(!o.isSVG){const M=o.width*o.height;x>M&&(x=M)}S>x&&(h=Math.sqrt(S/x)),h&&(s/=h,n/=h,c/=h,d/=h),f&&(s/=f,n/=u),(y||s!==1||n!==1)&&(l||(l=ef(),y&&nf(l,y)),sf(l,1/s,1/n));const C=o.getCanvas(rf(c)||1,rf(d)||1,p),w=o.getPattern(C,v||E.origin.noRepeat||"no-repeat",l,t);return t.style=w,t.patternId=r,!0}else return!1}function aE(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{l(s.next(c))}catch(d){o(d)}}function h(c){try{l(s.throw(c))}catch(d){o(d)}}function l(c){c.done?r(c.value):n(c.value).then(a,h)}l((s=s.apply(e,[])).next())})}const{abs:af}=Math;function hE(e,t,i,s){const{scaleX:n,scaleY:r}=Wt.patternLocked?e.__world:e.__nowWorld,{pixelRatio:o}=t;if(!i.data||i.patternId===n+"-"+r+"-"+o&&!Di.running)return!1;{const{data:a}=i;if(s)if(a.repeat)s=!1;else{let{width:h,height:l}=a;h*=af(n)*o,l*=af(r)*o,a.scaleX&&(h*=a.scaleX,l*=a.scaleY),s=h*l>E.image.maxCacheSize||Di.running}return s?(t.save(),e.windingRule?t.clip(e.windingRule):t.clip(),i.blendMode&&(t.blendMode=i.blendMode),a.opacity&&(t.opacity*=a.opacity),a.transform&&t.transform(a.transform),t.drawImage(i.image.view,0,0,a.width,a.height),t.restore(),!0):(!i.style||i.sync||Di.running?kl(e,i,o):i.patternTask||(i.patternTask=Wt.patternTasker.add(()=>aE(this,void 0,void 0,function*(){i.patternTask=null,t.bounds.hit(e.__nowWorld)&&kl(e,i,o),e.forceUpdate("surface")}),300)),!1)}}function lE(e,t){const i=t["_"+e];if(i instanceof Array){let s,n,r,o;for(let a=0,h=i.length;a<h;a++)s=i[a].image,o=s&&s.url,o&&(n||(n={}),n[o]=!0,Wt.recycle(s),s.loading&&(r||(r=t.__input&&t.__input[e]||[],r instanceof Array||(r=[r])),s.unload(i[a].loadId,!r.some(l=>l.url===o))));return n}return null}const cE={image:oE,checkImage:hE,createPattern:kl,recycleImage:lE,createData:mg,getPatternData:wg,fillOrFitMode:_g,clipMode:gg,repeatMode:yg},{toPoint:hf}=He,vh={},Eh={};function uE(e,t){let{from:i,to:s,type:n,blendMode:r,opacity:o}=e;hf(i||"top",t,vh),hf(s||"bottom",t,Eh);const a=E.canvas.createLinearGradient(vh.x,vh.y,Eh.x,Eh.y);Bc(a,e.stops,o);const h={type:n,style:a};return r&&(h.blendMode=r),h}function Bc(e,t,i){if(t){let s;for(let n=0,r=t.length;n<r;n++)s=t[n],typeof s=="string"?e.addColorStop(n/(r-1),Xt.string(s,i)):e.addColorStop(s.offset,Xt.string(s.color,i))}}const{getAngle:dE,getDistance:fE}=H,{get:pE,rotateOfOuter:lf,scaleOfOuter:cf}=G,{toPoint:uf}=He,ps={},Sh={};function _E(e,t){let{from:i,to:s,type:n,opacity:r,blendMode:o,stretch:a}=e;uf(i||"center",t,ps),uf(s||"bottom",t,Sh);const h=E.canvas.createRadialGradient(ps.x,ps.y,0,ps.x,ps.y,fE(ps,Sh));Bc(h,e.stops,r);const l={type:n,style:h},c=Rc(t,ps,Sh,a,!0);return c&&(l.transform=c),o&&(l.blendMode=o),l}function Rc(e,t,i,s,n){let r;const{width:o,height:a}=e;if(o!==a||s){const h=dE(t,i);r=pE(),n?(cf(r,t,o/a*(s||1),1),lf(r,t,h+90)):(cf(r,t,1,o/a*(s||1)),lf(r,t,h))}return r}const{getDistance:gE}=H,{toPoint:df}=He,Ri={},Th={};function yE(e,t){let{from:i,to:s,type:n,opacity:r,blendMode:o,stretch:a}=e;df(i||"center",t,Ri),df(s||"bottom",t,Th);const h=E.conicGradientSupport?E.canvas.createConicGradient(0,Ri.x,Ri.y):E.canvas.createRadialGradient(Ri.x,Ri.y,0,Ri.x,Ri.y,gE(Ri,Th));Bc(h,e.stops,r);const l={type:n,style:h},c=Rc(t,Ri,Th,a||1,E.conicGradientRotate90);return c&&(l.transform=c),o&&(l.blendMode=o),l}const mE={linearGradient:uE,radialGradient:_E,conicGradient:yE,getTransform:Rc},{copy:ff,toOffsetOutBounds:wE}=D,fe={},_o={};function xE(e,t,i){let s,n;const{__nowWorld:r,__layout:o}=e,{shadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:d,scaleY:f}=i,u=t.getSameCanvas(),p=a.length-1;wE(l,_o),a.forEach((y,v)=>{u.setWorldShadow(_o.offsetX+y.x*d,_o.offsetY+y.y*f,y.blur*d,y.color),n=y.spread?1+y.spread*2/(o.boxBounds.width+(o.strokeBoxSpread||0)*2):0,xg(u,_o,n,i),s=l,y.box&&(u.restore(),u.save(),h&&(u.copyWorld(u,l,r,"copy"),s=r),h?u.copyWorld(h,r,r,"destination-out"):u.copyWorld(i.canvas,c,l,"destination-out")),e.__worldFlipped?t.copyWorldByReset(u,s,r,y.blendMode):t.copyWorldToInner(u,s,o.renderBounds,y.blendMode),p&&v<p&&u.clearWorld(s,!0)}),u.recycle(s)}function xg(e,t,i,s){const{bounds:n,shapeBounds:r}=s;if(E.fullImageShadow){if(ff(fe,e.bounds),fe.x+=t.x-r.x,fe.y+=t.y-r.y,i){const{matrix:o}=s;fe.x-=(n.x+(o?o.e:0)+n.width/2)*(i-1),fe.y-=(n.y+(o?o.f:0)+n.height/2)*(i-1),fe.width*=i,fe.height*=i}e.copyWorld(s.canvas,e.bounds,fe)}else i&&(ff(fe,t),fe.x-=t.width/2*(i-1),fe.y-=t.height/2*(i-1),fe.width*=i,fe.height*=i),e.copyWorld(s.canvas,r,i?fe:t)}const{toOffsetOutBounds:bE}=D,go={};function vE(e,t,i){let s,n;const{__nowWorld:r,__layout:o}=e,{innerShadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:d,scaleY:f}=i,u=t.getSameCanvas(),p=a.length-1;bE(l,go),a.forEach((y,v)=>{u.save(),u.setWorldShadow(go.offsetX+y.x*d,go.offsetY+y.y*f,y.blur*d),n=y.spread?1-y.spread*2/(o.boxBounds.width+(o.strokeBoxSpread||0)*2):0,xg(u,go,n,i),u.restore(),h?(u.copyWorld(u,l,r,"copy"),u.copyWorld(h,r,r,"source-out"),s=r):(u.copyWorld(i.canvas,c,l,"source-out"),s=l),u.fillWorld(s,y.color,"source-in"),e.__worldFlipped?t.copyWorldByReset(u,s,r,y.blendMode):t.copyWorldToInner(u,s,o.renderBounds,y.blendMode),p&&v<p&&u.clearWorld(s,!0)}),u.recycle(s)}function EE(e,t,i){const{blur:s}=e.__;i.setWorldBlur(s*e.__nowWorld.a),i.copyWorldToInner(t,e.__nowWorld,e.__layout.renderBounds),i.filter="none"}function SE(e,t,i){}const TE={shadow:xE,innerShadow:vE,blur:EE,backgroundBlur:SE},{excludeRenderBounds:CE}=as;Mt.prototype.__renderMask=function(e,t){let i,s,n,r,o,a;const{children:h}=this;for(let l=0,c=h.length;l<c;l++)i=h[l],a=i.__.mask,!(a&&(o&&(pf(this,o,e,n,s,r),s=n=null),a==="path"||a==="clipping-path"?(i.opacity<1?(o="opacity-path",r=i.opacity,n||(n=Ch(e))):(o="path",e.save()),i.__clip(n||e,t)):(o=a==="grayscale"?"grayscale":"alpha",s||(s=Ch(e)),n||(n=Ch(e)),i.__render(s,t)),!(a==="clipping"||a==="clipping-path")))&&(CE(i,t)||i.__render(n||e,t));pf(this,o,e,n,s,r)};function pf(e,t,i,s,n,r){switch(t){case"grayscale":n.useGrayscaleAlpha(e.__nowWorld);case"alpha":BE(e,i,s,n);break;case"opacity-path":bg(e,i,s,r);break;case"path":i.restore()}}function Ch(e){return e.getSameCanvas(!1,!0)}function BE(e,t,i,s){const n=e.__nowWorld;i.resetTransform(),i.opacity=1,i.useMask(s,n),s.recycle(n),bg(e,t,i,1)}function bg(e,t,i,s){const n=e.__nowWorld;t.resetTransform(),t.opacity=s,t.copyWorld(i,n),i.recycle(n)}const RE="¥￥＄€£￡¢￠",kE="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz",LE="《（「〈『〖【〔｛┌＜‘“＝"+RE,OE="》）」〉』〗】〕｝┐＞’”！？，、。：；‰",PE="≮≯≈≠＝…",ME="—／～｜┆·",AE=`{[(<'"`+LE,vg=`>)]}%!?,.:;'"`+OE,$E=vg+"_#~&*+\\=|"+PE,DE="- "+ME,IE=[[19968,40959],[13312,19903],[131072,173791],[173824,177983],[177984,178207],[178208,183983],[183984,191471],[196608,201551],[201552,205743],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12736,12783],[12800,13055],[13056,13311],[63744,64255],[65072,65103],[127488,127743],[194560,195103]],WE=new RegExp(IE.map(([e,t])=>`[\\u${e.toString(16)}-\\u${t.toString(16)}]`).join("|"));function Hr(e){const t={};return e.split("").forEach(i=>t[i]=!0),t}const FE=Hr(kE),zE=Hr(AE),HE=Hr(vg),jE=Hr($E),NE=Hr(DE);var Yo;(function(e){e[e.Letter=0]="Letter",e[e.Single=1]="Single",e[e.Before=2]="Before",e[e.After=3]="After",e[e.Symbol=4]="Symbol",e[e.Break=5]="Break"})(Yo||(Yo={}));const{Letter:_f,Single:VE,Before:UE,After:GE,Symbol:YE,Break:XE}=Yo;function KE(e){return FE[e]?_f:NE[e]?XE:zE[e]?UE:HE[e]?GE:jE[e]?YE:WE.test(e)?VE:_f}const qE={trimRight(e){const{words:t}=e;let i=0,s=t.length,n;for(let r=s-1;r>-1&&(n=t[r].data[0],n.char===" ");r--)i++,e.width-=n.width;i&&t.splice(s-i,i)}};function ZE(e,t,i){switch(t){case"title":return i?e.toUpperCase():e;case"upper":return e.toUpperCase();case"lower":return e.toLowerCase();default:return e}}const{trimRight:JE}=qE,{Letter:Bh,Single:jn,Before:gf,After:Rh,Symbol:QE,Break:yf}=Yo;let pr,ui,ie,ye,kh,Ve,ki,Rr,vn,De,Yi,Lh,Nn,on,kr,sn=[],Lo,Ll;function tS(e,t,i){kr=e,sn=e.rows,Lo=e.bounds,Ll=!Lo.width&&!i.autoSizeAlign;const{__letterSpacing:s,paraIndent:n,textCase:r}=i,{canvas:o}=E,{width:a,height:h}=Lo;if(a||h||s||r!=="none"){const c=i.textWrap!=="none",d=i.textWrap==="break";on=!0,Yi=null,Rr=ki=vn=ie=ye=0,pr={data:[]},ui={words:[]};for(let f=0,u=t.length;f<u;f++)Ve=t[f],Ve===`
`?(ie&&_s(),ui.paraEnd=!0,Vn(),on=!0):(De=KE(Ve),De===Bh&&r!=="none"&&(Ve=ZE(Ve,r,!ie)),ki=o.measureText(Ve).width,s&&(s<0&&(vn=ki),ki+=s),Lh=De===jn&&(Yi===jn||Yi===Bh)||Yi===jn&&De!==Rh,Nn=(De===gf||De===jn)&&(Yi===QE||Yi===Rh),kh=on&&n?a-n:a,c&&a&&ye+ie+ki>kh&&(d?(ie&&_s(),ye&&Vn()):(Nn||(Nn=De===Bh&&Yi==Rh),(Lh||Nn||De===yf||De===gf||De===jn||ie+ki>kh)&&ie&&_s(),ye&&Vn())),Ve===" "&&on!==!0&&ye+ie===0||(De===yf?(Ve===" "&&ie&&_s(),Oh(Ve,ki),_s()):((Lh||Nn)&&ie&&_s(),Oh(Ve,ki))),Yi=De);ie&&_s(),ye&&Vn(),sn.length>0&&(sn[sn.length-1].paraEnd=!0)}else t.split(`
`).forEach(c=>{kr.paraNumber++,ye=o.measureText(c).width,sn.push({x:n||0,text:c,width:ye,paraStart:!0}),Ll&&Eg()})}function Oh(e,t){vn&&!Rr&&(Rr=vn),pr.data.push({char:e,width:t}),ie+=t}function _s(){ye+=ie,pr.width=ie,ui.words.push(pr),pr={data:[]},ie=0}function Vn(){on&&(kr.paraNumber++,ui.paraStart=!0,on=!1),vn&&(ui.startCharSize=Rr,ui.endCharSize=vn,Rr=0),ui.width=ye,Lo.width?JE(ui):Ll&&Eg(),sn.push(ui),ui={words:[]},ye=0}function Eg(){ye>(kr.maxWidth||0)&&(kr.maxWidth=ye)}const eS=0,mf=1,wf=2;function iS(e,t,i,s){const{rows:n}=e,{textAlign:r,paraIndent:o,letterSpacing:a}=t;let h,l,c,d,f;n.forEach(u=>{u.words&&(c=o&&u.paraStart?o:0,l=i&&(r==="justify"||r==="both")&&u.words.length>1?(i-u.width-c)/(u.words.length-1):0,d=a||u.isOverflow?eS:l>.01?mf:wf,u.isOverflow&&!a&&(u.textMode=!0),d===wf?(u.x+=c,sS(u)):(u.x+=c,h=u.x,u.data=[],u.words.forEach(p=>{d===mf?(f={char:"",x:h},h=nS(p.data,h,f),(u.isOverflow||f.char!==" ")&&u.data.push(f)):h=rS(p.data,h,u.data,u.isOverflow),l&&(!u.paraEnd||r==="both")&&(h+=l,u.width+=l)})),u.words=null)})}function sS(e){e.text="",e.words.forEach(t=>{t.data.forEach(i=>{e.text+=i.char})})}function nS(e,t,i){return e.forEach(s=>{i.char+=s.char,t+=s.width}),t}function rS(e,t,i,s){return e.forEach(n=>{(s||n.char!==" ")&&(n.x=t,i.push(n)),t+=n.width}),t}function oS(e,t){const{rows:i,bounds:s}=e,{__lineHeight:n,__baseLine:r,__letterSpacing:o,__clipText:a,textAlign:h,verticalAlign:l,paraSpacing:c,autoSizeAlign:d}=t;let{x:f,y:u,width:p,height:y}=s,v=n*i.length+(c?c*(e.paraNumber-1):0),S=r;if(a&&v>y)v=Math.max(y,n),e.overflow=i.length;else if(y||d)switch(l){case"middle":u+=(y-v)/2;break;case"bottom":u+=y-v}S+=u;let x,C,w,M=p||d?p:e.maxWidth;for(let z=0,V=i.length;z<V;z++){if(x=i[z],x.x=f,x.width<p||x.width>p&&!a)switch(h){case"center":x.x+=(M-x.width)/2;break;case"right":x.x+=M-x.width}x.paraStart&&c&&z>0&&(S+=c),x.y=S,S+=n,e.overflow>z&&S>v&&(x.isOverflow=!0,e.overflow=z+1),C=x.x,w=x.width,o<0&&(x.width<0?(w=-x.width+t.fontSize+o,C-=w,w+=t.fontSize):w-=o),C<s.x&&(s.x=C),w>s.width&&(s.width=w),a&&p&&p<w&&(x.isOverflow=!0,e.overflow||(e.overflow=i.length))}s.y=u,s.height=v}function aS(e,t,i,s){if(!s)return;const{rows:n,overflow:r}=e;let{textOverflow:o}=t;if(n.splice(r),o&&o!=="show"){o==="hide"?o="":o==="ellipsis"&&(o="...");let a,h;const l=o?E.canvas.measureText(o).width:0,c=i+s-l;(t.textWrap==="none"?n:[n[r-1]]).forEach(f=>{if(f.isOverflow&&f.data){let u=f.data.length-1;for(let p=u;p>-1&&(a=f.data[p],h=a.x+a.width,!(p===u&&h<c));p--){if(h<c&&a.char!==" "){f.data.splice(p+1),f.width-=a.width;break}f.width-=a.width}f.width+=l,f.data.push({char:o,x:h}),f.textMode&&hS(f)}})}}function hS(e){e.text="",e.data.forEach(t=>{e.text+=t.char}),e.data=null}function lS(e,t){const{fontSize:i}=t;switch(e.decorationHeight=i/11,t.textDecoration){case"under":e.decorationY=i*.15;break;case"delete":e.decorationY=-i*.35}}const{top:Oo,right:Sg,bottom:Tg,left:Po}=jo;function cS(e,t){typeof e!="string"&&(e=String(e));let i=0,s=0,n=t.__getInput("width")||0,r=t.__getInput("height")||0;const{textDecoration:o,__font:a,__padding:h}=t;h&&(n?(i=h[Po],n-=h[Sg]+h[Po]):t.autoSizeAlign||(i=h[Po]),r?(s=h[Oo],r-=h[Oo]+h[Tg]):t.autoSizeAlign||(s=h[Oo]));const l={bounds:{x:i,y:s,width:n,height:r},rows:[],paraNumber:0,font:E.canvas.font=a};return tS(l,e,t),h&&uS(h,l,t,n,r),oS(l,t),iS(l,t,n),l.overflow&&aS(l,t,i,n),o!=="none"&&lS(l,t),l}function uS(e,t,i,s,n){if(!s&&i.autoSizeAlign)switch(i.textAlign){case"left":yo(t,"x",e[Po]);break;case"right":yo(t,"x",-e[Sg])}if(!n&&i.autoSizeAlign)switch(i.verticalAlign){case"top":yo(t,"y",e[Oo]);break;case"bottom":yo(t,"y",-e[Tg])}}function yo(e,t,i){const{bounds:s,rows:n}=e;s[t]+=i;for(let r=0;r<n.length;r++)n[r][t]+=i}const dS={getDrawData:cS};function fS(e,t){const i=typeof t=="number"&&t!==1;if(typeof e=="string")if(i&&Xt.object)e=Xt.object(e);else return e;let s=e.a===void 0?1:e.a;i&&(s*=t);const n=e.r+","+e.g+","+e.b;return s===1?"rgb("+n+")":"rgba("+n+","+s+")"}const pS={string:fS};Object.assign(mc,dS);Object.assign(Xt,pS);Object.assign(Rt,Qv);Object.assign(je,cE);Object.assign(es,mE);Object.assign(Uo,TE);Object.assign(rt,{interaction:(e,t,i,s)=>new Hv(e,t,i,s),hitCanvas:(e,t)=>new hg(e,t),hitCanvasManager:()=>new sg});Tv();class xf extends Mt{constructor(i,s){super(s);Dt(this,"game");Dt(this,"bodys");Dt(this,"bodyRects");this.game=i,this.bodyRects=[],this.bodys=[[0,4],[0,3],[0,2],[0,1]],this.draw(!0)}draw(i=!1){if(this.game.suspend&&!i){setTimeout(()=>{this.draw()},100);return}this.forward(),this.removeAll(),this.bodyRects=[];for(let s=0;s<this.bodys.length;s++){let n=new Ne({x:this.bodys[s][1]*this.game.gridSize,y:this.bodys[s][0]*this.game.gridSize,width:this.game.gridSize,height:this.game.gridSize,fill:"red"});this.add(n),this.bodyRects.push(n)}setTimeout(()=>{this.draw()},this.game.speed)}forward(){let i=[...this.bodys[0]],s=this.game.direction;if(s==="right"?i[1]++:s==="left"?i[1]--:s==="up"?i[0]--:s==="down"&&i[0]++,i[0]<0||i[0]>=this.game.rows||i[1]<0||i[1]>=this.game.cols)throw this.game.emit("gameOver",{score:this.game.score}),new Error("游戏结束");let n=this.game.foodList[0];if(!n||i[0]!==n.row||i[1]!==n.col?this.bodys.pop():(this.game.score++,this.game.emit("scoreUpdate",{score:this.game.score}),n.remove(),this.game.foodList.pop(),this.game.generateFood()),this.bodys.some(r=>r[0]===i[0]&&r[1]===i[1]))throw this.game.emit("gameOver",{score:this.game.score}),new Error("游戏结束");this.bodys.unshift(i)}get head(){return this.bodys[0]}}class _S extends Mt{constructor(i,s){super(s);Dt(this,"items");Dt(this,"game");this.game=i,this.items=[];for(let n=0;n<this.game.rows;n++){this.items.push([]);for(let r=0;r<this.game.cols;r++){let o=new gS(n,r,{x:r*this.game.gridSize,y:n*this.game.gridSize,width:this.game.gridSize,height:this.game.gridSize,stroke:"#000",strokeWidth:1,fill:"#242424"});this.add(o),this.items[n].push(o)}}}}class gS extends Ft{constructor(i,s,n){super(n);Dt(this,"row");Dt(this,"col");Dt(this,"center");this.row=i,this.col=s,this.center={x:this.x+this.width/2,y:this.y+this.height/2},this.on("click",()=>{})}}class yS extends Ne{constructor(i,s,n){super(n);Dt(this,"row");Dt(this,"col");this.row=i,this.col=s}}let mS=class extends Cl{constructor(i,s){super(i,s);Dt(this,"suspend");Dt(this,"score");Dt(this,"grid");Dt(this,"gridSize");Dt(this,"rows");Dt(this,"cols");Dt(this,"snake");Dt(this,"speed");Dt(this,"direction");Dt(this,"foodList");this.suspend=!0,this.gridSize=(i==null?void 0:i.gridSize)||20,this.speed=(i==null?void 0:i.speed)||100,this.cols=Math.floor(this.width/this.gridSize),this.rows=Math.floor(this.height/this.gridSize),this.direction="right",this.score=0;let n={x:(this.width-this.cols*this.gridSize)/2,y:(this.height-this.rows*this.gridSize)/2,width:this.cols*this.gridSize,height:this.rows*this.gridSize};this.grid=new _S(this,n),this.tree.add(this.grid),this.foodList=[],this.snake=new xf(this,n),this.tree.add(this.snake),this.generateFood(),window.game=this,window.addEventListener("keydown",r=>{r.key==="ArrowRight"&&this.direction!=="left"?this.direction="right":r.key==="ArrowLeft"&&this.direction!=="right"?this.direction="left":r.key==="ArrowUp"&&this.direction!=="down"?this.direction="up":r.key==="ArrowDown"&&this.direction!=="up"&&(this.direction="down")})}generateFood(){let i=[Math.floor(Math.random()*this.rows),Math.floor(Math.random()*this.cols)];if(this.snake.bodys.some(r=>r[0]===i[0]&&r[1]===i[1]))return this.generateFood();let s=this.grid.items[i[0]][i[1]],n=new yS(i[0],i[1],{x:s.x,y:s.y,width:s.width,height:s.height,fill:"green"});this.foodList.push(n),this.grid.add(n)}reStart(){this.suspend=!1,this.direction="right",this.score=0,this.foodList[0]&&(this.foodList[0].remove(),this.foodList.pop()),this.snake.removeAll(),this.snake.remove();let i={x:(this.width-this.cols*this.gridSize)/2,y:(this.height-this.rows*this.gridSize)/2,width:this.cols*this.gridSize,height:this.rows*this.gridSize};this.snake=new xf(this,i),this.tree.add(this.snake),this.generateFood()}startGame(){this.suspend=!1}stopGame(){this.suspend=!0}};const bf=it.get("LeaferCanvas");class Cg extends ha{set zIndex(t){const{style:i}=this.view;i.zIndex=t,this.setAbsolute(this.view)}set childIndex(t){const{view:i,parentView:s}=this;if(i&&s){const n=s.children[t];n?(this.setAbsolute(n),s.insertBefore(i,n)):s.appendChild(n)}}init(){const{config:t}=this,i=t.view||t.canvas;i?this.__createViewFrom(i):this.__createView();const{style:s}=this.view;if(s.display||(s.display="block"),this.parentView=this.view.parentElement,this.parentView){const n=this.parentView.style;n.webkitUserSelect=n.userSelect="none"}E.syncDomFont&&!this.parentView&&(s.display="none",document.body.appendChild(this.view)),this.__createContext(),this.autoLayout||this.resize(t)}set backgroundColor(t){this.view.style.backgroundColor=t}get backgroundColor(){return this.view.style.backgroundColor}set hittable(t){this.view.style.pointerEvents=t?"auto":"none"}get hittable(){return this.view.style.pointerEvents!=="none"}__createView(){this.view=document.createElement("canvas")}__createViewFrom(t){let i=typeof t=="string"?document.getElementById(t):t;if(i)if(i instanceof HTMLCanvasElement)this.view=i;else{let s=i;if(i===window||i===document){const r=document.createElement("div"),{style:o}=r;o.position="absolute",o.top=o.bottom=o.left=o.right="0px",document.body.appendChild(r),s=r}this.__createView();const n=this.view;s.hasChildNodes()&&(this.setAbsolute(n),s.style.position||(s.style.position="relative")),s.appendChild(n)}else bf.error(`no id: ${t}`),this.__createView()}setAbsolute(t){const{style:i}=t;i.position="absolute",i.top=i.left="0px"}updateViewSize(){const{width:t,height:i,pixelRatio:s}=this,{style:n}=this.view;n.width=t+"px",n.height=i+"px",this.view.width=Math.ceil(t*s),this.view.height=Math.ceil(i*s)}updateClientBounds(){this.view.parentElement&&(this.clientBounds=this.view.getBoundingClientRect())}startAutoLayout(t,i){if(this.resizeListener=i,t){this.autoBounds=t;try{this.resizeObserver=new ResizeObserver(n=>{this.updateClientBounds();for(const r of n)this.checkAutoBounds(r.contentRect)});const s=this.parentView;s?(this.resizeObserver.observe(s),this.checkAutoBounds(s.getBoundingClientRect())):(this.checkAutoBounds(this.view),bf.warn("no parent"))}catch{this.imitateResizeObserver()}}else window.addEventListener("resize",()=>{const s=E.devicePixelRatio;if(this.pixelRatio!==s){const{width:n,height:r}=this;this.emitResize({width:n,height:r,pixelRatio:s})}})}imitateResizeObserver(){this.autoLayout&&(this.parentView&&this.checkAutoBounds(this.parentView.getBoundingClientRect()),E.requestRender(this.imitateResizeObserver.bind(this)))}checkAutoBounds(t){const i=this.view,{x:s,y:n,width:r,height:o}=this.autoBounds.getBoundsFrom(t),a={width:r,height:o,pixelRatio:E.devicePixelRatio};if(!this.isSameSize(a)){const{style:h}=i;h.marginLeft=s+"px",h.marginTop=n+"px",this.emitResize(a)}}stopAutoLayout(){this.autoLayout=!1,this.resizeListener=null,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}emitResize(t){const i={};gt.copyAttrs(i,this,Fe),this.resize(t),this.resizeListener&&this.width!==void 0&&this.resizeListener(new ji(t,i))}unrealCanvas(){if(!this.unreal&&this.parentView){const t=this.view;t&&t.remove(),this.view=this.parentView,this.unreal=!0}}destroy(){if(this.view){if(this.stopAutoLayout(),!this.unreal){const t=this.view;t.parentElement&&t.remove()}super.destroy()}}}la(CanvasRenderingContext2D.prototype);la(Path2D.prototype);const{mineType:Ph,fileType:wS}=wi;Object.assign(rt,{canvas:(e,t)=>new Cg(e,t),image:e=>new gc(e)});function xS(e,t){E.origin={createCanvas(i,s){const n=document.createElement("canvas");return n.width=i,n.height=s,n},canvasToDataURL:(i,s,n)=>i.toDataURL(Ph(s),n),canvasToBolb:(i,s,n)=>new Promise(r=>i.toBlob(r,Ph(s),n)),canvasSaveAs:(i,s,n)=>{const r=i.toDataURL(Ph(wS(s)),n);return E.origin.download(r,s)},download(i,s){return new Promise(n=>{let r=document.createElement("a");r.href=i,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),n()})},loadImage(i){return new Promise((s,n)=>{const r=new E.origin.Image,{crossOrigin:o}=E.image;o&&(r.setAttribute("crossOrigin",o),r.crossOrigin=o),r.onload=()=>{s(r)},r.onerror=a=>{n(a)},r.src=E.image.getRealURL(i)})},Image,PointerEvent,DragEvent},E.event={stopDefault(i){i.preventDefault()},stopNow(i){i.stopImmediatePropagation()},stop(i){i.stopPropagation()}},E.canvas=rt.canvas(),E.conicGradientSupport=!!E.canvas.context.createConicGradient}E.name="web";E.isMobile="ontouchstart"in window;E.requestRender=function(e){window.requestAnimationFrame(e)};le(E,"devicePixelRatio",{get(){return Math.max(1,devicePixelRatio)}});const{userAgent:_n}=navigator;_n.indexOf("Firefox")>-1?(E.conicGradientRotate90=!0,E.intWheelDeltaY=!0,E.syncDomFont=!0):_n.indexOf("Safari")>-1&&_n.indexOf("Chrome")===-1&&(E.fullImageShadow=!0);_n.indexOf("Windows")>-1?(E.os="Windows",E.intWheelDeltaY=!0):_n.indexOf("Mac")>-1?E.os="Mac":_n.indexOf("Linux")>-1&&(E.os="Linux");class bS{get childrenChanged(){return this.hasAdd||this.hasRemove||this.hasVisible}get updatedList(){if(this.hasRemove){const t=new et;return this.__updatedList.list.forEach(i=>{i.leafer&&t.add(i)}),t}else return this.__updatedList}constructor(t,i){this.totalTimes=0,this.config={},this.__updatedList=new et,this.target=t,i&&(this.config=gt.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}update(){this.changed=!0,this.running&&this.target.emit(K.REQUEST)}__onAttrChange(t){this.__updatedList.add(t.target),this.update()}__onChildEvent(t){t.type===Et.ADD?(this.hasAdd=!0,this.__pushChild(t.child)):(this.hasRemove=!0,this.__updatedList.add(t.parent)),this.update()}__pushChild(t){this.__updatedList.add(t),t.isBranch&&this.__loopChildren(t)}__loopChildren(t){const{children:i}=t;for(let s=0,n=i.length;s<n;s++)this.__pushChild(i[s])}__onRquestData(){this.target.emitEvent(new Le(Le.DATA,{updatedList:this.updatedList})),this.__updatedList=new et,this.totalTimes++,this.changed=!1,this.hasVisible=!1,this.hasRemove=!1,this.hasAdd=!1}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(qe.CHANGE,this.__onAttrChange,this),t.on_([Et.ADD,Et.REMOVE],this.__onChildEvent,this),t.on_(Le.REQUEST,this.__onRquestData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=null,this.__updatedList=null)}}const{updateAllMatrix:vS,updateBounds:vf,updateAllWorldOpacity:ES}=Vt,{pushAllChildBranch:SS,pushAllParent:Ef}=Ms;function TS(e,t){let i;e.list.forEach(s=>{i=s.__layout,t.without(s)&&!i.proxyZoom&&(i.matrixChanged?(vS(s,!0),t.add(s),s.isBranch&&SS(s,t),Ef(s,t)):i.boundsChanged&&(t.add(s),s.isBranch&&(s.__tempNumber=0),Ef(s,t)))})}function CS(e){let t,i,s;e.sort(!0),e.levels.forEach(n=>{t=e.levelMap[n];for(let r=0,o=t.length;r<o;r++){if(i=t[r],i.isBranch&&i.__tempNumber){s=i.children;for(let a=0,h=s.length;a<h;a++)s[a].isBranch||vf(s[a])}vf(i)}})}function BS(e){let t;e.list.forEach(i=>{t=i.__layout,t.opacityChanged&&ES(i),t.stateStyleChanged&&setTimeout(()=>t.stateStyleChanged&&i.updateState()),i.__updateChange()})}const{worldBounds:Sf}=as,RS={x:0,y:0,width:1e5,height:1e5};class Tf{constructor(t){this.updatedBounds=new tt,this.beforeBounds=new tt,this.afterBounds=new tt,t instanceof Array&&(t=new et(t)),this.updatedList=t}setBefore(){this.beforeBounds.setListWithFn(this.updatedList.list,Sf)}setAfter(){const{list:t}=this.updatedList;t.some(i=>i.noBounds)?this.afterBounds.set(RS):this.afterBounds.setListWithFn(t,Sf),this.updatedBounds.setList([this.beforeBounds,this.afterBounds])}merge(t){this.updatedList.addList(t.updatedList.list),this.beforeBounds.add(t.beforeBounds),this.afterBounds.add(t.afterBounds),this.updatedBounds.add(t.updatedBounds)}destroy(){this.updatedList=null}}const{updateAllMatrix:kS,updateAllChange:LS}=Vt,Mh=it.get("Layouter");class pa{constructor(t,i){this.totalTimes=0,this.config={},this.__levelList=new q_,this.target=t,i&&(this.config=gt.default(i,this.config)),this.__listenEvents()}start(){this.disabled||(this.running=!0)}stop(){this.running=!1}disable(){this.stop(),this.__removeListenEvents(),this.disabled=!0}layout(){if(!this.running)return;const{target:t}=this;this.times=0;try{t.emit(J.START),this.layoutOnce(),t.emitEvent(new J(J.END,this.layoutedBlocks,this.times))}catch(i){Mh.error(i)}this.layoutedBlocks=null}layoutAgain(){this.layouting?this.waitAgain=!0:this.layoutOnce()}layoutOnce(){if(this.layouting)return Mh.warn("layouting");if(this.times>3)return Mh.warn("layout max times");this.times++,this.totalTimes++,this.layouting=!0,this.target.emit(Le.REQUEST),this.totalTimes>1?this.partLayout():this.fullLayout(),this.layouting=!1,this.waitAgain&&(this.waitAgain=!1,this.layoutOnce())}partLayout(){var t;if(!(!((t=this.__updatedList)===null||t===void 0)&&t.length))return;const i=zt.start("PartLayout"),{target:s,__updatedList:n}=this,{BEFORE:r,LAYOUT:o,AFTER:a}=J,h=this.getBlocks(n);h.forEach(l=>l.setBefore()),s.emitEvent(new J(r,h,this.times)),this.extraBlock=null,n.sort(),TS(n,this.__levelList),CS(this.__levelList),BS(n),this.extraBlock&&h.push(this.extraBlock),h.forEach(l=>l.setAfter()),s.emitEvent(new J(o,h,this.times)),s.emitEvent(new J(a,h,this.times)),this.addBlocks(h),this.__levelList.reset(),this.__updatedList=null,zt.end(i)}fullLayout(){const t=zt.start("FullLayout"),{target:i}=this,{BEFORE:s,LAYOUT:n,AFTER:r}=J,o=this.getBlocks(new et(i));i.emitEvent(new J(s,o,this.times)),pa.fullLayout(i),o.forEach(a=>{a.setAfter()}),i.emitEvent(new J(n,o,this.times)),i.emitEvent(new J(r,o,this.times)),this.addBlocks(o),zt.end(t)}static fullLayout(t){kS(t,!0),t.isBranch?Ms.updateBounds(t):Vt.updateBounds(t),LS(t)}addExtra(t){if(!this.__updatedList.has(t)){const{updatedList:i,beforeBounds:s}=this.extraBlock||(this.extraBlock=new Tf([]));i.length?s.add(t.__world):s.set(t.__world),i.add(t)}}createBlock(t){return new Tf(t)}getBlocks(t){return[this.createBlock(t)]}addBlocks(t){this.layoutedBlocks?this.layoutedBlocks.push(...t):this.layoutedBlocks=t}__onReceiveWatchData(t){this.__updatedList=t.data.updatedList}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(J.REQUEST,this.layout,this),t.on_(J.AGAIN,this.layoutAgain,this),t.on_(Le.DATA,this.__onReceiveWatchData,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.config=null)}}const Ys=it.get("Renderer");class OS{get needFill(){return!!(!this.canvas.allowBackgroundColor&&this.config.fill)}constructor(t,i,s){this.FPS=60,this.totalTimes=0,this.times=0,this.config={usePartRender:!0,maxFPS:60},this.target=t,this.canvas=i,s&&(this.config=gt.default(s,this.config)),this.__listenEvents()}start(){this.running=!0,this.update(!1)}stop(){this.running=!1}update(t=!0){this.changed||(this.changed=t),this.__requestRender()}requestLayout(){this.target.emit(J.REQUEST)}render(t){if(!(this.running&&this.canvas.view))return this.update();const{target:i}=this;this.times=0,this.totalBounds=new tt,Ys.log(i.innerName,"--->");try{i.isApp||i.app.emit(K.CHILD_START,i),this.emitRender(K.START),this.renderOnce(t),this.emitRender(K.END,this.totalBounds),Wt.clearRecycled()}catch(s){this.rendering=!1,Ys.error(s)}Ys.log("-------------|")}renderAgain(){this.rendering?this.waitAgain=!0:this.renderOnce()}renderOnce(t){if(this.rendering)return Ys.warn("rendering");if(this.times>3)return Ys.warn("render max times");if(this.times++,this.totalTimes++,this.rendering=!0,this.changed=!1,this.renderBounds=new tt,this.renderOptions={},t)this.emitRender(K.BEFORE),t();else{if(this.requestLayout(),this.ignore){this.ignore=this.rendering=!1;return}this.emitRender(K.BEFORE),this.config.usePartRender&&this.totalTimes>1?this.partRender():this.fullRender()}this.emitRender(K.RENDER,this.renderBounds,this.renderOptions),this.emitRender(K.AFTER,this.renderBounds,this.renderOptions),this.updateBlocks=null,this.rendering=!1,this.waitAgain&&(this.waitAgain=!1,this.renderOnce())}partRender(){const{canvas:t,updateBlocks:i}=this;i&&(this.mergeBlocks(),i.forEach(s=>{t.bounds.hit(s)&&!s.isEmpty()&&this.clipRender(s)}))}clipRender(t){const i=zt.start("PartRender"),{canvas:s}=this,n=t.getIntersect(s.bounds),r=t.includes(this.target.__world),o=new tt(n);s.save(),r&&!it.showRepaint?s.clear():(n.spread(10+1/this.canvas.pixelRatio).ceil(),s.clearWorld(n,!0),s.clipWorld(n,!0)),this.__render(n,r,o),s.restore(),zt.end(i)}fullRender(){const t=zt.start("FullRender"),{canvas:i}=this;i.save(),i.clear(),this.__render(i.bounds,!0),i.restore(),zt.end(t)}__render(t,i,s){const n=t.includes(this.target.__world)?{includes:i}:{bounds:t,includes:i};this.needFill&&this.canvas.fillWorld(t,this.config.fill),it.showRepaint&&this.canvas.strokeWorld(t,"red"),this.target.__render(this.canvas,n),this.renderBounds=s=s||t,this.renderOptions=n,this.totalBounds.isEmpty()?this.totalBounds=s:this.totalBounds.add(s),it.showHitView&&this.renderHitView(n),it.showBoundsView&&this.renderBoundsView(n),this.canvas.updateRender(s)}renderHitView(t){}renderBoundsView(t){}addBlock(t){this.updateBlocks||(this.updateBlocks=[]),this.updateBlocks.push(t)}mergeBlocks(){const{updateBlocks:t}=this;if(t){const i=new tt;i.setList(t),t.length=0,t.push(i)}}__requestRender(){if(this.requestTime)return;const t=this.requestTime=Date.now();E.requestRender(()=>{this.FPS=Math.min(60,Math.ceil(1e3/(Date.now()-t))),this.requestTime=0,this.running&&(this.changed&&this.canvas.view&&this.render(),this.target.emit(K.NEXT))})}__onResize(t){if(!this.canvas.unreal){if(t.bigger||!t.samePixelRatio){const{width:i,height:s}=t.old;if(!new tt(0,0,i,s).includes(this.target.__world)||this.needFill||!t.samePixelRatio){this.addBlock(this.canvas.bounds),this.target.forceUpdate("surface");return}}this.addBlock(new tt(0,0,1,1)),this.update()}}__onLayoutEnd(t){t.data&&t.data.map(i=>{let s;i.updatedList&&i.updatedList.list.some(n=>(s=!n.__world.width||!n.__world.height,s&&(n.isLeafer||Ys.tip(n.innerName,": empty"),s=!n.isBranch||n.isBranchLeaf),s)),this.addBlock(s?this.canvas.bounds:i.updatedBounds)})}emitRender(t,i,s){this.target.emitEvent(new K(t,this.times,i,s))}__listenEvents(){const{target:t}=this;this.__eventIds=[t.on_(K.REQUEST,this.update,this),t.on_(J.END,this.__onLayoutEnd,this),t.on_(K.AGAIN,this.renderAgain,this),t.on_(ji.RESIZE,this.__onResize,this)]}__removeListenEvents(){this.target.off_(this.__eventIds)}destroy(){this.target&&(this.stop(),this.__removeListenEvents(),this.target=this.canvas=this.config=null)}}const{hitRadiusPoint:PS}=D;class MS{constructor(t,i){this.target=t,this.selector=i}getByPoint(t,i,s){i||(i=0),s||(s={});const n=s.through||!1,r=s.ignoreHittable||!1,o=s.target||this.target;this.exclude=s.exclude||null,this.point={x:t.x,y:t.y,radiusX:i,radiusY:i},this.findList=new et(s.findList),s.findList||this.hitBranch(o);const{list:a}=this.findList,h=this.getBestMatchLeaf(a,s.bottomList,r),l=r?this.getPath(h):this.getHitablePath(h);return this.clear(),n?{path:l,target:h,throughPath:a.length?this.getThroughPath(a):l}:{path:l,target:h}}getBestMatchLeaf(t,i,s){if(t.length){let n;this.findList=new et;const{x:r,y:o}=this.point,a={x:r,y:o,radiusX:0,radiusY:0};for(let h=0,l=t.length;h<l;h++)if(n=t[h],(s||Vt.worldHittable(n))&&(this.hitChild(n,a),this.findList.length))return this.findList.list[0]}if(i){for(let n=0,r=i.length;n<r;n++)if(this.hitChild(i[n].target,this.point,i[n].proxy),this.findList.length)return this.findList.list[0]}return t[0]}getPath(t){const i=new et;for(;t;)i.add(t),t=t.parent;return this.target&&i.add(this.target),i}getHitablePath(t){const i=this.getPath(t&&t.hittable?t:null);let s,n=new et;for(let r=i.list.length-1;r>-1&&(s=i.list[r],!(!s.__.hittable||(n.addAt(s,0),!s.__.hitChildren)));r--);return n}getThroughPath(t){const i=new et,s=[];for(let a=t.length-1;a>-1;a--)s.push(this.getPath(t[a]));let n,r,o;for(let a=0,h=s.length;a<h;a++){n=s[a],r=s[a+1];for(let l=0,c=n.length;l<c&&(o=n.list[l],!(r&&r.has(o)));l++)i.add(o)}return i}hitBranch(t){this.eachFind(t.children,t.__onlyHitMask)}eachFind(t,i){let s,n;const{point:r}=this,o=t.length;for(let a=o-1;a>-1;a--)s=t[a],!(!s.__.visible||i&&!s.__.mask)&&(n=s.__.hitRadius?!0:PS(s.__world,r),s.isBranch?(n||s.__ignoreHitWorld)&&(this.eachFind(s.children,s.__onlyHitMask),s.isBranchLeaf&&this.hitChild(s,r)):n&&this.hitChild(s,r))}hitChild(t,i,s){if(!(this.exclude&&this.exclude.has(t))&&t.__hitWorld(i)){const{parent:n}=t;if(n&&n.__hasMask&&!t.__.mask&&!n.children.some(r=>r.__.mask&&r.__hitWorld(i)))return;this.findList.add(s||t)}}clear(){this.point=null,this.findList=null,this.exclude=null}destroy(){this.clear()}}class AS{constructor(t,i){this.config={},i&&(this.config=gt.default(i,this.config)),this.picker=new MS(this.target=t,this),this.finder=rt.finder&&rt.finder()}getByPoint(t,i,s){return E.backgrounder&&this.target&&this.target.updateLayout(),this.picker.getByPoint(t,i,s)}getBy(t,i,s,n){return this.finder?this.finder.getBy(t,i,s,n):St.need("find")}destroy(){this.picker.destroy(),this.finder&&this.finder.destroy()}}Object.assign(rt,{watcher:(e,t)=>new bS(e,t),layouter:(e,t)=>new pa(e,t),renderer:(e,t,i)=>new OS(e,t,i),selector:(e,t)=>new AS(e,t)});E.layout=pa.fullLayout;const ge={convert(e,t){const i=jt.getBase(e),s=Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:e.width,height:e.height,pointerType:e.pointerType,pressure:e.pressure});return s.pointerType==="pen"&&(s.tangentialPressure=e.tangentialPressure,s.tiltX=e.tiltX,s.tiltY=e.tiltY,s.twist=e.twist),s},convertMouse(e,t){const i=jt.getBase(e);return Object.assign(Object.assign({},i),{x:t.x,y:t.y,width:1,height:1,pointerType:"mouse",pressure:.5})},convertTouch(e,t){const i=ge.getTouch(e),s=jt.getBase(e);return Object.assign(Object.assign({},s),{x:t.x,y:t.y,width:1,height:1,pointerType:"touch",multiTouch:e.touches.length>1,pressure:i.force})},getTouch(e){return e.targetTouches[0]||e.changedTouches[0]}},Cf={convert(e){const t=jt.getBase(e);return Object.assign(Object.assign({},t),{code:e.code,key:e.key})}},{pathCanDrag:$S}=jt;class DS extends bc{__listenEvents(){super.__listenEvents();const t=this.view=this.canvas.view;this.viewEvents={pointerdown:this.onPointerDown,mousedown:this.onMouseDown,touchstart:this.onTouchStart,contextmenu:this.onContextMenu,wheel:this.onWheel,gesturestart:this.onGesturestart,gesturechange:this.onGesturechange,gestureend:this.onGestureend},this.windowEvents={pointermove:this.onPointerMove,pointerup:this.onPointerUp,pointercancel:this.onPointerCancel,mousemove:this.onMouseMove,mouseup:this.onMouseUp,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchCancel,keydown:this.onKeyDown,keyup:this.onKeyUp,scroll:this.onScroll};const{viewEvents:i,windowEvents:s}=this;for(let n in i)i[n]=i[n].bind(this),t.addEventListener(n,i[n]);for(let n in s)s[n]=s[n].bind(this),window.addEventListener(n,s[n])}__removeListenEvents(){super.__removeListenEvents();const{viewEvents:t,windowEvents:i}=this;for(let s in t)this.view.removeEventListener(s,t[s]),this.viewEvents={};for(let s in i)window.removeEventListener(s,i[s]),this.windowEvents={}}getTouches(t){const i=[];for(let s=0,n=t.length;s<n;s++)i.push(t[s]);return i}preventDefaultPointer(t){const{pointer:i}=this.config;i.preventDefault&&t.preventDefault()}preventDefaultWheel(t){const{wheel:i}=this.config;i.preventDefault&&t.preventDefault()}preventWindowPointer(t){return!this.downData&&t.target!==this.view}onKeyDown(t){this.keyDown(Cf.convert(t))}onKeyUp(t){this.keyUp(Cf.convert(t))}onContextMenu(t){this.config.pointer.preventDefaultMenu&&t.preventDefault(),this.menu(ge.convert(t,this.getLocal(t)))}onScroll(){this.canvas.updateClientBounds()}onPointerDown(t){this.preventDefaultPointer(t),!(this.config.pointer.touch||this.useMultiTouch)&&(this.usePointer||(this.usePointer=!0),this.pointerDown(ge.convert(t,this.getLocal(t))))}onPointerMove(t){this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t)||(this.usePointer||(this.usePointer=!0),this.pointerMove(ge.convert(t,this.getLocal(t,!0))))}onPointerUp(t){this.downData&&this.preventDefaultPointer(t),!(this.config.pointer.touch||this.useMultiTouch||this.preventWindowPointer(t))&&this.pointerUp(ge.convert(t,this.getLocal(t)))}onPointerCancel(){this.useMultiTouch||this.pointerCancel()}onMouseDown(t){this.preventDefaultPointer(t),!(this.useTouch||this.usePointer)&&this.pointerDown(ge.convertMouse(t,this.getLocal(t)))}onMouseMove(t){this.useTouch||this.usePointer||this.preventWindowPointer(t)||this.pointerMove(ge.convertMouse(t,this.getLocal(t,!0)))}onMouseUp(t){this.downData&&this.preventDefaultPointer(t),!(this.useTouch||this.usePointer||this.preventWindowPointer(t))&&this.pointerUp(ge.convertMouse(t,this.getLocal(t)))}onMouseCancel(){this.useTouch||this.usePointer||this.pointerCancel()}onTouchStart(t){const i=ge.getTouch(t),s=this.getLocal(i,!0),{preventDefault:n}=this.config.touch;(n===!0||n==="auto"&&$S(this.findPath(s)))&&t.preventDefault(),this.multiTouchStart(t),!this.usePointer&&(this.touchTimer&&(window.clearTimeout(this.touchTimer),this.touchTimer=0),this.useTouch=!0,this.pointerDown(ge.convertTouch(t,s)))}onTouchMove(t){if(this.multiTouchMove(t),this.usePointer||this.preventWindowPointer(t))return;const i=ge.getTouch(t);this.pointerMove(ge.convertTouch(t,this.getLocal(i)))}onTouchEnd(t){if(this.multiTouchEnd(),this.usePointer||this.preventWindowPointer(t))return;this.touchTimer&&clearTimeout(this.touchTimer),this.touchTimer=setTimeout(()=>{this.useTouch=!1},500);const i=ge.getTouch(t);this.pointerUp(ge.convertTouch(t,this.getLocal(i)))}onTouchCancel(){this.usePointer||this.pointerCancel()}multiTouchStart(t){this.useMultiTouch=t.touches.length>1,this.touches=this.useMultiTouch?this.getTouches(t.touches):void 0,this.useMultiTouch&&this.pointerCancel()}multiTouchMove(t){if(this.useMultiTouch&&t.touches.length>1){const i=this.getTouches(t.touches),s=this.getKeepTouchList(this.touches,i);s.length>1&&(this.multiTouch(jt.getBase(t),s),this.touches=i)}}multiTouchEnd(){this.touches=null,this.useMultiTouch=!1,this.transformEnd()}getKeepTouchList(t,i){let s;const n=[];return t.forEach(r=>{s=i.find(o=>o.identifier===r.identifier),s&&n.push({from:this.getLocal(r),to:this.getLocal(s)})}),n}getLocalTouchs(t){return t.map(i=>this.getLocal(i))}onWheel(t){this.preventDefaultWheel(t),this.wheel(Object.assign(Object.assign(Object.assign({},jt.getBase(t)),this.getLocal(t)),{deltaX:t.deltaX,deltaY:t.deltaY}))}onGesturestart(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.lastGestureScale=1,this.lastGestureRotation=0)}onGesturechange(t){if(this.useMultiTouch)return;this.preventDefaultWheel(t);const i=jt.getBase(t);Object.assign(i,this.getLocal(t));const s=t.scale/this.lastGestureScale,n=(t.rotation-this.lastGestureRotation)/Math.PI*180*($t.within(this.config.wheel.rotateSpeed,0,1)/4+.1);this.zoom(Object.assign(Object.assign({},i),{scale:s*s})),this.rotate(Object.assign(Object.assign({},i),{rotation:n})),this.lastGestureScale=t.scale,this.lastGestureRotation=t.rotation}onGestureend(t){this.useMultiTouch||(this.preventDefaultWheel(t),this.transformEnd())}setCursor(t){super.setCursor(t);const i=[];this.eachCursor(t,i),typeof i[i.length-1]=="object"&&i.push("default"),this.canvas.view.style.cursor=i.map(s=>typeof s=="object"?`url(${s.url}) ${s.x||0} ${s.y||0}`:s).join(",")}eachCursor(t,i,s=0){if(s++,t instanceof Array)t.forEach(n=>this.eachCursor(n,i,s));else{const n=typeof t=="string"&&vc.get(t);n&&s<2?this.eachCursor(n,i,s):i.push(t)}}destroy(){this.view&&(super.destroy(),this.view=null,this.touches=null)}}function gn(e,t){let i;const{rows:s,decorationY:n,decorationHeight:r}=e.__.__textDrawData;for(let o=0,a=s.length;o<a;o++)i=s[o],i.text?t.fillText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.fillText(h.char,h.x,i.y)}),n&&t.fillRect(i.x,i.y+n,i.width,r)}function IS(e,t,i){i.fillStyle=e,t.__.__font?gn(t,i):t.__.windingRule?i.fill(t.__.windingRule):i.fill()}function WS(e,t,i){let s;const{windingRule:n,__font:r}=t.__;for(let o=0,a=e.length;o<a;o++)s=e[o],!(s.image&&je.checkImage(t,i,s,!r))&&s.style&&(i.fillStyle=s.style,s.transform?(i.save(),i.transform(s.transform),s.blendMode&&(i.blendMode=s.blendMode),r?gn(t,i):n?i.fill(n):i.fill(),i.restore()):s.blendMode?(i.saveBlendMode(s.blendMode),r?gn(t,i):n?i.fill(n):i.fill(),i.restoreBlendMode()):r?gn(t,i):n?i.fill(n):i.fill())}function kc(e,t,i){const{strokeAlign:s}=t.__,n=typeof e!="string";switch(s){case"center":i.setStroke(n?void 0:e,t.__.strokeWidth,t.__),n?_r(e,!0,t,i):Lr(t,i);break;case"inside":Bf("inside",e,n,t,i);break;case"outside":Bf("outside",e,n,t,i);break}}function Bf(e,t,i,s,n){const{__strokeWidth:r,__font:o}=s.__,a=n.getSameCanvas(!0,!0);a.setStroke(i?void 0:t,r*2,s.__),a.font=o,i?_r(t,!0,s,a):Lr(s,a),a.blendMode=e==="outside"?"destination-out":"destination-in",gn(s,a),a.blendMode="normal",s.__worldFlipped?n.copyWorldByReset(a,s.__nowWorld):n.copyWorldToInner(a,s.__nowWorld,s.__layout.renderBounds),a.recycle(s.__nowWorld)}function Lr(e,t){let i;const{rows:s,decorationY:n,decorationHeight:r}=e.__.__textDrawData;for(let o=0,a=s.length;o<a;o++)i=s[o],i.text?t.strokeText(i.text,i.x,i.y):i.data&&i.data.forEach(h=>{t.strokeText(h.char,h.x,i.y)}),n&&t.strokeRect(i.x,i.y+n,i.width,r)}function _r(e,t,i,s){let n;for(let r=0,o=e.length;r<o;r++)n=e[r],!(n.image&&je.checkImage(i,s,n,!1))&&n.style&&(s.strokeStyle=n.style,n.blendMode?(s.saveBlendMode(n.blendMode),t?Lr(i,s):s.stroke(),s.restoreBlendMode()):t?Lr(i,s):s.stroke())}function FS(e,t,i){const s=t.__,{__strokeWidth:n,strokeAlign:r,__font:o}=s;if(n)if(o)kc(e,t,i);else switch(r){case"center":i.setStroke(e,n,s),i.stroke(),s.__useArrow&&Bg(t,i);break;case"inside":i.save(),i.setStroke(e,n*2,s),s.windingRule?i.clip(s.windingRule):i.clip(),i.stroke(),i.restore();break;case"outside":const a=i.getSameCanvas(!0,!0);a.setStroke(e,n*2,s),t.__drawRenderPath(a),a.stroke(),s.windingRule?a.clip(s.windingRule):a.clip(),a.clearWorld(t.__layout.renderBounds),t.__worldFlipped?i.copyWorldByReset(a,t.__nowWorld):i.copyWorldToInner(a,t.__nowWorld,t.__layout.renderBounds),a.recycle(t.__nowWorld);break}}function zS(e,t,i){const s=t.__,{__strokeWidth:n,strokeAlign:r,__font:o}=s;if(n)if(o)kc(e,t,i);else switch(r){case"center":i.setStroke(void 0,n,s),_r(e,!1,t,i),s.__useArrow&&Bg(t,i);break;case"inside":i.save(),i.setStroke(void 0,n*2,s),s.windingRule?i.clip(s.windingRule):i.clip(),_r(e,!1,t,i),i.restore();break;case"outside":const{renderBounds:a}=t.__layout,h=i.getSameCanvas(!0,!0);t.__drawRenderPath(h),h.setStroke(void 0,n*2,s),_r(e,!1,t,h),s.windingRule?h.clip(s.windingRule):h.clip(),h.clearWorld(a),t.__worldFlipped?i.copyWorldByReset(h,t.__nowWorld):i.copyWorldToInner(h,t.__nowWorld,a),h.recycle(t.__nowWorld);break}}function Bg(e,t){e.__.dashPattern&&(t.beginPath(),e.__drawPathByData(t,e.__.__pathForArrow),t.dashPattern=null,t.stroke())}const{getSpread:HS,getOuterOf:jS,getByMove:NS,getIntersectData:VS}=D;function US(e,t,i){const s=t.getSameCanvas(),n=e.__nowWorld;let r,o,a,h,{scaleX:l,scaleY:c}=n;if(l<0&&(l=-l),c<0&&(c=-c),t.bounds.includes(n))h=s,r=a=n;else{const{renderShapeSpread:d}=e.__layout,f=VS(d?HS(t.bounds,l===c?d*l:[d*c,d*l]):t.bounds,n);o=t.bounds.getFitMatrix(f);let{a:u,d:p}=o;if(o.a<1&&(h=t.getSameCanvas(),e.__renderShape(h,i),l*=u,c*=p),a=jS(n,o),r=NS(a,-o.e,-o.f),i.matrix){const{matrix:y}=i;o.multiply(y),u*=y.scaleX,p*=y.scaleY}i=Object.assign(Object.assign({},i),{matrix:o.withScale(u,p)})}return e.__renderShape(s,i),{canvas:s,matrix:o,bounds:r,worldCanvas:h,shapeBounds:a,scaleX:l,scaleY:c}}let Ol;function GS(e,t){const i=t.__,s=[];let n=i.__input[e],r;n instanceof Array||(n=[n]),Ol=je.recycleImage(e,i);for(let o=0,a=n.length,h;o<a;o++)h=YS(e,n[o],t),h&&s.push(h);i["_"+e]=s.length?s:void 0,s.length&&s[0].image&&(r=s[0].image.hasOpacityPixel),e==="fill"?i.__pixelFill=r:i.__pixelStroke=r}function YS(e,t,i){if(typeof t!="object"||t.visible===!1||t.opacity===0)return;const{boxBounds:s}=i.__layout;switch(t.type){case"solid":let{type:n,blendMode:r,color:o,opacity:a}=t;return{type:n,blendMode:r,style:Xt.string(o,a)};case"image":return je.image(i,e,t,s,!Ol||!Ol[t.url]);case"linear":return es.linearGradient(t,s);case"radial":return es.radialGradient(t,s);case"angular":return es.conicGradient(t,s);default:return t.r!==void 0?{type:"solid",style:Xt.string(t)}:void 0}}const XS={compute:GS,fill:IS,fills:WS,fillText:gn,stroke:FS,strokes:zS,strokeText:kc,drawTextStroke:Lr,shape:US};let Un={};const{get:Lc,rotateOfOuter:Rg,translate:an,scaleOfOuter:KS,scale:kg,rotate:Lg}=G;function Og(e,t,i,s,n,r,o){const a=Lc();an(a,t.x+i,t.y+s),kg(a,n,r),o&&Rg(a,{x:t.x+t.width/2,y:t.y+t.height/2},o),e.transform=a}function Pg(e,t,i,s,n,r,o){const a=Lc();an(a,t.x+i,t.y+s),n&&kg(a,n,r),o&&Lg(a,o),e.transform=a}function Mg(e,t,i,s,n,r,o,a,h,l){const c=Lc();if(h)if(l==="center")Rg(c,{x:i/2,y:s/2},h);else switch(Lg(c,h),h){case 90:an(c,s,0);break;case 180:an(c,i,s);break;case 270:an(c,0,i);break}Un.x=t.x+n,Un.y=t.y+r,an(c,Un.x,Un.y),o&&KS(c,Un,o,a),e.transform=c}const{get:qS,translate:ZS}=G,JS=new tt,Ah={},$h={};function Ag(e,t,i,s){const{blendMode:n,sync:r}=i;n&&(e.blendMode=n),r&&(e.sync=r),e.data=$g(i,s,t)}function $g(e,t,i){let{width:s,height:n}=i;e.padding&&(t=JS.set(t).shrink(e.padding)),e.mode==="strench"&&(e.mode="stretch");const{opacity:r,mode:o,align:a,offset:h,scale:l,size:c,rotation:d,repeat:f}=e,u=t.width===s&&t.height===n,p={mode:o},y=a!=="center"&&(d||0)%180===90,v=y?n:s,S=y?s:n;let x=0,C=0,w,M;if(!o||o==="cover"||o==="fit"){if(!u||d){const z=t.width/v,V=t.height/S;w=M=o==="fit"?Math.min(z,V):Math.max(z,V),x+=(t.width-s*w)/2,C+=(t.height-n*M)/2}}else(l||c)&&($t.getScaleData(l,c,i,$h),w=$h.scaleX,M=$h.scaleY);if(a){const z={x,y:C,width:v,height:S};w&&(z.width*=w,z.height*=M),L_.toPoint(a,z,t,Ah,!0),x+=Ah.x,C+=Ah.y}switch(h&&(x+=h.x,C+=h.y),o){case"stretch":u||(s=t.width,n=t.height);break;case"normal":case"clip":(x||C||w||d)&&Pg(p,t,x,C,w,M,d);break;case"repeat":(!u||w||d)&&Mg(p,t,s,n,x,C,w,M,d,a),f||(p.repeat="repeat");break;case"fit":case"cover":default:w&&Og(p,t,x,C,w,M,d)}return p.transform||(t.x||t.y)&&(p.transform=qS(),ZS(p.transform,t.x,t.y)),w&&o!=="stretch"&&(p.scaleX=w,p.scaleY=M),p.width=s,p.height=n,r&&(p.opacity=r),f&&(p.repeat=typeof f=="string"?f==="x"?"repeat-x":"repeat-y":"repeat"),p}let Gn,QS=new tt;const{isSame:tT}=D;function eT(e,t,i,s,n){let r,o;const a=Wt.get(i);return Gn&&i===Gn.paint&&tT(s,Gn.boxBounds)?r=Gn.leafPaint:(r={type:i.type,image:a},Gn=a.use>1?{leafPaint:r,paint:i,boxBounds:QS.set(s)}:null),(n||a.loading)&&(o={image:a,attrName:t,attrValue:i}),a.ready?(Rf(e,t,i,a,r,s),n&&(kf(e,o),Lf(e,o))):a.error?n&&Of(e,o,a.error):(n&&(Dh(e,!0),kf(e,o)),r.loadId=a.load(()=>{Dh(e,!1),e.destroyed||(Rf(e,t,i,a,r,s)&&(a.hasOpacityPixel&&(e.__layout.hitCanvasChanged=!0),e.forceUpdate("surface")),Lf(e,o)),r.loadId=null},h=>{Dh(e,!1),Of(e,o,h),r.loadId=null})),r}function Rf(e,t,i,s,n,r){if(t==="fill"&&!e.__.__naturalWidth){const o=e.__;if(o.__naturalWidth=s.width/o.pixelRatio,o.__naturalHeight=s.height/o.pixelRatio,o.__autoSide)return e.forceUpdate("width"),e.__proxyData&&(e.setProxyAttr("width",o.width),e.setProxyAttr("height",o.height)),!1}return n.data||Ag(n,s,i,r),!0}function kf(e,t){Oc(e,be.LOAD,t)}function Lf(e,t){Oc(e,be.LOADED,t)}function Of(e,t,i){t.error=i,e.forceUpdate("surface"),Oc(e,be.ERROR,t)}function Oc(e,t,i){e.hasEvent(t)&&e.emitEvent(new be(t,i))}function Dh(e,t){const{leafer:i}=e;i&&i.viewReady&&(i.renderer.ignore=t)}const{get:Pf,scale:Mf,copy:Af}=G,{ceil:$f,abs:Df}=Math;function Pl(e,t,i){let{scaleX:s,scaleY:n}=Wt.patternLocked?e.__world:e.__nowWorld;const r=s+"-"+n+"-"+i;if(t.patternId!==r&&!e.destroyed){s=Df(s),n=Df(n);const{image:o,data:a}=t;let h,l,{width:c,height:d,scaleX:f,scaleY:u,opacity:p,transform:y,repeat:v}=a;f&&(l=Pf(),Af(l,y),Mf(l,1/f,1/u),s*=f,n*=u),s*=i,n*=i,c*=s,d*=n;const S=c*d;if(!v&&S>E.image.maxCacheSize)return!1;let x=E.image.maxPatternSize;if(!o.isSVG){const M=o.width*o.height;x>M&&(x=M)}S>x&&(h=Math.sqrt(S/x)),h&&(s/=h,n/=h,c/=h,d/=h),f&&(s/=f,n/=u),(y||s!==1||n!==1)&&(l||(l=Pf(),y&&Af(l,y)),Mf(l,1/s,1/n));const C=o.getCanvas($f(c)||1,$f(d)||1,p),w=o.getPattern(C,v||E.origin.noRepeat||"no-repeat",l,t);return t.style=w,t.patternId=r,!0}else return!1}function iT(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{l(s.next(c))}catch(d){o(d)}}function h(c){try{l(s.throw(c))}catch(d){o(d)}}function l(c){c.done?r(c.value):n(c.value).then(a,h)}l((s=s.apply(e,[])).next())})}const{abs:If}=Math;function sT(e,t,i,s){const{scaleX:n,scaleY:r}=Wt.patternLocked?e.__world:e.__nowWorld,{pixelRatio:o}=t;if(!i.data||i.patternId===n+"-"+r+"-"+o&&!Di.running)return!1;{const{data:a}=i;if(s)if(a.repeat)s=!1;else{let{width:h,height:l}=a;h*=If(n)*o,l*=If(r)*o,a.scaleX&&(h*=a.scaleX,l*=a.scaleY),s=h*l>E.image.maxCacheSize||Di.running}return s?(t.save(),e.windingRule?t.clip(e.windingRule):t.clip(),i.blendMode&&(t.blendMode=i.blendMode),a.opacity&&(t.opacity*=a.opacity),a.transform&&t.transform(a.transform),t.drawImage(i.image.view,0,0,a.width,a.height),t.restore(),!0):(!i.style||i.sync||Di.running?Pl(e,i,o):i.patternTask||(i.patternTask=Wt.patternTasker.add(()=>iT(this,void 0,void 0,function*(){i.patternTask=null,t.bounds.hit(e.__nowWorld)&&Pl(e,i,o),e.forceUpdate("surface")}),300)),!1)}}function nT(e,t){const i=t["_"+e];if(i instanceof Array){let s,n,r,o;for(let a=0,h=i.length;a<h;a++)s=i[a].image,o=s&&s.url,o&&(n||(n={}),n[o]=!0,Wt.recycle(s),s.loading&&(r||(r=t.__input&&t.__input[e]||[],r instanceof Array||(r=[r])),s.unload(i[a].loadId,!r.some(l=>l.url===o))));return n}return null}const rT={image:eT,checkImage:sT,createPattern:Pl,recycleImage:nT,createData:Ag,getPatternData:$g,fillOrFitMode:Og,clipMode:Pg,repeatMode:Mg},{toPoint:Wf}=He,Ih={},Wh={};function oT(e,t){let{from:i,to:s,type:n,blendMode:r,opacity:o}=e;Wf(i||"top",t,Ih),Wf(s||"bottom",t,Wh);const a=E.canvas.createLinearGradient(Ih.x,Ih.y,Wh.x,Wh.y);Pc(a,e.stops,o);const h={type:n,style:a};return r&&(h.blendMode=r),h}function Pc(e,t,i){if(t){let s;for(let n=0,r=t.length;n<r;n++)s=t[n],typeof s=="string"?e.addColorStop(n/(r-1),Xt.string(s,i)):e.addColorStop(s.offset,Xt.string(s.color,i))}}const{getAngle:aT,getDistance:hT}=H,{get:lT,rotateOfOuter:Ff,scaleOfOuter:zf}=G,{toPoint:Hf}=He,gs={},Fh={};function cT(e,t){let{from:i,to:s,type:n,opacity:r,blendMode:o,stretch:a}=e;Hf(i||"center",t,gs),Hf(s||"bottom",t,Fh);const h=E.canvas.createRadialGradient(gs.x,gs.y,0,gs.x,gs.y,hT(gs,Fh));Pc(h,e.stops,r);const l={type:n,style:h},c=Mc(t,gs,Fh,a,!0);return c&&(l.transform=c),o&&(l.blendMode=o),l}function Mc(e,t,i,s,n){let r;const{width:o,height:a}=e;if(o!==a||s){const h=aT(t,i);r=lT(),n?(zf(r,t,o/a*(s||1),1),Ff(r,t,h+90)):(zf(r,t,1,o/a*(s||1)),Ff(r,t,h))}return r}const{getDistance:uT}=H,{toPoint:jf}=He,Li={},zh={};function dT(e,t){let{from:i,to:s,type:n,opacity:r,blendMode:o,stretch:a}=e;jf(i||"center",t,Li),jf(s||"bottom",t,zh);const h=E.conicGradientSupport?E.canvas.createConicGradient(0,Li.x,Li.y):E.canvas.createRadialGradient(Li.x,Li.y,0,Li.x,Li.y,uT(Li,zh));Pc(h,e.stops,r);const l={type:n,style:h},c=Mc(t,Li,zh,a||1,E.conicGradientRotate90);return c&&(l.transform=c),o&&(l.blendMode=o),l}const fT={linearGradient:oT,radialGradient:cT,conicGradient:dT,getTransform:Mc},{copy:Nf,toOffsetOutBounds:pT}=D,pe={},mo={};function _T(e,t,i){let s,n;const{__nowWorld:r,__layout:o}=e,{shadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:d,scaleY:f}=i,u=t.getSameCanvas(),p=a.length-1;pT(l,mo),a.forEach((y,v)=>{u.setWorldShadow(mo.offsetX+y.x*d,mo.offsetY+y.y*f,y.blur*d,y.color),n=y.spread?1+y.spread*2/(o.boxBounds.width+(o.strokeBoxSpread||0)*2):0,Dg(u,mo,n,i),s=l,y.box&&(u.restore(),u.save(),h&&(u.copyWorld(u,l,r,"copy"),s=r),h?u.copyWorld(h,r,r,"destination-out"):u.copyWorld(i.canvas,c,l,"destination-out")),e.__worldFlipped?t.copyWorldByReset(u,s,r,y.blendMode):t.copyWorldToInner(u,s,o.renderBounds,y.blendMode),p&&v<p&&u.clearWorld(s,!0)}),u.recycle(s)}function Dg(e,t,i,s){const{bounds:n,shapeBounds:r}=s;if(E.fullImageShadow){if(Nf(pe,e.bounds),pe.x+=t.x-r.x,pe.y+=t.y-r.y,i){const{matrix:o}=s;pe.x-=(n.x+(o?o.e:0)+n.width/2)*(i-1),pe.y-=(n.y+(o?o.f:0)+n.height/2)*(i-1),pe.width*=i,pe.height*=i}e.copyWorld(s.canvas,e.bounds,pe)}else i&&(Nf(pe,t),pe.x-=t.width/2*(i-1),pe.y-=t.height/2*(i-1),pe.width*=i,pe.height*=i),e.copyWorld(s.canvas,r,i?pe:t)}const{toOffsetOutBounds:gT}=D,wo={};function yT(e,t,i){let s,n;const{__nowWorld:r,__layout:o}=e,{innerShadow:a}=e.__,{worldCanvas:h,bounds:l,shapeBounds:c,scaleX:d,scaleY:f}=i,u=t.getSameCanvas(),p=a.length-1;gT(l,wo),a.forEach((y,v)=>{u.save(),u.setWorldShadow(wo.offsetX+y.x*d,wo.offsetY+y.y*f,y.blur*d),n=y.spread?1-y.spread*2/(o.boxBounds.width+(o.strokeBoxSpread||0)*2):0,Dg(u,wo,n,i),u.restore(),h?(u.copyWorld(u,l,r,"copy"),u.copyWorld(h,r,r,"source-out"),s=r):(u.copyWorld(i.canvas,c,l,"source-out"),s=l),u.fillWorld(s,y.color,"source-in"),e.__worldFlipped?t.copyWorldByReset(u,s,r,y.blendMode):t.copyWorldToInner(u,s,o.renderBounds,y.blendMode),p&&v<p&&u.clearWorld(s,!0)}),u.recycle(s)}function mT(e,t,i){const{blur:s}=e.__;i.setWorldBlur(s*e.__nowWorld.a),i.copyWorldToInner(t,e.__nowWorld,e.__layout.renderBounds),i.filter="none"}function wT(e,t,i){}const xT={shadow:_T,innerShadow:yT,blur:mT,backgroundBlur:wT},{excludeRenderBounds:bT}=as;Mt.prototype.__renderMask=function(e,t){let i,s,n,r,o,a;const{children:h}=this;for(let l=0,c=h.length;l<c;l++)i=h[l],a=i.__.mask,!(a&&(o&&(Vf(this,o,e,n,s,r),s=n=null),a==="path"||a==="clipping-path"?(i.opacity<1?(o="opacity-path",r=i.opacity,n||(n=Hh(e))):(o="path",e.save()),i.__clip(n||e,t)):(o=a==="grayscale"?"grayscale":"alpha",s||(s=Hh(e)),n||(n=Hh(e)),i.__render(s,t)),!(a==="clipping"||a==="clipping-path")))&&(bT(i,t)||i.__render(n||e,t));Vf(this,o,e,n,s,r)};function Vf(e,t,i,s,n,r){switch(t){case"grayscale":n.useGrayscaleAlpha(e.__nowWorld);case"alpha":vT(e,i,s,n);break;case"opacity-path":Ig(e,i,s,r);break;case"path":i.restore()}}function Hh(e){return e.getSameCanvas(!1,!0)}function vT(e,t,i,s){const n=e.__nowWorld;i.resetTransform(),i.opacity=1,i.useMask(s,n),s.recycle(n),Ig(e,t,i,1)}function Ig(e,t,i,s){const n=e.__nowWorld;t.resetTransform(),t.opacity=s,t.copyWorld(i,n),i.recycle(n)}const ET="¥￥＄€£￡¢￠",ST="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz",TT="《（「〈『〖【〔｛┌＜‘“＝"+ET,CT="》）」〉』〗】〕｝┐＞’”！？，、。：；‰",BT="≮≯≈≠＝…",RT="—／～｜┆·",kT=`{[(<'"`+TT,Wg=`>)]}%!?,.:;'"`+CT,LT=Wg+"_#~&*+\\=|"+BT,OT="- "+RT,PT=[[19968,40959],[13312,19903],[131072,173791],[173824,177983],[177984,178207],[178208,183983],[183984,191471],[196608,201551],[201552,205743],[11904,12031],[12032,12255],[12272,12287],[12288,12351],[12736,12783],[12800,13055],[13056,13311],[63744,64255],[65072,65103],[127488,127743],[194560,195103]],MT=new RegExp(PT.map(([e,t])=>`[\\u${e.toString(16)}-\\u${t.toString(16)}]`).join("|"));function jr(e){const t={};return e.split("").forEach(i=>t[i]=!0),t}const AT=jr(ST),$T=jr(kT),DT=jr(Wg),IT=jr(LT),WT=jr(OT);var Xo;(function(e){e[e.Letter=0]="Letter",e[e.Single=1]="Single",e[e.Before=2]="Before",e[e.After=3]="After",e[e.Symbol=4]="Symbol",e[e.Break=5]="Break"})(Xo||(Xo={}));const{Letter:Uf,Single:FT,Before:zT,After:HT,Symbol:jT,Break:NT}=Xo;function VT(e){return AT[e]?Uf:WT[e]?NT:$T[e]?zT:DT[e]?HT:IT[e]?jT:MT.test(e)?FT:Uf}const UT={trimRight(e){const{words:t}=e;let i=0,s=t.length,n;for(let r=s-1;r>-1&&(n=t[r].data[0],n.char===" ");r--)i++,e.width-=n.width;i&&t.splice(s-i,i)}};function GT(e,t,i){switch(t){case"title":return i?e.toUpperCase():e;case"upper":return e.toUpperCase();case"lower":return e.toLowerCase();default:return e}}const{trimRight:YT}=UT,{Letter:jh,Single:Yn,Before:Gf,After:Nh,Symbol:XT,Break:Yf}=Xo;let gr,di,se,me,Vh,Ue,Oi,Or,En,Ie,Xi,Uh,Xn,hn,Pr,nn=[],Mo,Ml;function KT(e,t,i){Pr=e,nn=e.rows,Mo=e.bounds,Ml=!Mo.width&&!i.autoSizeAlign;const{__letterSpacing:s,paraIndent:n,textCase:r}=i,{canvas:o}=E,{width:a,height:h}=Mo;if(a||h||s||r!=="none"){const c=i.textWrap!=="none",d=i.textWrap==="break";hn=!0,Xi=null,Or=Oi=En=se=me=0,gr={data:[]},di={words:[]};for(let f=0,u=t.length;f<u;f++)Ue=t[f],Ue===`
`?(se&&ys(),di.paraEnd=!0,Kn(),hn=!0):(Ie=VT(Ue),Ie===jh&&r!=="none"&&(Ue=GT(Ue,r,!se)),Oi=o.measureText(Ue).width,s&&(s<0&&(En=Oi),Oi+=s),Uh=Ie===Yn&&(Xi===Yn||Xi===jh)||Xi===Yn&&Ie!==Nh,Xn=(Ie===Gf||Ie===Yn)&&(Xi===XT||Xi===Nh),Vh=hn&&n?a-n:a,c&&a&&me+se+Oi>Vh&&(d?(se&&ys(),me&&Kn()):(Xn||(Xn=Ie===jh&&Xi==Nh),(Uh||Xn||Ie===Yf||Ie===Gf||Ie===Yn||se+Oi>Vh)&&se&&ys(),me&&Kn())),Ue===" "&&hn!==!0&&me+se===0||(Ie===Yf?(Ue===" "&&se&&ys(),Gh(Ue,Oi),ys()):((Uh||Xn)&&se&&ys(),Gh(Ue,Oi))),Xi=Ie);se&&ys(),me&&Kn(),nn.length>0&&(nn[nn.length-1].paraEnd=!0)}else t.split(`
`).forEach(c=>{Pr.paraNumber++,me=o.measureText(c).width,nn.push({x:n||0,text:c,width:me,paraStart:!0}),Ml&&Fg()})}function Gh(e,t){En&&!Or&&(Or=En),gr.data.push({char:e,width:t}),se+=t}function ys(){me+=se,gr.width=se,di.words.push(gr),gr={data:[]},se=0}function Kn(){hn&&(Pr.paraNumber++,di.paraStart=!0,hn=!1),En&&(di.startCharSize=Or,di.endCharSize=En,Or=0),di.width=me,Mo.width?YT(di):Ml&&Fg(),nn.push(di),di={words:[]},me=0}function Fg(){me>(Pr.maxWidth||0)&&(Pr.maxWidth=me)}const qT=0,Xf=1,Kf=2;function ZT(e,t,i,s){const{rows:n}=e,{textAlign:r,paraIndent:o,letterSpacing:a}=t;let h,l,c,d,f;n.forEach(u=>{u.words&&(c=o&&u.paraStart?o:0,l=i&&(r==="justify"||r==="both")&&u.words.length>1?(i-u.width-c)/(u.words.length-1):0,d=a||u.isOverflow?qT:l>.01?Xf:Kf,u.isOverflow&&!a&&(u.textMode=!0),d===Kf?(u.x+=c,JT(u)):(u.x+=c,h=u.x,u.data=[],u.words.forEach(p=>{d===Xf?(f={char:"",x:h},h=QT(p.data,h,f),(u.isOverflow||f.char!==" ")&&u.data.push(f)):h=tC(p.data,h,u.data,u.isOverflow),l&&(!u.paraEnd||r==="both")&&(h+=l,u.width+=l)})),u.words=null)})}function JT(e){e.text="",e.words.forEach(t=>{t.data.forEach(i=>{e.text+=i.char})})}function QT(e,t,i){return e.forEach(s=>{i.char+=s.char,t+=s.width}),t}function tC(e,t,i,s){return e.forEach(n=>{(s||n.char!==" ")&&(n.x=t,i.push(n)),t+=n.width}),t}function eC(e,t){const{rows:i,bounds:s}=e,{__lineHeight:n,__baseLine:r,__letterSpacing:o,__clipText:a,textAlign:h,verticalAlign:l,paraSpacing:c,autoSizeAlign:d}=t;let{x:f,y:u,width:p,height:y}=s,v=n*i.length+(c?c*(e.paraNumber-1):0),S=r;if(a&&v>y)v=Math.max(y,n),e.overflow=i.length;else if(y||d)switch(l){case"middle":u+=(y-v)/2;break;case"bottom":u+=y-v}S+=u;let x,C,w,M=p||d?p:e.maxWidth;for(let z=0,V=i.length;z<V;z++){if(x=i[z],x.x=f,x.width<p||x.width>p&&!a)switch(h){case"center":x.x+=(M-x.width)/2;break;case"right":x.x+=M-x.width}x.paraStart&&c&&z>0&&(S+=c),x.y=S,S+=n,e.overflow>z&&S>v&&(x.isOverflow=!0,e.overflow=z+1),C=x.x,w=x.width,o<0&&(x.width<0?(w=-x.width+t.fontSize+o,C-=w,w+=t.fontSize):w-=o),C<s.x&&(s.x=C),w>s.width&&(s.width=w),a&&p&&p<w&&(x.isOverflow=!0,e.overflow||(e.overflow=i.length))}s.y=u,s.height=v}function iC(e,t,i,s){if(!s)return;const{rows:n,overflow:r}=e;let{textOverflow:o}=t;if(n.splice(r),o&&o!=="show"){o==="hide"?o="":o==="ellipsis"&&(o="...");let a,h;const l=o?E.canvas.measureText(o).width:0,c=i+s-l;(t.textWrap==="none"?n:[n[r-1]]).forEach(f=>{if(f.isOverflow&&f.data){let u=f.data.length-1;for(let p=u;p>-1&&(a=f.data[p],h=a.x+a.width,!(p===u&&h<c));p--){if(h<c&&a.char!==" "){f.data.splice(p+1),f.width-=a.width;break}f.width-=a.width}f.width+=l,f.data.push({char:o,x:h}),f.textMode&&sC(f)}})}}function sC(e){e.text="",e.data.forEach(t=>{e.text+=t.char}),e.data=null}function nC(e,t){const{fontSize:i}=t;switch(e.decorationHeight=i/11,t.textDecoration){case"under":e.decorationY=i*.15;break;case"delete":e.decorationY=-i*.35}}const{top:Ao,right:zg,bottom:Hg,left:$o}=jo;function rC(e,t){typeof e!="string"&&(e=String(e));let i=0,s=0,n=t.__getInput("width")||0,r=t.__getInput("height")||0;const{textDecoration:o,__font:a,__padding:h}=t;h&&(n?(i=h[$o],n-=h[zg]+h[$o]):t.autoSizeAlign||(i=h[$o]),r?(s=h[Ao],r-=h[Ao]+h[Hg]):t.autoSizeAlign||(s=h[Ao]));const l={bounds:{x:i,y:s,width:n,height:r},rows:[],paraNumber:0,font:E.canvas.font=a};return KT(l,e,t),h&&oC(h,l,t,n,r),eC(l,t),ZT(l,t,n),l.overflow&&iC(l,t,i,n),o!=="none"&&nC(l,t),l}function oC(e,t,i,s,n){if(!s&&i.autoSizeAlign)switch(i.textAlign){case"left":xo(t,"x",e[$o]);break;case"right":xo(t,"x",-e[zg])}if(!n&&i.autoSizeAlign)switch(i.verticalAlign){case"top":xo(t,"y",e[Ao]);break;case"bottom":xo(t,"y",-e[Hg])}}function xo(e,t,i){const{bounds:s,rows:n}=e;s[t]+=i;for(let r=0;r<n.length;r++)n[r][t]+=i}const aC={getDrawData:rC};function hC(e,t){const i=typeof t=="number"&&t!==1;if(typeof e=="string")if(i&&Xt.object)e=Xt.object(e);else return e;let s=e.a===void 0?1:e.a;i&&(s*=t);const n=e.r+","+e.g+","+e.b;return s===1?"rgb("+n+")":"rgba("+n+","+s+")"}const lC={string:hC};Object.assign(mc,aC);Object.assign(Xt,lC);Object.assign(Rt,XS);Object.assign(je,rT);Object.assign(es,fT);Object.assign(Uo,xT);Object.assign(rt,{interaction:(e,t,i,s)=>new DS(e,t,i,s),hitCanvas:(e,t)=>new Cg(e,t),hitCanvasManager:()=>new sg});xS();const{M:cC,L:uC,C:dC,Q:fC,Z:pC,N:_C,D:gC,X:yC,G:qf,F:Zf,O:mC,P:wC,U:xC}=xe,Ac={scale(e,t,i){if(!e)return;let s,n=0,r=e.length;for(;n<r;)switch(s=e[n],s){case cC:case uC:Ge(e,t,i,n,1),n+=3;break;case dC:Ge(e,t,i,n,3),n+=7;break;case fC:Ge(e,t,i,n,2),n+=5;break;case pC:n+=1;break;case _C:Ge(e,t,i,n,2),n+=5;break;case gC:Ge(e,t,i,n,2),n+=9;break;case yC:Ge(e,t,i,n,2),n+=6;break;case qf:Ge(e,t,i,n,2),n+=9;break;case Zf:Ge(e,t,i,n,2),n+=5;break;case mC:e[n]=qf,e.splice(n+4,0,e[n+3],0),Ge(e,t,i,n,2),n+=9,r+=2;break;case wC:e[n]=Zf,e.splice(n+4,0,e[n+3]),Ge(e,t,i,n,2),n+=5,r+=1;break;case xC:Ge(e,t,i,n,2),n+=6;break}},scalePoints(e,t,i,s,n){for(let r=n?s+1:0,o=n?r+n*2:e.length;r<o;r+=2)e[r]*=t,e[r+1]*=i}},{scalePoints:Ge}=Ac,Yh=G.get(),{topLeft:bC,top:vC,topRight:EC,right:SC,bottom:TC,left:CC}=mn;function _a(e,t,i){e.pathInputed?ga(e,t,i):(t!==1&&(e.width*=t),i!==1&&(e.height*=i))}function BC(e,t,i){const{app:s}=e,n=s&&s.editor;let r=t;if(n.editing){const a=e.__layout;let{width:h,height:l}=a.boxBounds;switch(h*=i-t,l*=t-i,n.resizeDirection){case vC:case TC:r=i,a.affectScaleOrRotation?e.moveInner(-h/2,0):e.x-=h/2;break;case CC:case SC:a.affectScaleOrRotation?e.moveInner(0,-l/2):e.y-=l/2;break;case bC:case EC:a.affectScaleOrRotation?e.moveInner(0,-l):e.y-=l;break}}e.fontSize*=r;const o=e.__;o.__autoWidth||(e.width*=r),o.__autoHeight||(e.height*=r)}function ga(e,t,i){Ac.scale(e.__.path,t,i),e.path=e.__.path}function jg(e,t,i){const{points:s}=e;typeof s[0]=="object"?s.forEach(n=>{n.x*=t,n.y*=i}):Ac.scalePoints(s,t,i),e.points=s}function Al(e,t,i){const{children:s}=e;for(let n=0;n<s.length;n++)Yh.a=t,Yh.d=i,s[n].transform(Yh,!0)}const ya=ks.prototype;ya.scaleResize=function(e,t=e,i){const s=this;i||s.editConfig&&s.editConfig.editSize==="scale"?(s.scaleX*=e,s.scaleY*=t):(e<0&&(s.scaleX*=-1,e=-e),t<0&&(s.scaleY*=-1,t=-t),this.__scaleResize(e,t))};ya.__scaleResize=function(e,t){_a(this,e,t)};ya.resizeWidth=function(e){const t=e/this.getBounds("box","local").width;this.scaleOf(this.__layout.boxBounds,t,this.__.lockRatio?t:1,!0)};ya.resizeHeight=function(e){const t=e/this.getBounds("box","local").height;this.scaleOf(this.__layout.boxBounds,this.__.lockRatio?t:1,t,!0)};lt.prototype.__scaleResize=function(e,t){this.__.resizeFontSize||this.editConfig&&this.editConfig.editSize==="font-size"?BC(this,e,t):_a(this,e,t)};bn.prototype.__scaleResize=function(e,t){ga(this,e,t)};ei.prototype.__scaleResize=function(e,t){this.pathInputed?ga(this,e,t):this.points?jg(this,e,t):this.width*=e};Fi.prototype.__scaleResize=function(e,t){this.pathInputed?ga(this,e,t):this.points?jg(this,e,t):_a(this,e,t)};Mt.prototype.__scaleResize=function(e,t){Al(this,e,t)};Ft.prototype.__scaleResize=function(e,t){this.__.__autoSize&&this.children.length?Al(this,e,t):(_a(this,e,t),this.__.resizeChildren&&Al(this,e,t))};St.add("resize");const{Yes:RC,NoAndSkip:kC,YesAndSkip:LC}=No,Jf={},Qf={},tp={};class OC{constructor(t){this.innerIdMap={},this.idMap={},this.methods={id:(i,s)=>i.id===s?(this.target&&(this.idMap[s]=i),1):0,innerId:(i,s)=>i.innerId===s?(this.target&&(this.innerIdMap[s]=i),1):0,className:(i,s)=>i.className===s?1:0,tag:(i,s)=>i.__tag===s?1:0,tags:(i,s)=>s[i.__tag]?1:0},(this.target=t)&&this.__listenEvents()}getBy(t,i,s,n){switch(typeof t){case"number":const r=this.getByInnerId(t,i);return s?r:r?[r]:[];case"string":switch(t[0]){case"#":Jf.id=t.substring(1),t=Jf;break;case".":Qf.className=t.substring(1),t=Qf;break;default:tp.tag=t,t=tp}case"object":if(t.id!==void 0){const o=this.getById(t.id,i);return s?o:o?[o]:[]}else if(t.tag){const{tag:o}=t,a=o instanceof Array;return this.getByMethod(a?this.methods.tags:this.methods.tag,i,s,a?gt.toMap(o):o)}else return this.getByMethod(this.methods.className,i,s,t.className);case"function":return this.getByMethod(t,i,s,n)}}getByInnerId(t,i){const s=this.innerIdMap[t];return s||(this.eachFind(this.toChildren(i),this.methods.innerId,null,t),this.findLeaf)}getById(t,i){const s=this.idMap[t];return s&&Vt.hasParent(s,i||this.target)?s:(this.eachFind(this.toChildren(i),this.methods.id,null,t),this.findLeaf)}getByClassName(t,i){return this.getByMethod(this.methods.className,i,!1,t)}getByTag(t,i){return this.getByMethod(this.methods.tag,i,!1,t)}getByMethod(t,i,s,n){const r=s?null:[];return this.eachFind(this.toChildren(i),t,r,n),r||this.findLeaf}eachFind(t,i,s,n){let r,o;for(let a=0,h=t.length;a<h;a++){if(r=t[a],o=i(r,n),o===RC||o===LC)if(s)s.push(r);else{this.findLeaf=r;return}r.isBranch&&o<kC&&this.eachFind(r.children,i,s,n)}}toChildren(t){return this.findLeaf=null,[t||this.target]}__onRemoveChild(t){const{id:i,innerId:s}=t.child;this.idMap[i]&&delete this.idMap[i],this.innerIdMap[s]&&delete this.innerIdMap[s]}__checkIdChange(t){if(t.attrName==="id"){const i=t.oldValue;this.idMap[i]&&delete this.idMap[i]}}__listenEvents(){this.__eventIds=[this.target.on_(Et.REMOVE,this.__onRemoveChild,this),this.target.on_(qe.CHANGE,this.__checkIdChange,this)]}__removeListenEvents(){this.target.off_(this.__eventIds),this.__eventIds.length=0}destroy(){const{__eventIds:t}=this;t&&t.length&&(this.__removeListenEvents(),this.innerIdMap={},this.idMap={}),this.findLeaf=null}}const Ng=L.prototype;function Vg(e){return e.leafer?e.leafer.selector:E.selector||(E.selector=rt.selector())}Ng.find=function(e,t){return Vg(this).getBy(e,this,!1,t)};Ng.findOne=function(e,t){return Vg(this).getBy(e,this,!0,t)};St.add("find");rt.finder=function(e){return new OC(e)};function Nr(e,t,i,s){var n=arguments.length,r=n<3?t:s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function ep(e){return e?e instanceof Array?e:[e]:[]}class he extends bi{get list(){return ep(this.value)}get oldList(){return ep(this.oldValue)}constructor(t,i){super(t),i&&Object.assign(this,i)}}he.SELECT="editor.select";he.HOVER="editor.hover";class $l extends he{constructor(t,i){super(t,i)}}$l.MOVE="editor.move";class bs extends he{constructor(t,i){super(t,i)}}bs.SCALE="editor.scale";class Dl extends he{constructor(t,i){super(t,i)}}Dl.ROTATE="editor.rotate";class Il extends he{constructor(t,i){super(t,i)}}Il.SKEW="editor.skew";function $c(e){return(t,i)=>{const s="_"+i;le(t,i,{get(){return this[s]},set(n){const r=this[s];r!==n&&(this[s]=n,e(this,r))}})}}const{abs:Xh}=Math,{copy:PC,scale:MC}=G,{setListWithFn:AC}=D,{worldBounds:$C}=as,Kh=vr(),ip=dc();class Wl extends L{constructor(){super(),this.list=[],this.hittable=!1,this.strokeAlign="center"}setTarget(t,i){this.set(i),this.target=t,this.update()}update(){const{list:t}=this;t.length?(AC(ip,t,$C),this.set(ip)):this.width=this.height=1}__draw(t,i){const{list:s}=this;if(s.length){let n;const r=this.__,{stroke:o,strokeWidth:a,fill:h}=r,{bounds:l}=i;for(let c=0;c<s.length;c++){n=s[c];const{worldTransform:d,worldRenderBounds:f}=n;if(!l||l.hit(f,i.matrix)){const u=Xh(d.scaleX),p=Xh(d.scaleY);if(u!==p){PC(Kh,d),MC(Kh,1/u,1/p),t.setWorld(Kh,i.matrix),t.beginPath(),r.strokeWidth=a;const{x:y,y:v,width:S,height:x}=n.__layout.boxBounds;t.rect(y*u,v*p,S*u,x*p)}else t.setWorld(d,i.matrix),t.beginPath(),n.__.__useArrow?n.__drawPath(t):n.__.__pathForRender?n.__drawRenderPath(t):n.__drawPathByBox(t),r.strokeWidth=a/Xh(d.scaleX);o&&(typeof o=="string"?Rt.stroke(o,this,t):Rt.strokes(o,this,t)),h&&(typeof h=="string"?Rt.fill(h,this,t):Rt.fills(h,this,t))}}r.strokeWidth=a}}destroy(){this.target=null,super.destroy()}}Nr([$c(DC)],Wl.prototype,"target",void 0);function DC(e){const t=e.target;e.list=t?t instanceof Array?t:[t]:[]}class IC extends Mt{constructor(t){super(t),this.strokeArea=new Ne({strokeAlign:"center"}),this.fillArea=new Ne,this.visible=this.hittable=!1,this.addMany(this.fillArea,this.strokeArea)}setStyle(t,i){const{visible:s,stroke:n,strokeWidth:r}=t;this.visible=s,this.strokeArea.reset(Object.assign({stroke:n,strokeWidth:r},i||{})),this.fillArea.reset({visible:!i,fill:n,opacity:.2})}setBounds(t){this.strokeArea.set(t),this.fillArea.set(t)}}const{No:qh,Yes:WC,NoAndSkip:sp,YesAndSkip:np}=No,Ug={findOne(e){return e.list.find(t=>t.editable)},findBounds(e,t){if(e.__.hittable&&e.__.visible&&!e.__.locked&&t.hit(e.__world)){if(e.__.editable){if(e.isBranch&&!e.__.hitChildren)return e.__.hitSelf?np:sp;if(e.isFrame)return t.includes(e.__layout.boxBounds,e.__world)?np:qh;if(t.hit(e.__layout.boxBounds,e.__world)&&e.__.hitSelf)return WC}return qh}else return e.isBranch?sp:qh}},{findOne:Zh}=Ug;class FC extends Mt{get dragging(){return!!this.originList}get running(){const{editor:t}=this;return this.hittable&&t.visible&&t.hittable&&t.mergeConfig.selector}get isMoveMode(){return this.app&&this.app.interaction.moveMode}constructor(t){super(),this.hoverStroker=new Wl,this.targetStroker=new Wl,this.bounds=new tt,this.selectArea=new IC,this.__eventIds=[],this.editor=t,this.addMany(this.targetStroker,this.hoverStroker,this.selectArea),this.__listenEvents()}onHover(){const{editor:t}=this;if(this.running&&!this.dragging&&!t.dragging){const{stroke:i,strokeWidth:s,hover:n,hoverStyle:r}=t.mergeConfig;this.hoverStroker.setTarget(n?this.editor.hoverTarget:null,Object.assign({stroke:i,strokeWidth:s},r||{}))}else this.hoverStroker.target=null}onSelect(){if(this.running){const{mergeConfig:t,list:i}=this.editor,{stroke:s,strokeWidth:n}=t;this.targetStroker.setTarget(i,{stroke:s,strokeWidth:Math.max(1,n/2)}),this.hoverStroker.target=null}}update(){this.hoverStroker.update(),this.targetStroker.update()}onPointerMove(t){const{app:i,editor:s}=this;if(this.running&&!this.isMoveMode&&i.interaction.canHover&&!i.interaction.dragging){const n=this.findUI(t);s.hoverTarget=s.hasItem(n)?null:n}this.isMoveMode&&(s.hoverTarget=null)}onBeforeDown(t){if(t.multiTouch)return;const{select:i}=this.editor.mergeConfig;i==="press"&&(this.app.config.mobile?this.waitSelect=()=>this.checkAndSelect(t):this.checkAndSelect(t))}onTap(t){if(t.multiTouch)return;const{editor:i}=this,{select:s}=i.mergeConfig;s==="tap"?this.checkAndSelect(t):this.waitSelect&&this.waitSelect(),this.needRemoveItem?i.removeItem(this.needRemoveItem):this.isMoveMode&&(i.target=null)}checkAndSelect(t){if(this.needRemoveItem=null,this.allowSelect(t)){const{editor:i}=this,s=this.findUI(t);s?this.isMultipleSelect(t)?i.hasItem(s)?this.needRemoveItem=s:i.addItem(s):i.target=s:this.allow(t.target)&&(t.shiftKey||(i.target=null))}}onDragStart(t){if(!t.multiTouch&&(this.waitSelect&&this.waitSelect(),this.allowDrag(t))){const{editor:i}=this,{stroke:s,area:n}=i.mergeConfig,{x:r,y:o}=t.getInnerPoint(this);this.bounds.set(r,o),this.selectArea.setStyle({visible:!0,stroke:s,x:r,y:o},n),this.selectArea.setBounds(this.bounds.get()),this.originList=i.leafList.clone()}}onDrag(t){if(!t.multiTouch){if(this.editor.dragging)return this.onDragEnd(t);if(this.dragging){const{editor:i}=this,s=t.getInnerTotal(this),n=this.bounds.clone().unsign(),r=new et(i.app.find(Ug.findBounds,n));if(this.bounds.width=s.x,this.bounds.height=s.y,this.selectArea.setBounds(n.get()),r.length){const o=[];this.originList.forEach(a=>{r.has(a)||o.push(a)}),r.forEach(a=>{this.originList.has(a)||o.push(a)}),(o.length!==i.list.length||i.list.some((a,h)=>a!==o[h]))&&(i.target=o)}else i.target=this.originList.list}}}onDragEnd(t){t.multiTouch||this.dragging&&(this.originList=null,this.selectArea.visible=!1)}onAutoMove(t){if(this.dragging){const{x:i,y:s}=t.getLocalMove(this);this.bounds.x+=i,this.bounds.y+=s}}allow(t){return t.leafer!==this.editor.leafer}allowDrag(t){return this.running&&this.editor.mergeConfig.boxSelect&&St.has("find")&&!t.target.draggable?!this.editor.editing&&this.allow(t.target)||t.shiftKey&&!Zh(t.path):!1}allowSelect(t){return this.running&&!this.isMoveMode&&!t.middle}findDeepOne(t){const i={exclude:new et(this.editor.editBox.rect)};return Zh(t.target.leafer.interaction.findPath(t,i))}findUI(t){return this.isMultipleSelect(t)?this.findDeepOne(t):Zh(t.path)}isMultipleSelect(t){return t.shiftKey||this.editor.mergeConfig.continuousSelect}__listenEvents(){const{editor:t}=this;t.waitLeafer(()=>{const{app:i}=t;i.selector.proxy=t,this.__eventIds=[t.on_(he.HOVER,this.onHover,this),t.on_(he.SELECT,this.onSelect,this),i.on_(I.MOVE,this.onPointerMove,this),i.on_(I.BEFORE_DOWN,this.onBeforeDown,this),i.on_(I.TAP,this.onTap,this),i.on_(Z.START,this.onDragStart,this,!0),i.on_(Z.DRAG,this.onDrag,this),i.on_(Z.END,this.onDragEnd,this),i.on_(Ht.MOVE,this.onAutoMove,this),i.on_([we.ZOOM,Ht.MOVE],()=>{this.editor.hoverTarget=null})]})}__removeListenEvents(){this.__eventIds&&(this.off_(this.__eventIds),this.__eventIds.length=0)}destroy(){this.editor=this.originList=this.needRemoveItem=null,this.__removeListenEvents(),super.destroy()}}const{topLeft:Xs,top:qn,topRight:Ks,right:Zn,bottomRight:qs,bottom:Jn,bottomLeft:Zs,left:Qn}=mn,{toPoint:Jh}=He,{within:rp}=$t,vs={getScaleData(e,t,i,s,n,r,o,a){let h,l={},c=1,d=1;const{boxBounds:f,widthRange:u,heightRange:p}=e,{width:y,height:v}=t;r&&(s.x*=2,s.y*=2);const S=e.scaleX/t.scaleX,x=e.scaleY/t.scaleY,C=S<0?-1:1,w=x<0?-1:1,M=a?S:C*f.width/y,z=a?x:w*f.height/v;s.x*=a?S:C,s.y*=a?x:w,Math.abs(s.x)===y&&(s.x+=.1),Math.abs(s.y)===v&&(s.y+=.1);const V=(-s.y+v)/v,ut=(s.x+y)/y,Lt=(s.y+v)/v,dt=(-s.x+y)/y;switch(i){case qn:d=V,h="bottom";break;case Zn:c=ut,h="left";break;case Jn:d=Lt,h="top";break;case Qn:c=dt,h="right";break;case Xs:d=V,c=dt,h="bottom-right";break;case Ks:d=V,c=ut,h="bottom-left";break;case qs:d=Lt,c=ut,h="top-left";break;case Zs:d=Lt,c=dt,h="top-right"}if(n&&!(n==="corner"&&i%2)){let wt;switch(i){case qn:case Jn:wt=d;break;case Qn:case Zn:wt=c;break;default:wt=Math.sqrt(Math.abs(c*d))}c=c<0?-wt:wt,d=d<0?-wt:wt}if(c/=M,d/=z,!o){const{worldTransform:Q}=e;c<0&&(c=1/f.width/Q.scaleX),d<0&&(d=1/f.height/Q.scaleY)}if(u){const Q=f.width*e.scaleX;c=rp(Q*c,u)/Q}if(p){const Q=f.height*e.scaleY;d=rp(Q*d,p)/Q}return Jh(r||h,f,l,!0),{origin:l,scaleX:c,scaleY:d,direction:i,lockRatio:n,around:r}},getRotateData(e,t,i,s,n){let r,o={};switch(t){case Xs:r="bottom-right";break;case Ks:r="bottom-left";break;case qs:r="top-left";break;case Zs:r="top-right";break;default:r="center"}return Jh(n||r,e,o,!0),{origin:o,rotation:H.getRotation(s,o,i)}},getSkewData(e,t,i,s){let n,r={},o=0,a=0,h;switch(t){case qn:h={x:.5,y:0},n="bottom",o=1;break;case Jn:h={x:.5,y:1},n="top",o=1;break;case Qn:h={x:0,y:.5},n="right",a=1;break;case Zn:h={x:1,y:.5},n="left",a=1}const{width:l,height:c}=e;h.x=h.x*l,h.y=h.y*c,Jh(s||n,e,r,!0);const d=H.getRotation(h,r,{x:h.x+(o?i.x:0),y:h.y+(a?i.y:0)});return o?o=-d:a=d,{origin:r,skewX:o,skewY:a}},getAround(e,t){return t&&!e?"center":e},getRotateDirection(e,t,i=8){return e=(e+Math.round(t/(360/i)))%i,e<0&&(e+=i),e},getFlipDirection(e,t,i){if(t)switch(e){case Qn:e=Zn;break;case Xs:e=Ks;break;case Zs:e=qs;break;case Zn:e=Qn;break;case Ks:e=Xs;break;case qs:e=Zs;break}if(i)switch(e){case qn:e=Jn;break;case Xs:e=Zs;break;case Ks:e=qs;break;case Jn:e=qn;break;case Zs:e=Xs;break;case qs:e=Ks;break}return e}},Qh={};function Fl(e,t){const{editBox:i}=e,s=i.enterPoint;if(!s||!e.editing||!i.visible||s.name==="circle")return;if(s.pointType==="button"){s.cursor||(s.cursor="pointer");return}let{rotation:n}=i;const{resizeCursor:r,rotateCursor:o,skewCursor:a,resizeable:h,rotateable:l,skewable:c}=e.mergeConfig,{pointType:d}=s,{flippedX:f,flippedY:u}=i;let p=d==="resize";p&&l&&(t.metaKey||t.ctrlKey||!h)&&(p=!1);const v=c&&!p&&s.name==="resize-line"?a:p?r:o;n+=(vs.getFlipDirection(s.direction,f,u)+1)*45,n=Math.round($t.formatRotation(n,!0)/2)*2;const{url:S,x,y:C}=v,w=S+n;Qh[w]?s.cursor=Qh[w]:Qh[w]=s.cursor={url:zC(S,n),x,y:C}}function Gg(e){const{moveCursor:t,moveable:i}=e.mergeConfig;e.editBox.rect.cursor=i?t:void 0}function zC(e,t){return'"data:image/svg+xml,'+encodeURIComponent(e.replace("{{rotation}}",t.toString()))+'"'}class bo extends Ft{}const op=["top","right","bottom","left"];class HC extends Mt{get flipped(){return this.flippedX||this.flippedY}get flippedX(){return this.scaleX<0}get flippedY(){return this.scaleY<0}get flippedOne(){return this.scaleX*this.scaleY<0}constructor(t){super(),this.view=new Mt,this.rect=new Ft({name:"rect",hitFill:"all",hitStroke:"none",strokeAlign:"center",hitRadius:5}),this.circle=new bo({name:"circle",strokeAlign:"center",around:"center",cursor:"crosshair",hitRadius:5}),this.buttons=new Mt({around:"center",hitSelf:!1}),this.resizePoints=[],this.rotatePoints=[],this.resizeLines=[],this.__eventIds=[],this.editor=t,this.visible=!1,this.create(),this.__listenEvents()}create(){let t,i,s;const{view:n,resizePoints:r,rotatePoints:o,resizeLines:a,rect:h,circle:l,buttons:c}=this,d=["bottom-right","bottom","bottom-left","left","top-left","top","top-right","right"];for(let f=0;f<8;f++)t=new bo({name:"rotate-point",around:d[f],width:15,height:15,hitFill:"all"}),o.push(t),this.listenPointEvents(t,"rotate",f),f%2&&(i=new bo({name:"resize-line",around:"center",width:10,height:10,hitFill:"all"}),a.push(i),this.listenPointEvents(i,"resize",f)),s=new bo({name:"resize-point",hitRadius:5}),r.push(s),this.listenPointEvents(s,"resize",f);this.listenPointEvents(l,"rotate",2),n.addMany(...o,h,l,c,...a,...r),this.add(n)}load(){const{mergeConfig:t,element:i,single:s}=this.editor,{rect:n,circle:r,resizePoints:o}=this,{stroke:a,strokeWidth:h}=t,l=this.getPointsStyle(),c=this.getMiddlePointsStyle();let d;for(let f=0;f<8;f++)d=o[f],d.set(this.getPointStyle(f%2?c[(f-1)/2%c.length]:l[f/2%l.length])),f%2||(d.rotation=f/2*90);r.set(this.getPointStyle(t.circle||t.rotatePoint||l[0])),n.set(Object.assign({stroke:a,strokeWidth:h},t.rect||{})),n.hittable=!s,n.syncEventer=s&&this.editor,s&&(i.syncEventer=n,this.app.interaction.bottomList=[{target:n,proxy:i}])}update(t){if(this.visible=!this.editor.element.locked,this.view.worldOpacity){const{mergeConfig:i}=this.editor,{width:s,height:n}=t,{rect:r,circle:o,buttons:a,resizePoints:h,rotatePoints:l,resizeLines:c}=this,{middlePoint:d,resizeable:f,rotateable:u,hideOnSmall:p}=i,y=typeof p=="number"?p:10,v=!(p&&s<y&&n<y);let S={},x,C,w;for(let M=0;M<8;M++)He.toPoint(He.directionData[M],t,S),C=h[M],x=l[M],w=c[Math.floor(M/2)],C.set(S),x.set(S),w.set(S),C.visible=w.visible=v&&!!(f||u),x.visible=v&&u&&f&&!i.rotatePoint,M%2&&(C.visible=x.visible=v&&!!d,(M+1)/2%2?(w.width=s,C.width>s-30&&(C.visible=!1)):(w.height=n,C.rotation=90,C.width>n-30&&(C.visible=!1)));o.visible=v&&u&&!!(i.circle||i.rotatePoint),o.visible&&this.layoutCircle(i),r.path&&(r.path=null),r.set(Object.assign(Object.assign({},t),{visible:!0})),a.visible=v&&a.children.length>0,a.visible&&this.layoutButtons(i)}}layoutCircle(t){const{circleDirection:i,circleMargin:s,buttonsMargin:n,buttonsDirection:r,middlePoint:o}=t,a=op.indexOf(i||(this.buttons.children.length&&r==="bottom"?"top":"bottom"));this.setButtonPosition(this.circle,a,s||n,!!o)}layoutButtons(t){const{buttons:i}=this,{buttonsDirection:s,buttonsFixed:n,buttonsMargin:r,middlePoint:o}=t,{flippedX:a,flippedY:h}=this;let l=op.indexOf(s);(l%2&&a||(l+1)%2&&h)&&n&&(l=(l+2)%4);const c=n?vs.getRotateDirection(l,this.flippedOne?this.rotation:-this.rotation,4):l;this.setButtonPosition(i,c,r,!!o),n&&(i.rotation=(c-l)*90),i.scaleX=a?-1:1,i.scaleY=h?-1:1}setButtonPosition(t,i,s,n){const r=this.resizePoints[i*2+1],o=i%2,a=!i||i===3?-1:1,h=i%2,l=(s+(h?(n?r.width:0)+t.boxBounds.width:(n?r.height:0)+t.boxBounds.height)/2)*a;o?(t.x=r.x+l,t.y=r.y):(t.x=r.x,t.y=r.y+l)}unload(){this.visible=!1}getPointStyle(t){const{stroke:i,strokeWidth:s,pointFill:n,pointSize:r,pointRadius:o}=this.editor.mergeConfig,a={fill:n,stroke:i,strokeWidth:s,around:"center",strokeAlign:"center",width:r,height:r,cornerRadius:o,offsetX:0,offsetY:0};return t?Object.assign(a,t):a}getPointsStyle(){const{point:t}=this.editor.mergeConfig;return t instanceof Array?t:[t]}getMiddlePointsStyle(){const{middlePoint:t}=this.editor.mergeConfig;return t instanceof Array?t:t?[t]:this.getPointsStyle()}onSelect(t){t.oldList.length===1&&(t.oldList[0].syncEventer=null,this.app&&(this.app.interaction.bottomList=null))}onDragStart(t){this.dragging=!0;const{editor:i}=this;t.current.name==="rect"?(this.moving=!0,i.dragStartPoint={x:i.element.x,y:i.element.y},i.opacity=i.mergeConfig.hideOnMove?0:1):t.current.pointType==="resize"&&(i.dragStartBounds=Object.assign({},i.element.getLayoutBounds("box","local")),i.resizeDirection=t.current.direction)}onDragEnd(t){this.dragging=!1,this.moving=!1,t.current.name==="rect"&&(this.editor.opacity=1),this.editor.resizeDirection=void 0}onDrag(t){const{editor:i}=this,s=this.enterPoint=t.current;s.pointType==="rotate"||t.metaKey||t.ctrlKey||!i.mergeConfig.resizeable?i.mergeConfig.rotateable&&i.onRotate(t):s.pointType==="resize"&&i.onScale(t),Fl(i,t)}onArrow(t){if(this.editor.editing&&this.editor.mergeConfig.keyEvent){const i={x:0,y:0},s=t.shiftKey?10:1;switch(t.code){case"ArrowDown":i.y=s;break;case"ArrowUp":i.y=-s;break;case"ArrowLeft":i.x=-s;break;case"ArrowRight":i.x=s}this.editor.move(i)}}onDoubleTap(t){this.editor.mergeConfig.openInner==="double"&&this.openInner(t)}onLongPress(t){this.editor.mergeConfig.openInner==="long"&&this.openInner(t)}openInner(t){const{editor:i}=this;if(i.single){const{element:s}=i;if(s.locked)return;if(s.isBranch&&!s.editInner){if(s.textBox){const{children:n}=s,r=n.find(o=>o.editable&&o instanceof lt)||n.find(o=>o instanceof lt);if(r)return i.openInnerEditor(r)}i.openGroup(s),i.target=i.selector.findDeepOne(t)}else i.openInnerEditor()}}listenPointEvents(t,i,s){const{editor:n}=this;t.direction=s,t.pointType=i,t.on_(Z.START,this.onDragStart,this),t.on_(Z.DRAG,this.onDrag,this),t.on_(Z.END,this.onDragEnd,this),t.on_(I.LEAVE,()=>this.enterPoint=null),t.name!=="circle"&&t.on_(I.ENTER,r=>{this.enterPoint=t,Fl(n,r)})}__listenEvents(){const{rect:t,editor:i}=this;this.__eventIds=[i.on_(he.SELECT,this.onSelect,this),t.on_(Z.START,this.onDragStart,this),t.on_(Z.DRAG,i.onMove,i),t.on_(Z.END,this.onDragEnd,this),t.on_(I.ENTER,()=>Gg(i)),t.on_(I.DOUBLE_TAP,this.onDoubleTap,this),t.on_(I.LONG_PRESS,this.onLongPress,this)]}__removeListenEvents(){this.off_(this.__eventIds),this.__eventIds.length=0}destroy(){this.editor=null,this.__removeListenEvents(),super.destroy()}}class jC extends L{constructor(t){super(),this.editor=t,this.hittable=!1}__draw(t,i){const{editor:s}=this,{mask:n}=s.mergeConfig;if(n&&s.list.length){const{rect:r}=s.editBox,{width:o,height:a}=r.__;t.resetTransform(),t.fillWorld(t.bounds,n===!0?"rgba(0,0,0,0.8)":n),t.setWorld(r.__world,i.matrix),t.clearRect(0,0,o,a)}}destroy(){this.editor=null,super.destroy()}}const Dc=`
<feOffset dy="1"/>
<feGaussianBlur stdDeviation="1.5"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>
<feBlend mode="normal" in="SourceGraphic" result="shape"/>`,NC=`
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#f)">
<g transform="rotate({{rotation}},12,12)">
<path d="M7.5 8.0H8.5V5.9L6.8 7.2L7.5 8.0ZM3 11.4L2.3 10.6L1.3 11.4L2.3 12.2L3 11.4ZM7.5 10.4H6.5V11.4H7.5V10.4ZM16.5 10.4V11.4H17.5V10.4H16.5ZM16.5 8.0L17.1 7.2L15.5 5.9V8.0H16.5ZM21 11.4L21.6 12.2L22.6 11.4L21.6 10.6L21 11.4ZM16.5 14.9H15.5V16.9L17.1 15.7L16.5 14.9ZM16.5 12.4H17.5V11.4H16.5V12.4ZM7.5 12.4V11.4H6.5V12.4H7.5ZM7.5 14.9L6.8 15.7L8.5 16.9V14.9H7.5ZM6.8 7.2L2.3 10.6L3.6 12.2L8.1 8.7L6.8 7.2ZM8.5 10.4V8.0H6.5V10.4H8.5ZM16.5 9.4H7.5V11.4H16.5V9.4ZM17.5 10.4V8.0H15.5V10.4H17.5ZM15.8 8.7L20.3 12.2L21.6 10.6L17.1 7.2L15.8 8.7ZM20.3 10.6L15.8 14.1L17.1 15.7L21.6 12.2L20.3 10.6ZM17.5 14.9V12.4H15.5V14.9H17.5ZM7.5 13.4H16.5V11.4H7.5V13.4ZM8.5 14.9V12.4H6.5V14.9H8.5ZM2.3 12.2L6.8 15.7L8.1 14.1L3.6 10.6L2.3 12.2Z" fill="white"/>
<path fill-rule="evenodd" d="M3 11.4L7.5 8.0V10.4H16.5V8.0L21 11.4L16.5 14.9V12.4H7.5V14.9L3 11.4Z" fill="black"/>
</g>
</g>
<defs>
<filter id="f" x="-1.6" y="3.9" width="27.2" height="16.9" filterUnits="userSpaceOnUse">
${Dc}
</filter>
</defs>
</svg>
`,VC=`
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#f)">
<g transform="rotate(135,12,12),rotate({{rotation}},12,12)">
<path d="M20.4 8H21.4L20.8 7.1L17.3 2.6L17 2.1L16.6 2.6L13.1 7.1L12.5 8H13.5H15.4C14.9 11.8 11.8 14.9 8 15.4V13.5V12.5L7.1 13.1L2.6 16.6L2.1 17L2.6 17.3L7.1 20.8L8 21.4V20.4V18.4C13.5 17.9 17.9 13.5 18.4 8H20.4Z" stroke="white"/>
<path fill-rule="evenodd" d="M17 3L20.4 7.5H17.9C17.7 13.1 13.1 17.7 7.5 17.9V20.4L3 17L7.5 13.5V15.9C12.0 15.7 15.7 12.0 15.9 7.5H13.5L17 3Z" fill="black"/>
</g>
</g>
<defs>
<filter id="f" x="-1.6" y="-0.6" width="27.1" height="27.1" filterUnits="userSpaceOnUse">
${Dc}
</filter>
</defs>
</svg>
`,UC=`
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#f)">
<g transform="rotate(90,12,12),rotate({{rotation}},12,12)">
<path d="M21 10.4L21 11.4L23.8 11.4L21.6 9.6L21 10.4ZM17 10.4V11.4L17 11.4L17 10.4ZM15.5 6L16.1 5.2L14.5 3.9V6H15.5ZM15.5 8.4V9.4H16.5V8.4H15.5ZM6 8.4V7.4H5V8.4H6ZM6 10.4H5V11.4H6V10.4ZM7 14.4V13.4L7 13.4L7 14.4ZM3 14.4L3 13.4L0.1 13.4L2.3 15.2L3 14.4ZM8.5 18.9L7.8 19.7L9.5 21.0V18.9H8.5ZM8.5 16.4V15.4H7.5V16.4H8.5ZM19 16.4V17.4H20V16.4H19ZM19 14.4H20V13.4H19V14.4ZM21 9.4L17 9.4L17 11.4L21 11.4L21 9.4ZM14.8 6.7L20.3 11.2L21.6 9.6L16.1 5.2L14.8 6.7ZM16.5 8.4V6H14.5V8.4H16.5ZM6 9.4H15.5V7.4H6V9.4ZM7 10.4V8.4H5V10.4H7ZM15.5 9.4H6V11.4H15.5V9.4ZM17 9.4H15.5V11.4H17V9.4ZM7 15.4H8.5V13.4H7V15.4ZM3 15.4L7 15.4L7 13.4L3 13.4L3 15.4ZM9.1 18.1L3.6 13.6L2.3 15.2L7.8 19.7L9.1 18.1ZM7.5 16.4V18.9H9.5V16.4H7.5ZM19 15.4H8.5V17.4H19V15.4ZM18 14.4V16.4H20V14.4H18ZM8.5 15.4H19V13.4H8.5V15.4Z" fill="white"/>
<path fill-rule="evenodd" d="M17 10.4L21 10.4L15.5 6V8.4H6V10.4H15.5H17ZM8.5 14.4H7L3 14.4L8.5 18.9V16.4H19V14.4H8.5Z" fill="black"/>
</g>
</g>
<defs>
<filter x="-2.8" y="1.9" width="29.6" height="23.1" filterUnits="userSpaceOnUse" >
${Dc}
</filter>
</defs>
</svg>
`,GC={editSize:"size",keyEvent:!0,stroke:"#836DFF",strokeWidth:2,pointFill:"#FFFFFF",pointSize:10,pointRadius:16,rotateGap:45,buttonsDirection:"bottom",buttonsMargin:12,hideOnSmall:!0,moveCursor:"move",resizeCursor:{url:NC,x:12,y:12},rotateCursor:{url:VC,x:12,y:12},skewCursor:{url:UC,x:12,y:12},selector:!0,hover:!0,select:"press",openInner:"double",boxSelect:!0,moveable:!0,resizeable:!0,flipable:!0,rotateable:!0,skewable:!0},YC=new tt;function Yg(e){const{simulateTarget:t,list:i}=e,{zoomLayer:s}=i[0].leafer.zoomLayer;t.safeChange(()=>t.reset(YC.setListWithFn(i,n=>n.getBounds("box","page")).get())),s.add(t)}function XC(e,t){const{target:i}=e;i?e.leafList=i instanceof et?i:new et((i instanceof Array,i)):(e.simulateTarget.remove(),e.leafList.reset(),e.closeInnerEditor()),e.emitEvent(new he(he.SELECT,{editor:e,value:i,oldValue:t})),e.checkOpenedGroups(),e.editing?e.waitLeafer(()=>{e.multiple&&Yg(e),Gg(e),e.updateEditTool(),e.update(),e.listenTargetEvents()}):(e.updateEditTool(),e.removeTargetEvents())}function KC(e,t){e.emitEvent(new he(he.HOVER,{editor:e,value:e.hoverTarget,oldValue:t}))}const ap=(e,t)=>e.parent.children.indexOf(e)-t.parent.children.indexOf(t),hp=(e,t)=>t.parent.children.indexOf(t)-e.parent.children.indexOf(e),vo={group(e,t,i){e.sort(hp);const{app:s,parent:n}=e[0];let r;i&&i.add?r=i:r=new Mt(i),n.addAt(r,n.children.indexOf(e[0])),e.sort(ap);const o=new ae(t.worldTransform);return o.divideParent(n.worldTransform),r.setTransform(o),r.editable=!0,r.hitChildren=!1,s.lockLayout(),e.forEach(a=>a.dropTo(r)),s.unlockLayout(),r},ungroup(e){const{app:t}=e[0],i=[];return t.lockLayout(),e.forEach(s=>{if(s.isBranch&&!s.isBranchLeaf){const{parent:n,children:r}=s;for(;r.length;)i.push(r[0]),r[0].dropTo(n,n.children.indexOf(s));s.remove()}else i.push(s)}),t.unlockLayout(),i},toTop(e){e.sort(ap),e.forEach(t=>{t.parent&&t.parent.add(t)})},toBottom(e){e.sort(hp),e.forEach(t=>{t.parent&&t.parent.addAt(t,0)})}},qC=it.get("EditToolCreator");function Ic(){return e=>{Ts.register(e)}}const ZC=Ic,Ts={list:{},register(e){const{tag:t}=e.prototype;tl[t]&&qC.repeat(t),tl[t]=e},get(e,t){return new tl[e](t)}},{list:tl}=Ts;class $i extends he{constructor(t,i){super(t,i)}}$i.BEFORE_OPEN="innerEditor.before_open";$i.OPEN="innerEditor.open";$i.BEFORE_CLOSE="innerEditor.before_close";$i.CLOSE="innerEditor.close";class Xe extends he{constructor(t,i){super(t,i)}}Xe.GROUP="editor.group";Xe.BEFORE_UNGROUP="editor.before_ungroup";Xe.UNGROUP="editor.ungroup";Xe.OPEN="editor.open_group";Xe.CLOSE="editor.close_group";const{updateMatrix:el}=Vt,JC={x:1,y:1,scaleX:1,scaleY:1,rotation:1,skewX:1,skewY:1},tr="top-left";class QC extends Ne{get __tag(){return"SimulateElement"}constructor(t){super(),this.checkChange=!0,this.canChange=!0,this.visible=this.hittable=!1,this.on(qe.CHANGE,i=>{if(this.checkChange&&JC[i.attrName]){const{attrName:s,newValue:n,oldValue:r}=i,o=s[0]==="s"?(n||1)/(r||1):(n||0)-(r||0);this.canChange=!1;const a=this.__;a[s]=r,el(this.parent),el(this);const h=new ae(this.__world);switch(a[s]=n,this.__layout.rotationChange(),el(this),this.changedTransform=new ae(this.__world).divide(h),s){case"x":t.move(o,0);break;case"y":t.move(0,o);break;case"rotation":t.rotateOf(tr,o);break;case"scaleX":t.scaleOf(tr,o,1);break;case"scaleY":t.scaleOf(tr,1,o);break;case"skewX":t.skewOf(tr,o,0);break;case"skewY":t.skewOf(tr,0,o)}this.canChange=!0}})}safeChange(t){this.canChange&&(this.checkChange=!1,t(),this.checkChange=!0)}}class Wc extends Mt{get mergeConfig(){const{element:t,config:i}=this;return this.single&&t.editConfig?Object.assign(Object.assign({},i),t.editConfig):i}get list(){return this.leafList.list}get dragHoverExclude(){return[this.editBox.rect]}get editing(){return!!this.list.length}get groupOpening(){return!!this.openedGroupList.length}get multiple(){return this.list.length>1}get single(){return this.list.length===1}get dragging(){return this.editBox.dragging}get moving(){return this.editBox.moving}get element(){return this.multiple?this.simulateTarget:this.list[0]}get buttons(){return this.editBox.buttons}constructor(t,i){super(i),this.config=gt.clone(GC),this.leafList=new et,this.openedGroupList=new et,this.simulateTarget=new QC(this),this.editBox=new HC(this),this.editToolList={},this.selector=new FC(this),this.editMask=new jC(this),this.targetEventIds=[],t&&(this.config=gt.default(t,this.config)),this.addMany(this.editMask,this.selector,this.editBox),St.has("resize")||(this.config.editSize="scale")}select(t){this.target=t}cancel(){this.target=null}hasItem(t){return this.leafList.has(t)}addItem(t){!this.hasItem(t)&&!t.locked&&(this.leafList.add(t),this.target=this.leafList.list)}removeItem(t){this.hasItem(t)&&(this.leafList.remove(t),this.target=this.leafList.list)}shiftItem(t){this.hasItem(t)?this.removeItem(t):this.addItem(t)}update(){this.editing&&(this.innerEditing&&this.innerEditor.update(),this.editTool.update(),this.selector.update())}updateEditBox(){this.multiple&&Yg(this),this.update()}updateEditTool(){const t=this.editTool;if(t&&(this.editBox.unload(),t.unload(),this.editTool=null),this.editing){const i=this.single?this.list[0].editOuter:"EditTool";this.editTool=this.editToolList[i]=this.editToolList[i]||Ts.get(i,this),this.editBox.load(),this.editTool.load()}}getEditSize(t){return this.mergeConfig.editSize}onMove(t){if(t instanceof Ht){if(t.moveType!=="drag"){const{moveable:i,resizeable:s}=this.mergeConfig,n=t.getLocalMove(this.element);i==="move"?(t.stop(),this.move(n.x,n.y)):s==="zoom"&&t.stop()}}else{const i={x:t.totalX,y:t.totalY};t.shiftKey&&(Math.abs(i.x)>Math.abs(i.y)?i.y=0:i.x=0),this.move(Z.getValidMove(this.element,this.dragStartPoint,i))}}onScale(t){const{element:i}=this;let{around:s,lockRatio:n,resizeable:r,flipable:o,editSize:a}=this.mergeConfig;if(t instanceof we)r==="zoom"&&(t.stop(),this.scaleOf(i.getBoxPoint(t),t.scale,t.scale));else{const{direction:h}=t.current;(t.shiftKey||i.lockRatio)&&(n=!0);const l=vs.getScaleData(i,this.dragStartBounds,h,t.getInnerTotal(i),n,vs.getAround(s,t.altKey),o,this.multiple||a==="scale");this.editTool.onScaleWithDrag?(l.drag=t,this.scaleWithDrag(l)):this.scaleOf(l.origin,l.scaleX,l.scaleY)}}onRotate(t){const{skewable:i,rotateable:s,around:n,rotateGap:r}=this.mergeConfig,{direction:o,name:a}=t.current;if(i&&a==="resize-line")return this.onSkew(t);const{element:h}=this;let l,c;if(t instanceof ze)if(s==="rotate")t.stop(),c=t.rotation,l=h.getBoxPoint(t);else return;else{const d={x:t.x-t.moveX,y:t.y-t.moveY},f=vs.getRotateData(h.boxBounds,o,t.getBoxPoint(h),h.getBoxPoint(d),t.shiftKey?null:h.around||h.origin||n||"center");c=f.rotation,l=f.origin}c=$t.getGapRotation(c,r,h.rotation),c&&(h.scaleX*h.scaleY<0&&(c=-c),this.rotateOf(l,$t.float(c,2)))}onSkew(t){const{element:i}=this,{around:s}=this.mergeConfig,{origin:n,skewX:r,skewY:o}=vs.getSkewData(i.boxBounds,t.current.direction,t.getInnerMove(i),vs.getAround(s,t.altKey));!r&&!o||this.skewOf(n,r,o)}move(t,i=0){if(!this.checkTransform("moveable"))return;const{element:s}=this,n=s.getWorldPointByLocal(typeof t=="object"?Object.assign({},t):{x:t,y:i},null,!0);this.multiple&&s.safeChange(()=>s.move(t,i));const r=new $l($l.MOVE,{target:s,editor:this,moveX:n.x,moveY:n.y});this.editTool.onMove(r),this.emitEvent(r)}scaleWithDrag(t){if(!this.checkTransform("resizeable"))return;const{element:i}=this,s=new bs(bs.SCALE,Object.assign(Object.assign({},t),{target:i,editor:this,worldOrigin:i.getWorldPoint(t.origin)}));this.editTool.onScaleWithDrag(s),this.emitEvent(s)}scaleOf(t,i,s=i,n){if(!this.checkTransform("resizeable"))return;const{element:r}=this,o=this.getWorldOrigin(t),a=this.multiple&&this.getChangedTransform(()=>r.safeChange(()=>r.scaleOf(t,i,s))),h=new bs(bs.SCALE,{target:r,editor:this,worldOrigin:o,scaleX:i,scaleY:s,transform:a});this.editTool.onScale(h),this.emitEvent(h)}flip(t){if(!this.checkTransform("resizeable"))return;const{element:i}=this,s=this.getWorldOrigin("center"),n=this.multiple?this.getChangedTransform(()=>i.safeChange(()=>i.flip(t))):new ae(Vt.getFlipTransform(i,t)),r=new bs(bs.SCALE,{target:i,editor:this,worldOrigin:s,scaleX:t==="x"?-1:1,scaleY:t==="y"?-1:1,transform:n});this.editTool.onScale(r),this.emitEvent(r)}rotateOf(t,i){if(!this.checkTransform("rotateable"))return;const{element:s}=this,n=this.getWorldOrigin(t),r=this.multiple&&this.getChangedTransform(()=>s.safeChange(()=>s.rotateOf(t,i))),o=new Dl(Dl.ROTATE,{target:s,editor:this,worldOrigin:n,rotation:i,transform:r});this.editTool.onRotate(o),this.emitEvent(o)}skewOf(t,i,s=0,n){if(!this.checkTransform("skewable"))return;const{element:r}=this,o=this.getWorldOrigin(t),a=this.multiple&&this.getChangedTransform(()=>r.safeChange(()=>r.skewOf(t,i,s))),h=new Il(Il.SKEW,{target:r,editor:this,worldOrigin:o,skewX:i,skewY:s,transform:a});this.editTool.onSkew(h),this.emitEvent(h)}checkTransform(t){return this.element&&!this.element.locked&&this.mergeConfig[t]}getWorldOrigin(t){return this.element.getWorldPoint(Vt.getInnerOrigin(this.element,t))}getChangedTransform(t){const{element:i}=this;if(this.multiple&&!i.canChange)return i.changedTransform;const s=new ae(i.worldTransform);return t(),new ae(i.worldTransform).divide(s)}group(t){return this.multiple&&(this.target=vo.group(this.list,this.element,t),this.emitGroupEvent(Xe.GROUP,this.target)),this.target}ungroup(){const{list:t}=this;return t.length&&(t.forEach(i=>i.isBranch&&this.emitGroupEvent(Xe.BEFORE_UNGROUP,i)),this.target=vo.ungroup(t),t.forEach(i=>i.isBranch&&this.emitGroupEvent(Xe.UNGROUP,i))),this.list}openGroup(t){this.openedGroupList.add(t),t.hitChildren=!0,this.emitGroupEvent(Xe.OPEN,t)}closeGroup(t){this.openedGroupList.remove(t),t.hitChildren=!1,this.emitGroupEvent(Xe.CLOSE,t)}checkOpenedGroups(){const t=this.openedGroupList;if(t.length){let{list:i}=t;this.editing&&(i=[],t.forEach(s=>this.list.every(n=>!Vt.hasParent(n,s))&&i.push(s))),i.forEach(s=>this.closeGroup(s))}this.editing&&!this.selector.dragging&&this.checkDeepSelect()}checkDeepSelect(){let t,{list:i}=this;for(let s=0;s<i.length;s++)for(t=i[s].parent;t&&!t.hitChildren;)this.openGroup(t),t=t.parent}emitGroupEvent(t,i){const s=new Xe(t,{editTarget:i});this.emitEvent(s),i.emitEvent(s)}openInnerEditor(t,i){if(t&&i&&(this.target=t),this.single){const s=t||this.element,n=s.editInner;n&&Ts.list[n]&&(this.editTool.unload(),this.innerEditing=!0,this.innerEditor=this.editToolList[n]||Ts.get(n,this),this.innerEditor.editTarget=s,this.emitInnerEvent($i.BEFORE_OPEN),this.innerEditor.load(),this.emitInnerEvent($i.OPEN))}}closeInnerEditor(){this.innerEditing&&(this.innerEditing=!1,this.emitInnerEvent($i.BEFORE_CLOSE),this.innerEditor.unload(),this.emitInnerEvent($i.CLOSE),this.editTool.load(),this.innerEditor=null)}emitInnerEvent(t){const{innerEditor:i}=this,{editTarget:s}=i,n=new $i(t,{editTarget:s,innerEditor:i});this.emitEvent(n),s.emitEvent(n)}lock(){this.list.forEach(t=>t.locked=!0),this.update()}unlock(){this.list.forEach(t=>t.locked=!1),this.update()}toTop(){this.list.length&&(vo.toTop(this.list),this.leafList.update())}toBottom(){this.list.length&&(vo.toBottom(this.list),this.leafList.update())}listenTargetEvents(){if(!this.targetEventIds.length){const{app:t,leafer:i}=this;this.targetEventIds=[i.on_(K.START,this.update,this),t.on_(K.CHILD_START,this.forceRender,this),t.on_(Ht.BEFORE_MOVE,this.onMove,this,!0),t.on_(we.BEFORE_ZOOM,this.onScale,this,!0),t.on_(ze.BEFORE_ROTATE,this.onRotate,this,!0),t.on_([ti.HOLD,ti.UP],s=>{Fl(this,s)}),t.on_(ti.DOWN,this.editBox.onArrow,this.editBox)]}}removeTargetEvents(){const{targetEventIds:t}=this;t.length&&(this.off_(t),t.length=0)}destroy(){this.destroyed||(this.target=this.hoverTarget=null,Object.values(this.editToolList).forEach(t=>t.destroy()),this.simulateTarget.destroy(),this.editToolList={},this.simulateTarget=this.editTool=this.innerEditor=null,super.destroy())}}Nr([$c(KC)],Wc.prototype,"hoverTarget",void 0);Nr([$c(XC)],Wc.prototype,"target",void 0);class Xg{static registerInnerEditor(){Ts.register(this)}get tag(){return"InnerEditor"}get editBox(){return this.editor.editBox}constructor(t){this.editor=t,this.create()}onCreate(){}create(){this.view=new Mt,this.onCreate()}onLoad(){}load(){const{editor:t}=this;t&&(t.app&&(t.selector.hittable=t.app.tree.hitChildren=!1),this.onLoad())}onUpdate(){}update(){this.onUpdate()}onUnload(){}unload(){const{editor:t}=this;t&&(t.app&&(t.selector.hittable=t.app.tree.hitChildren=!0),this.onUnload())}onDestroy(){}destroy(){this.onDestroy(),this.editor&&(this.view&&this.view.destroy(),this.eventIds&&this.editor.off_(this.eventIds),this.editor=this.view=this.eventIds=null)}}let zl=class extends Xg{static registerEditTool(){Ts.register(this)}get tag(){return"EditTool"}onMove(t){const{moveX:i,moveY:s,editor:n}=t,{app:r,list:o}=n;r.lockLayout(),o.forEach(a=>{a.moveWorld(i,s)}),r.unlockLayout()}onScale(t){const{scaleX:i,scaleY:s,transform:n,worldOrigin:r,editor:o}=t,{app:a,list:h}=o;a.lockLayout(),h.forEach(l=>{const c=o.getEditSize(l)!=="scale";n?l.transformWorld(n,c):l.scaleOfWorld(r,i,s,c)}),a.unlockLayout()}onRotate(t){const{rotation:i,transform:s,worldOrigin:n,editor:r}=t,{app:o,list:a}=r;o.lockLayout(),a.forEach(h=>{const l=r.getEditSize(h)!=="scale";s?h.transformWorld(s,l):h.rotateOfWorld(n,i)}),o.unlockLayout()}onSkew(t){const{skewX:i,skewY:s,transform:n,worldOrigin:r,editor:o}=t,{app:a,list:h}=o;a.lockLayout(),h.forEach(l=>{const c=o.getEditSize(l)!=="scale";n?l.transformWorld(n,c):l.skewOfWorld(r,i,s,c)}),a.unlockLayout()}load(){this.editBox.view.visible=!0,this.onLoad()}update(){const{editor:t,editBox:i}=this,{x:s,y:n,scaleX:r,scaleY:o,rotation:a,skewX:h,skewY:l,width:c,height:d}=t.element.getLayoutBounds("box",t,!0);i.set({x:s,y:n,scaleX:r,scaleY:o,rotation:a,skewX:h,skewY:l}),i.update({x:0,y:0,width:c,height:d}),this.onUpdate()}unload(){this.editBox.view.visible=!1,this.onUnload()}};zl=Nr([Ic()],zl);const{left:lp,right:tB}=mn,{move:Eo,copy:So,toNumberPoints:eB}=H;let cp=class extends zl{constructor(){super(...arguments),this.scaleOfEvent=!0}get tag(){return"LineEditTool"}onScaleWithDrag(t){const{drag:i,direction:s,lockRatio:n,around:r}=t,o=t.target,a=s===lp;if(o.pathInputed){const{path:h}=o.__,{from:l,to:c}=this.getFromToByPath(h);this.dragPoint(l,c,a,r,this.getInnerMove(o,i,n)),h[1]=l.x,h[2]=l.y,h[4]=c.x,h[5]=c.y,o.path=h}else if(o.points){const{points:h}=o,{from:l,to:c}=this.getFromToByPoints(h);this.dragPoint(l,c,a,r,this.getInnerMove(o,i,n)),h[0]=l.x,h[1]=l.y,h[2]=c.x,h[3]=c.y,o.points=h}else{const h=uc(),{toPoint:l}=o;o.rotation=0,this.dragPoint(h,l,a,r,this.getInnerMove(o,i,n)),o.getLocalPointByInner(h,null,null,!0),o.getLocalPointByInner(l,null,null,!0),o.x=h.x,o.y=h.y,o.getInnerPointByLocal(l,null,null,!0),o.toPoint=l}}getInnerMove(t,i,s){const n=i.getInnerMove(t);return s&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),n}getFromToByPath(t){return{from:{x:t[1],y:t[2]},to:{x:t[4],y:t[5]}}}getFromToByPoints(t){const i=eB(t);return{from:{x:i[0],y:i[1]},to:{x:i[2],y:i[3]}}}dragPoint(t,i,s,n,r){const{x:o,y:a}=r;s?(Eo(t,o,a),n&&Eo(i,-o,-a)):(n&&Eo(t,-o,-a),Eo(i,o,a))}onSkew(t){}onUpdate(){const{editBox:t}=this,{rotatePoints:i,resizeLines:s,resizePoints:n,rect:r}=t,o=this.editor.element;let a,h;if(o.pathInputed?a=this.getFromToByPath(o.__.path):o.points&&(a=this.getFromToByPoints(o.__.points)),a){const{from:l,to:c}=a;o.innerToWorld(l,l,!1,t),o.innerToWorld(c,c,!1,t),r.pen.clearPath().moveTo(l.x,l.y).lineTo(c.x,c.y),So(n[7],l),So(i[7],l),So(n[3],c),So(i[3],c)}for(let l=0;l<8;l++)l<4&&(s[l].visible=!1),h=l===lp||l===tB,n[l].visible=h,i[l].visible=a?!1:h}};cp=Nr([Ic()],cp);St.add("editor","resize","find");rt.editor=function(e){return new Wc(e)};ve(!1)(Ft.prototype,"textBox");le(L.prototype,"editOuter",{get(){return this.__.__isLinePath?"LineEditTool":"EditTool"}});le(L.prototype,"editInner",{get(){return"PathEditor"}});le(Mt.prototype,"editInner",{get(){return""}});le(lt.prototype,"editInner",{get(){return"TextEditor"}});L.setEditConfig=function(e){le(this.prototype,"editConfig",{get(){return typeof e=="function"?e(this):e}})};L.setEditOuter=function(e){le(this.prototype,"editOuter",{get(){return typeof e=="string"?e:e(this)}})};L.setEditInner=function(e){le(this.prototype,"editInner",{get(){return typeof e=="string"?e:e(this)}})};function ma(e,t,i){iB(e.parentApp?e.parentApp:e,t),!(e.isApp||i)&&e.__eventIds.push(e.on_(Ht.BEFORE_MOVE,s=>{e.zoomLayer.move(e.getValidMove(s.moveX,s.moveY))}),e.on_(we.BEFORE_ZOOM,s=>{const{zoomLayer:n}=e,r=e.getValidScale(s.scale);r!==1&&(H.scaleOf(n,s,r),n.scale=n.__.scaleX*r)}))}function iB(e,t){const i={wheel:{preventDefault:!0},touch:{preventDefault:!0},pointer:{preventDefaultMenu:!0}};t&&gt.assign(i,t),gt.assign(e.config,i,e.userConfig)}function sB(e){ma(e,null,!0)}function nB(e){ma(e,{zoom:{min:.01,max:256},move:{holdSpaceKey:!0,holdMiddleKey:!0}})}function rB(e){ma(e,{zoom:{min:1},move:{scroll:"limit"}})}const oB=it.get("LeaferTypeCreator"),Kg={list:{},register(e,t){il[e]&&oB.repeat(e),il[e]=t},run(e,t){const i=il[e];i&&i(t)}},{list:il,register:wa}=Kg;wa("viewport",ma);wa("custom",sB);wa("design",nB);wa("document",rB);const aB={getData(e){const t=e[0],i=e[1],s=H.getCenter(t.from,i.from),n=H.getCenter(t.to,i.to),r={x:n.x-s.x,y:n.y-s.y},o=H.getDistance(t.from,i.from),h=H.getDistance(t.to,i.to)/o,l=H.getRotation(t.from,i.from,t.to,i.to);return{move:r,scale:h,rotation:l,center:n}}},up={getMove(e,t){let{moveSpeed:i}=t,{deltaX:s,deltaY:n}=e;return e.shiftKey&&!s&&(s=n,n=0),s>50&&(s=Math.max(50,s/3)),n>50&&(n=Math.max(50,n/3)),{x:-s*i*2,y:-n*i*2}},getScale(e,t){let i,s=1,{zoomMode:n,zoomSpeed:r}=t;const o=e.deltaY||e.deltaX;if(n?(i=n==="mouse"?!0:!e.deltaX&&(E.intWheelDeltaY?Math.abs(o)>17:Math.ceil(o)!==o),(e.shiftKey||e.metaKey||e.ctrlKey)&&(i=!0)):i=!e.shiftKey&&(e.metaKey||e.ctrlKey),i){r=$t.within(r,0,1);const a=e.deltaY?t.delta.y:t.delta.x;s=1-o/(a*4)*r,s<.5&&(s=.5),s>=1.5&&(s=1.5)}return s}};class hB{get transforming(){return!!(this.moveData||this.zoomData||this.rotateData)}constructor(t){this.interaction=t}move(t){const{interaction:i}=this;t.moveType||(t.moveType="move"),this.moveData||(this.setPath(t),this.moveData=Object.assign(Object.assign({},t),{moveX:0,moveY:0}),i.emit(Ht.START,this.moveData)),t.path=this.moveData.path,i.emit(Ht.BEFORE_MOVE,t),i.emit(Ht.MOVE,t),this.transformEndWait()}zoom(t){const{interaction:i}=this;this.zoomData||(this.setPath(t),this.zoomData=Object.assign(Object.assign({},t),{scale:1}),i.emit(we.START,this.zoomData)),t.path=this.zoomData.path,i.emit(we.BEFORE_ZOOM,t),i.emit(we.ZOOM,t),this.transformEndWait()}rotate(t){const{interaction:i}=this;this.rotateData||(this.setPath(t),this.rotateData=Object.assign(Object.assign({},t),{rotation:0}),i.emit(ze.START,this.rotateData)),t.path=this.rotateData.path,i.emit(ze.BEFORE_ROTATE,t),i.emit(ze.ROTATE,t),this.transformEndWait()}setPath(t){const{interaction:i}=this,{path:s}=i.selector.getByPoint(t,i.hitRadius);t.path=s,i.cancelHover()}transformEndWait(){clearTimeout(this.transformTimer),this.transformTimer=setTimeout(()=>{this.transformEnd()},this.interaction.p.transformTime)}transformEnd(){const{interaction:t,moveData:i,zoomData:s,rotateData:n}=this;i&&t.emit(Ht.END,i),s&&t.emit(we.END,s),n&&t.emit(ze.END,n),this.reset()}reset(){this.zoomData=this.moveData=this.rotateData=null}destroy(){this.reset()}}const Fc=Wi.prototype,lB=new tt;Fc.initType=function(e){Kg.run(e,this)};Fc.getValidMove=function(e,t){const{scroll:i,disabled:s}=this.app.config.move;if(i){const n=i===!0?"":i;if(n.includes("x")?(e=e||t,t=0):n.includes("y")?(t=t||e,e=0):Math.abs(e)>Math.abs(t)?t=0:e=0,n.includes("limit")){const{x:r,y:o,width:a,height:h}=lB.set(this.__world).addPoint(this.zoomLayer),l=r+a-this.width,c=o+h-this.height;r>=0&&l<=0?e=0:e>0?r+e>0&&(e=-r):e<0&&l+e<0&&(e=-l),o>=0&&c<=0?t=0:t>0?o+t>0&&(t=-o):t<0&&c+t<0&&(t=-c)}}return{x:s?0:e,y:s?0:t}};Fc.getValidScale=function(e){const{scaleX:t}=this.zoomLayer.__,{min:i,max:s,disabled:n}=this.app.config.zoom,r=Math.abs(t*e);return i&&r<i?e=i/t:s&&r>s&&(e=s/t),n?1:$t.float(e)};function qg(e,t){return Object.assign(Object.assign({},t),{moveX:e.x,moveY:e.y})}function cB(e,t){return Object.assign(Object.assign({},t),{rotation:e})}function Zg(e,t){return Object.assign(Object.assign({},t),{scale:e})}const $s=bc.prototype;$s.createTransformer=function(){this.transformer=new hB(this)};$s.move=function(e){this.transformer.move(e)};$s.zoom=function(e){this.transformer.zoom(e)};$s.rotate=function(e){this.transformer.rotate(e)};$s.transformEnd=function(){this.transformer.transformEnd()};$s.wheel=function(e){const{wheel:t}=this.config;if(t.disabled)return;const i=t.getScale?t.getScale(e,t):up.getScale(e,t);i!==1?this.zoom(Zg(i,e)):this.move(qg(t.getMove?t.getMove(e,t):up.getMove(e,t),e))};$s.multiTouch=function(e,t){if(this.config.multiTouch.disabled)return;const{move:i,rotation:s,scale:n,center:r}=aB.getData(t);Object.assign(e,r),this.rotate(cB(s,e)),this.zoom(Zg(n,e)),this.move(qg(i,e))};const Vr=eg.prototype,{abs:dp}=Math;Vr.checkDragEndAnimate=function(e,t){const{moveX:i,moveY:s}=this.dragData,n=dp(i),r=dp(s),o=t?1:.1,a=this.interaction.m.dragAnimate&&this.canAnimate&&this.moving&&(n>o||r>o);if(a){const h=e.pointerType==="touch"?3:1,l=70;t=t?.95:h,n*t>l?t=l/n:r*t>l&&(t=l/r),e=Object.assign({},e),H.move(e,i*t,s*t),this.drag(e),this.animate(()=>{this.dragEnd(e,1)})}return a};Vr.animate=function(e,t){const i=e||this.animateWait;i&&this.interaction.target.nextRender(i,null,t),this.animateWait=e};Vr.checkDragOut=function(e){const{interaction:t}=this;this.autoMoveCancel(),this.dragging&&!t.shrinkCanvasBounds.hitPoint(e)&&this.autoMoveOnDragOut(e)};Vr.autoMoveOnDragOut=function(e){const{interaction:t,downData:i,canDragOut:s}=this,{autoDistance:n,dragOut:r}=t.m;if(!r||!s||!n)return;const o=t.shrinkCanvasBounds,{x:a,y:h}=o,l=D.maxX(o),c=D.maxY(o),d=e.x<a?n:l<e.x?-n:0,f=e.y<h?n:c<e.y?-n:0;let u=0,p=0;this.autoMoveTimer=setInterval(()=>{u+=d,p+=f,H.move(i,d,f),H.move(this.dragData,d,f),t.move(Object.assign(Object.assign({},e),{moveX:d,moveY:f,totalX:u,totalY:p,moveType:"drag"})),t.pointerMoveReal(e)},10)};Vr.autoMoveCancel=function(){this.autoMoveTimer&&(clearInterval(this.autoMoveTimer),this.autoMoveTimer=0)};St.add("viewport");function fp(e,t){let i=1;const s=t==="out",n=Math.abs(e);if(n>1){for(;s?i<n:i<=n;)i*=2;s&&(i/=2)}else{for(;s?i>=n:i>n;)i/=2;s||(i*=2)}return i/e}function uB(e,t){let{x:i,y:s,width:n,height:r}=e,o;return r||(r=n*(t.height/t.width),o=!0),n||(n=r*(t.width/t.height),o=!0),o?{x:i,y:s,width:n,height:r}:e}St.add("view");Wi.prototype.zoom=function(e,t,i){const{zoomLayer:s}=this,n=this.canvas.bounds.clone().shrink(t!==void 0?t:30),r=new tt,o={x:n.x+n.width/2,y:n.y+n.height/2};let a;const{scaleX:h}=this.__;if(typeof e=="string")switch(e){case"in":a=fp(h,"in");break;case"out":a=fp(h,"out");break;case"fit":e=this.boxBounds;break;case"fit-width":e=new tt(this.boxBounds),e.height=0;break;case"fit-height":e=new tt(this.boxBounds),e.width=0;break}else typeof e=="number"&&(a=e/h);if(a)a!==1&&s.scaleOfWorld(o,this.getValidScale(a));else if(typeof e=="object"){const l=e instanceof Array;if(l||e.tag){const v=l?e:[e];r.setListWithFn(v,as.worldBounds)}else{const v=uB(e,n);r.set(s.getWorldBounds(v))}const{x:c,y:d,width:f,height:u}=r;let p=n.x-c,y=n.y-d;if(i)p+=Math.max((n.width-f)/2,0),y+=Math.max((n.height-u)/2,0);else{const v=this.getValidScale(Math.min(n.width/f,n.height/u));p+=(n.width-f*v)/2,y+=(n.height-u*v)/2,s.scaleOfWorld(r,v),r.scaleOf(r,v)}return s.move(p,y),r.move(p,y)}return s.worldBoxBounds};St.add("scroll");function zc(e,t,i,s){var n=arguments.length,r=n<3?t:s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}class dB extends J_{}let Ko=class extends ei{get __tag(){return"Arrow"}constructor(t){super(t),this.__.__useArrow=!0}};zc([Ut(dB)],Ko.prototype,"__",void 0);zc([ii("angle")],Ko.prototype,"endArrow",void 0);Ko=zc([Gt()],Ko);const{M:fB,L:pB,C:_B,Q:gB,O:yB}=xe,{rotate:mB,copyFrom:wB,scale:xB}=H,er={},Jg={layout(e,t,i,s,n,r,o){let a,h=0,l,c=e.length;for(;h<c;)switch(a=e[h],a){case fB:case pB:sl(e,h+1,t,i,s,n,r,o),h+=3;break;case _B:for(l=1;l<6;l+=2)sl(e,h+l,t,i,s,n,r,o);h+=7;break;case gB:for(l=1;l<4;l+=2)sl(e,h+l,t,i,s,n,r,o);h+=5;break;case yB:e[h+1]+=t,e[h+2]+=i,s&&(e[h+3]*=s),r&&(e[h+4]+=r,e[h+5]+=r),h+=7;break}},rotate(e,t,i){Jg.layout(e,0,0,1,1,t,i)}};function sl(e,t,i,s,n,r,o,a){wB(er,e[t],e[t+1]),o&&mB(er,o,a),n&&xB(er,n,r),e[t]=i+er.x,e[t+1]=s+er.y}const{layout:pp,rotate:Hc}=Jg,{getAngle:bB}=H,Tn={x:-.5},vB={connect:Tn,offset:{x:-.71,bevelJoin:.36,roundJoin:.22},path:[1,-3,-3,2,0,0,2,-3,3]},EB={connect:Tn,offset:{x:-1.207,bevelJoin:.854,roundJoin:.707},path:[1,-3,-3,2,0,0,2,-1,0]},SB=[1,-3,0,2,-3,-2,2,0,0,2,-3,2,2,-3,0],Qg={connect:Tn,offset:{x:-.9,bevelJoin:.624,roundJoin:.4},path:[...SB,1,-2.05,1.1,2,-2.05,-1.1],dashPath:[1,-2,0,2,-.5,0]},TB=[1,-3,0,2,-3.5,-1.8,2,0,0,2,-3.5,1.8,2,-3,0],CB={connect:Tn,offset:{x:-1.1,bevelJoin:.872,roundJoin:.6},path:[...TB,1,-2.25,.95,2,-2.25,-.95],dashPath:[1,-3,0,2,-.5,0]},ty={offset:Tn,path:[...Qg.path],dashPath:[1,-2.5,0,2,-1,0]};Hc(ty.path,180,{x:-1.5,y:0});const ey={connect:{x:-1.3},path:[1,1.8,-.1,2,1.8,0,26,0,0,1.8,0,359,0]},BB={connect:{x:.5},path:[...ey.path,1,0,0,26,0,0,1,0,360,0],dashPath:[1,-.5,0,2,.5,0]},jc={connect:{x:-1.3},path:[1,-1.4,0,2,-1.4,-1.4,2,1.4,-1.4,2,1.4,1.4,2,-1.4,1.4,2,-1.4,0]},iy={path:[...jc.path,2,-1.4,-.49,2,1,-.49,1,-1.4,.49,2,1,.49]},sy=gt.clone(jc),ny=gt.clone(iy);Hc(sy.path,45);Hc(ny.path,45);const RB={offset:Tn,path:[1,0,-2,2,0,2]},ry={angle:vB,"angle-side":EB,arrow:CB,triangle:Qg,"triangle-flip":ty,circle:BB,"circle-line":ey,square:iy,"square-line":jc,diamond:ny,"diamond-line":sy,mark:RB};function _p(e,t,i,s,n,r,o){const{strokeCap:a,strokeJoin:h}=e.__,{offset:l,connect:c,path:d,dashPath:f}=typeof t=="object"?t:ry[t];let u=c?c.x:0,p=l?l.x:0;const y=[...d];return o&&f&&y.push(...f),a!=="none"&&(u-=.5),l&&(h==="round"&&l.roundJoin?p+=l.roundJoin:h==="bevel"&&l.bevelJoin&&(p+=l.bevelJoin)),p&&pp(y,p,0),pp(y,s.x,s.y,n,n,bB(i,s)),r.x=(u+p)*n,y}const{M:gp,L:nl,C:yp,Q:mp,Z:kB,N:LB,D:OB,X:PB,G:MB,F:AB,O:$B,P:DB,U:wp}=xe,{copy:rl,copyFrom:Hl,getDistancePoint:xp}=H,Js={},ol={},ir={},Ki={},Pi={},IB={list:ry,addArrows(e,t){const{startArrow:i,endArrow:s,strokeWidth:n,dashPattern:r,__pathForRender:o}=e.__;let a,h=0,l=o.length,c=0,d=i&&i!=="none";for(;h<l;){switch(a=o[h],a){case gp:case nl:(c<2||h+6>=l)&&(Hl(Pi,o[h+1],o[h+2]),!c&&d&&rl(ol,Pi)),h+=3;break;case yp:(c===1||h+7===l)&&al(o,Ki,Pi,h+3),h+=7;break;case mp:(c===1||h+5===l)&&al(o,Ki,Pi,h+1),h+=5;break;case kB:return;case LB:h+=5;break;case OB:h+=9;break;case PB:h+=6;break;case MB:h+=9;break;case AB:h+=5;break;case $B:h+=7;break;case DB:h+=4;break;case wp:(c===1||h+6===l)&&al(o,Ki,Pi,h+1),h+=6;break}if(c++,c===1&&a!==gp)return;if(c===2&&d&&rl(ir,a===nl?Pi:Ki),h===l){const f=e.__.__pathForRender=t?[...o]:o,u=e.__.__pathForArrow=[];if(d){const p=_p(e,i,ir,ol,n,Js,!!r);r?u.push(...p):f.push(...p),Js.x&&(xp(ol,ir,-Js.x,!0),f[1]=ir.x,f[2]=ir.y)}if(s&&s!=="none"){const p=_p(e,s,Ki,Pi,n,Js,!!r);if(r?u.push(...p):f.push(...p),Js.x){xp(Pi,Ki,-Js.x,!0);let y;switch(a){case nl:y=h-3+1;break;case yp:y=h-7+5;break;case mp:y=h-5+3;break;case wp:y=h-6+3;break}y&&WB(f,Ki,y)}}}else rl(Ki,Pi)}}};function al(e,t,i,s){Hl(t,e[s],e[s+1]),Hl(i,e[s+2],e[s+3])}function WB(e,t,i){e[i]=t.x,e[i+1]=t.y}function oy(e){return kt(e,t=>({set(i){if(this.__setAttr(t,i)){const s=this.__;s.__useArrow=s.startArrow!=="none"||s.endArrow!=="none",U_(this)}}}))}St.add("arrow");const ay=L.prototype;oy("none")(ay,"startArrow");oy("none")(ay,"endArrow");Object.assign(wc,IB);function hy(e,t,i,s){function n(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(c){try{l(s.next(c))}catch(d){o(d)}}function h(c){try{l(s.throw(c))}catch(d){o(d)}}function l(c){c.done?r(c.value):n(c.value).then(a,h)}l((s=s.apply(e,[])).next())})}const{setPoint:FB,addPoint:zB,toBounds:HB}=$r;function jB(e){const{width:t,height:i}=e.view,{data:s}=e.context.getImageData(0,0,t,i);let n,r,o,a=0;for(let l=0;l<s.length;l+=4)s[l+3]!==0&&(n=a%t,r=(a-n)/t,o?zB(o,n,r):FB(o={},n,r)),a++;const h=new tt;return HB(o,h),h.scale(1/e.pixelRatio).ceil()}const NB={export(e,t,i){this.running=!0;const s=wi.fileType(t),n=t.includes(".");return i=wi.getExportOptions(i),VB(r=>new Promise(o=>{const a=d=>{r(d),o(),this.running=!1},{toURL:h}=E,{download:l}=E.origin;if(s==="json")return n&&l(h(JSON.stringify(e.toJSON(i.json)),"text"),t),a({data:n?!0:e.toJSON(i.json)});if(s==="svg")return n&&l(h(e.toSVG(),"svg"),t),a({data:n?!0:e.toSVG()});const{leafer:c}=e;c?(ly(e),c.waitViewCompleted(()=>hy(this,void 0,void 0,function*(){let d,f,u=1,p=1;const{worldTransform:y,isLeafer:v,isFrame:S}=e,{slice:x,trim:C,onCanvas:w}=i,M=i.smooth===void 0?c.config.smooth:i.smooth,z=i.contextSettings||c.config.contextSettings,V=i.screenshot||e.isApp,ut=v&&V&&i.fill===void 0?e.fill:i.fill,Lt=wi.isOpaqueImage(t)||ut,dt=new ae;if(V)d=V===!0?v?c.canvas.bounds:e.worldRenderBounds:V;else{let Yt=i.relative||(v?"inner":"local");switch(u=y.scaleX,p=y.scaleY,Yt){case"inner":dt.set(y);break;case"local":dt.set(y).divide(e.localTransform),u/=e.scaleX,p/=e.scaleY;break;case"world":u=1,p=1;break;case"page":Yt=e.leafer;default:dt.set(y).divide(e.getTransform(Yt));const te=Yt.worldTransform;u/=u/te.scaleX,p/=p/te.scaleY}d=e.getBounds("render",Yt)}const Q={scaleX:1,scaleY:1};$t.getScaleData(i.scale,i.size,d,Q);let wt=i.pixelRatio||1;e.isApp&&(Q.scaleX*=wt,Q.scaleY*=wt,wt=e.app.pixelRatio);const{x:ue,y:Ee,width:Pe,height:Ct}=new tt(d).scale(Q.scaleX,Q.scaleY),at={matrix:dt.scale(1/Q.scaleX,1/Q.scaleY).invert().translate(-ue,-Ee).withScale(1/u*Q.scaleX,1/p*Q.scaleY)};let U=rt.canvas({width:Math.round(Pe),height:Math.round(Ct),pixelRatio:wt,smooth:M,contextSettings:z}),Kt;if(x&&(Kt=e,Kt.__worldOpacity=0,e=c,at.bounds=U.bounds),U.save(),S&&ut!==void 0){const Yt=e.get("fill");e.fill="",e.__render(U,at),e.fill=Yt}else e.__render(U,at);if(U.restore(),Kt&&Kt.__updateWorldOpacity(),C){f=jB(U);const Yt=U,{width:te,height:Ur}=f,Gr={x:0,y:0,width:te,height:Ur,pixelRatio:wt};U=rt.canvas(Gr),U.copyWorld(Yt,f,Gr)}Lt&&U.fillWorld(U.bounds,ut||"#FFFFFF","destination-over"),w&&w(U);const vi=t==="canvas"?U:yield U.export(t,i);a({data:vi,width:U.pixelWidth,height:U.pixelHeight,renderBounds:d,trimBounds:f})}))):a({data:!1})}))}};let hl;function VB(e){return hl||(hl=new El),new Promise(t=>{hl.add(()=>hy(this,void 0,void 0,function*(){return yield e(t)}),{parallel:!1})})}function ly(e){e.__.__needComputePaint&&e.__.__computePaint(),e.isBranch&&e.children.forEach(t=>ly(t))}const xa=ha.prototype,cy=it.get("@leafer-in/export");xa.export=function(e,t){const{quality:i,blob:s}=wi.getExportOptions(t);return e.includes(".")?this.saveAs(e,i):s?this.toBlob(e,i):this.toDataURL(e,i)};xa.toBlob=function(e,t){return new Promise(i=>{E.origin.canvasToBolb(this.view,e,t).then(s=>{i(s)}).catch(s=>{cy.error(s),i(null)})})};xa.toDataURL=function(e,t){return E.origin.canvasToDataURL(this.view,e,t)};xa.saveAs=function(e,t){return new Promise(i=>{E.origin.canvasSaveAs(this.view,e,t).then(()=>{i(!0)}).catch(s=>{cy.error(s),i(!1)})})};St.add("export");Object.assign(Di,NB);L.prototype.export=function(e,t){return Di.export(this,e,t)};function UB(e,t,i,s){var n=arguments.length,r=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}const GB={none:"none",title:"capitalize",upper:"uppercase",lower:"lowercase","small-caps":"small-caps"},YB={top:"flex-start",middle:"center",bottom:"flex-end"};function XB(e,t,i){const{style:s}=e,{fill:n,padding:r,textWrap:o,textOverflow:a,textDecoration:h}=t;s.fontFamily=t.fontFamily,s.fontSize=t.fontSize*i+"px",KB(s,n),s.fontStyle=t.italic?"italic":"normal",s.fontWeight=t.fontWeight,s.textDecoration=h==="delete"?"line-through":h,s.textTransform=GB[t.textCase],s.textAlign=t.textAlign==="both"?"justify":t.textAlign,s.display="flex",s.flexDirection="column",s.justifyContent=YB[t.verticalAlign],s.lineHeight=(t.__.__lineHeight||0)*i+"px",s.letterSpacing=(t.__.__letterSpacing||0)*i+"px",o==="none"?s.whiteSpace="nowrap":o==="break"&&(s.wordBreak="break-all"),s.textIndent=(t.paraIndent||0)*i+"px",s.padding=r instanceof Array?r.map(l=>l*i+"px").join(" "):(r||0)*i+"px",s.textOverflow=a==="show"?"":a==="hide"?"clip":a}function KB(e,t){let i="black";if(t instanceof Array&&(t=t[0]),typeof t=="object")switch(t.type){case"solid":i=Xt.string(t.color);break;case"image":break;case"linear":case"radial":case"angular":const s=t.stops[0];i=Xt.string(typeof s=="string"?s:s.color);break;default:t.r!==void 0&&(i=Xt.string(t))}else i=t;e.color=i}let bp=class extends Xg{constructor(){super(...arguments),this.config={selectAll:!0},this.eventIds=[]}get tag(){return"TextEditor"}onLoad(){const{editor:t}=this,{config:i}=t.app,s=this.editTarget;s.visible=!1,this.isHTMLText=!(s instanceof lt),this._keyEvent=i.keyEvent,i.keyEvent=!1;const n=this.editDom=document.createElement("div"),{style:r}=n;n.contentEditable="true",r.position="fixed",r.transformOrigin="left top",r.boxSizing="border-box",this.isHTMLText?n.innerHTML=String(s.text):n.innerText=String(s.text);const{view:o}=t.app;(this.inBody=o instanceof HTMLCanvasElement)?document.body.appendChild(n):o.appendChild(n),this.eventIds=[t.app.on_(I.DOWN,l=>{let{target:c}=l.origin,d;for(;c;)c===n&&(d=!0),c=c.parentElement;d||t.closeInnerEditor()})],this.onFocus=this.onFocus.bind(this),this.onInput=this.onInput.bind(this),this.onUpdate=this.onUpdate.bind(this),this.onEscape=this.onEscape.bind(this),n.addEventListener("focus",this.onFocus),n.addEventListener("input",this.onInput),window.addEventListener("keydown",this.onEscape),window.addEventListener("scroll",this.onUpdate);const a=window.getSelection(),h=document.createRange();if(this.config.selectAll)h.selectNodeContents(n);else{const l=n.childNodes[0];h.setStartAfter(l),h.setEndAfter(l),h.collapse(!0)}a.removeAllRanges(),a.addRange(h)}onInput(){const{editDom:t}=this;this.editTarget.text=this.isHTMLText?t.innerHTML:t.innerText.replace(/\n\n/,`
`)}onFocus(){this.editDom.style.outline="none"}onEscape(t){t.code==="Escape"&&this.editor.closeInnerEditor()}onUpdate(){const{editTarget:t}=this;let i=1;if(!this.isHTMLText){const{scaleX:y,scaleY:v}=t.worldTransform;i=Math.max(Math.abs(y),Math.abs(v)),t.fontSize*i<12&&(i*=12/t.fontSize)}this.textScale=i;const{a:s,b:n,c:r,d:o,e:a,f:h}=new ae(t.worldTransform).scale(1/i);let{x:l,y:c}=this.inBody?t.app.clientBounds:t.app.tree.clientBounds;this.inBody||(l-=window.scrollX,c-=window.scrollY);let{width:d,height:f}=t;d*=i,f*=i;const u=t.__;if(u.__autoWidth&&u.autoSizeAlign)switch(d+=20,u.textAlign){case"center":l-=d/2;break;case"right":l-=d}if(u.__autoHeight&&u.autoSizeAlign)switch(f+=20,u.verticalAlign){case"middle":c-=f/2;break;case"bottom":c-=f}const{style:p}=this.editDom;p.transform=`matrix(${s},${n},${r},${o},${a},${h})`,p.left=l+"px",p.top=c+"px",p.width=d+"px",p.height=f+"px",this.isHTMLText||XB(this.editDom,t,i)}onUnload(){const{editTarget:t,editor:i,editDom:s}=this;t&&(this.onInput(),t.visible=!0,i.app&&(i.app.config.keyEvent=this._keyEvent),i.off_(this.eventIds),s.removeEventListener("focus",this.onFocus),s.removeEventListener("input",this.onInput),window.removeEventListener("keydown",this.onEscape),window.removeEventListener("scroll",this.onUpdate),s.remove(),this.editDom=this.eventIds=void 0)}};bp=UB([ZC()],bp);St.add("text-editor","editor");function Nc(e,t,i,s){var n=arguments.length,r=n<3?t:s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}class qB extends Q_{setText(t){this._text=t,this.__htmlChanged=!0}}let qo=class extends Tr{get __tag(){return"HTMLText"}get editInner(){return"TextEditor"}constructor(t){super(t)}__updateBoxBounds(){const t=this.__;if(t.__htmlChanged){const i=document.createElement("div"),{style:s}=i;s.all="initial",s.position="absolute",s.visibility="hidden",i.innerHTML=this.text,document.body.appendChild(i);const{width:n,height:r}=i.getBoundingClientRect(),o=n+10,a=`<svg xmlns="http://www.w3.org/2000/svg" width="${o}" height="${r}">
                        <foreignObject width="${o}" height="${r}">
                            <style>
                                * {
                                    margin: 0;
                                    padding: 0;
                                    box-sizing: border-box;
                                }
                            </style>
                            <body xmlns="http://www.w3.org/1999/xhtml">
                                ${this.text}
                            </body>
                        </foreignObject>
                    </svg>`;t.__setImageFill("data:image/svg+xml,"+encodeURIComponent(a)),t.__naturalWidth=o/t.pixelRatio,t.__naturalHeight=r/t.pixelRatio,t.__htmlChanged=!1,i.remove()}super.__updateBoxBounds()}};Nc([Ut(qB)],qo.prototype,"__",void 0);Nc([ct("")],qo.prototype,"text",void 0);qo=Nc([Gt()],qo);St.add("html");function Vc(e,t){return kt(e,i=>({set(s){this.__setAttr(i,s),this.waitLeafer(()=>t?_t.setStyleName(this,t,s):_t.set(this,s))}}))}function Cn(e){return kt(e,t=>({set(i){this.__setAttr(t,i),this.__layout.stateStyleChanged=!0}}))}function ba(e,t){if(t&&t!==!0)return t;if(!e.button){let{parent:i}=e;for(let s=0;s<2;s++)if(i){if(i.button)return i;i=i.parent}}return null}function uy(e,t){typeof t!="object"&&(t=void 0),Uc(e,t,"in")}function dy(e,t){const{normalStyle:i}=e;typeof t!="object"&&(t=void 0),i&&(t||(t=i),Uc(e,t,"out"))}const vp={};function Uc(e,t,i){const{normalStyle:s}=e;t||(t=vp),t.scale&&($t.assignScale(t,t.scale),delete t.scale),(t===vp||!_t.canAnimate)&&(i=null);let n=i?JB(i,t,e):!1;const r=n?ZB(e,t):void 0;_t.canAnimate&&jl(e)&&e.killAnimate("transition"),s&&e.set(s,"temp");const a=jl(e);if(a){const{animation:h}=a;if(h){const l=e.animate(h,void 0,"animation",!0);Object.assign(a,l.endingStyle),i!=="in"||t.animation!==h?l.kill():n=!1,delete a.animation}e.normalStyle=Nl(a,e),e.set(a,"temp")}else e.normalStyle=void 0;if(n){const h=Nl(r,e);e.set(r,"temp"),e.animate([r,h],n,"transition",!0)}e.__layout.stateStyleChanged=!1}function jl(e){let t;const i={},{state:s}=e,n=ba(e),r=s&&e.states[s];r&&_t.isState(s,e,n)&&(t=Qs(i,r));const o=i.selectedStyle||e.selectedStyle;if(o&&_t.isSelected(e,n)&&(t=Qs(i,o)),_t.isDisabled(e,n)){const a=i.disabledStyle||e.disabledStyle;a&&(t=Qs(i,a))}else{const a=i.focusStyle||e.focusStyle;a&&_t.isFocus(e,n)&&(t=Qs(i,a));const h=i.hoverStyle||e.hoverStyle;h&&_t.isHover(e,n)&&(t=Qs(i,h));const l=i.pressStyle||e.pressStyle;l&&_t.isPress(e,n)&&(t=Qs(i,l))}return t?i:void 0}function Nl(e,t,i,s){const n=i?e:{},r=i||e;for(let o in r)s&&_t.animateExcludes[o]||(n[o]=t[o]);return n}function Ep(e,t,i){return Nl(e,t,i,!0)}function ZB(e,t){const i=Ep(t,e),s=e.animate();return s&&Ep(i,e,s.fromStyle),i}function JB(e,t,i){let s=e==="in"?"transition":"transitionOut";return e==="out"&&Na(i[s])&&Na(t[s])&&(s="transition"),Na(t[s])?i[s]:t[s]}function Qs(e,t){return Object.assign(e,t),!0}function Zo(e,t){const i=e[t];i&&uy(e,i),e.button&&Yc(e.children,t)}function Gc(e,t,i){i||(i=e.states[t]),uy(e,i),e.button&&Yc(e.children,null,t)}function Yc(e,t,i){if(!e)return;let s,n;for(let r=0,o=e.length;r<o;r++){if(s=e[r],t){switch(n=!0,t){case"hoverStyle":_t.isHover(s)&&(n=!1);break;case"pressStyle":_t.isPress(s)&&(n=!1);break;case"focusStyle":_t.isFocus(s)&&(n=!1)}n&&Zo(s,t)}else i&&Gc(s,i);s.isBranch&&Yc(s.children,t,i)}}function Jo(e,t){const i=e[t];i&&dy(e,i),e.button&&Kc(e.children,t)}function Xc(e,t,i){dy(e,i),e.button&&Kc(e.children,null,t)}function Kc(e,t,i){if(!e)return;let s;for(let n=0,r=e.length;n<r;n++)s=e[n],t?Jo(s,t):i&&Xc(s,i),s.isBranch&&Kc(s.children,t,i)}function QB(e,t){switch(t){case I.ENTER:Zo(e,"hoverStyle");break;case I.LEAVE:Jo(e,"hoverStyle");break;case I.DOWN:Zo(e,"pressStyle");break;case I.UP:Jo(e,"pressStyle");break}}function va(e,t,i){let s;const n=t.leafer?t.leafer.interaction:null;if(n&&(s=n[e](t),!s&&i)){const r=ba(t,i);r&&(s=n[e](r))}return s}function fy(e,t,i){let s=t[e];if(!s&&i){const n=ba(t,i);n&&(s=n[e])}return s}function tR(e,t,i){let s=t.states[e];if(!s&&i){const n=ba(t,i);n&&(s=n.states[e])}return!!s}St.add("state");_t.animateExcludes={animation:1,animationOut:1,transition:1,transitionOut:1,states:1,state:1,normalStyle:1,hoverStyle:1,pressStyle:1,focusStyle:1,selectedStyle:1,disabledStyle:1};_t.isState=function(e,t,i){return tR(e,t,i)};_t.isSelected=function(e,t){return fy("selected",e,t)};_t.isDisabled=function(e,t){return fy("disabled",e,t)};_t.isFocus=function(e,t){return va("isFocus",e,t)};_t.isHover=function(e,t){return va("isHover",e,t)};_t.isPress=function(e,t){return va("isPress",e,t)};_t.isDrag=function(e,t){return va("isDrag",e,t)};_t.setStyleName=function(e,t,i){i?Gc(e,t,e[t]):Xc(e,t,e[t])};_t.set=function(e,t){const i=e.states[t];i?Gc(e,t,i):Xc(e,t,i)};_t.getStyle=jl;_t.updateStyle=Uc;_t.updateEventStyle=QB;const Oe=L.prototype;Vc(!1,"selectedStyle")(Oe,"selected");Vc(!1,"disabledStyle")(Oe,"disabled");Cn({})(Oe,"states");Vc("")(Oe,"state");ve()(Oe,"normalStyle");Cn()(Oe,"hoverStyle");Cn()(Oe,"pressStyle");Cn()(Oe,"focusStyle");Cn()(Oe,"selectedStyle");Cn()(Oe,"disabledStyle");ve(!1)(Oe,"button");Oe.focus=function(e=!0){this.waitLeafer(()=>{let{focusData:t}=this.app.interaction;e?(t&&t.focus(!1),t=this):t=null,this.app.interaction.focusData=t,e?Zo(this,"focusStyle"):Jo(this,"focusStyle")})};Oe.updateState=function(){_t.updateStyle(this,void 0,"in")};const eR={class:"page"},iR={class:"active-box"},sR={class:"score"},nR={key:0,class:"btns"},rR={key:1,class:"btns"},oR={key:2,class:"btns"},aR={key:3,class:"btns"},hR={class:"tips"},lR={key:0,class:"modal"},cR={class:"modal-content"},uR=t_({__name:"index",setup(e){const t=iu(0),i=iu(0);var s;n_(()=>{s=new mS({view:"leafer-view",fill:"",editor:{},gridSize:16}),s.on("scoreUpdate",a=>{t.value=a.score}),s.on("gameOver",()=>{i.value=3}),window.addEventListener("keydown",a=>{a.code==="Space"&&i.value!==3&&(s.suspend?n():r())})});function n(){s.startGame(),i.value=1}function r(){s.stopGame(),i.value=2}function o(){s.reStart(),i.value=1,t.value=0}return(a,h)=>(Zi(),ws("div",eR,[It("div",iR,[It("div",sR,[h[0]||(h[0]=wl(" 分数：")),It("b",null,ll(t.value),1)]),i.value===0?(Zi(),ws("div",nR,[It("button",{onClick:n},"开始游戏")])):i.value===1?(Zi(),ws("div",rR,[It("button",{onClick:r,style:{background:"rgb(245, 124, 37)"}},"暂停游戏")])):i.value===2?(Zi(),ws("div",oR,[It("button",{onClick:n},"继续游戏")])):i.value===3?(Zi(),ws("div",aR,[It("button",{onClick:n},"重新开始")])):fu("",!0)]),h[3]||(h[3]=It("div",{id:"leafer-view"},null,-1)),h[4]||(h[4]=It("div",{class:"alert"}," 空格键暂停/继续游戏 ",-1)),It("div",hR,[i.value===3?(Zi(),ws("div",lR,[It("div",cR,[h[2]||(h[2]=It("h2",null,"游戏结束",-1)),It("p",null,[h[1]||(h[1]=wl("最终得分：")),It("b",null,ll(t.value),1)]),It("button",{onClick:o},"再玩一次")])])):fu("",!0)])]))}}),py=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i},dR=py(uR,[["__scopeId","data-v-5c2b1b79"]]),fR=t_({__name:"App",setup(e){return(t,i)=>(Zi(),ws(fi,null,[mi(dR),i[0]||(i[0]=It("a",{href:"https://github.com/yh4922/leafer-greedy-snake",target:"_blank",class:"github-link"},[It("svg",{height:"32","aria-hidden":"true",viewBox:"0 0 16 16",version:"1.1",width:"32"},[It("path",{fill:"currentColor",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})])],-1))],64))}}),pR=py(fR,[["__scopeId","data-v-4a41dc1f"]]);Iw(pR).mount("#app");
